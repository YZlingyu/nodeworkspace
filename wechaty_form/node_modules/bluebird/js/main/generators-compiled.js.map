{"version":3,"sources":["generators.js"],"names":[],"mappings":"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","file":"generators-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise) {\nvar errors = require(\"./errors.js\");\nvar TypeError = errors.TypeError;\nvar util = require(\"./util.js\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    var promise = this._promise = new Promise(INTERNAL);\n    promise._captureStackTrace();\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n}\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._next(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    if (result === errorObj) {\n        return this._promise._rejectCallback(result.e, false, true);\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._promise._resolveCallback(value);\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._throw(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/4Y4pDk\\u000a\\u000a\".replace(\"%s\", value) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise._then(\n            this._next,\n            this._throw,\n            undefined,\n            this,\n            null\n       );\n    }\n};\n\nPromiseSpawn.prototype._throw = function (reason) {\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._next = function (value) {\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/6Vqhm0\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        spawn._generator = generator;\n        spawn._next(undefined);\n        return spawn.promise();\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") throw new TypeError(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/6Vqhm0\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n"]}