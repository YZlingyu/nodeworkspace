{"version":3,"sources":["debuggability.js"],"names":[],"mappings":"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","file":"debuggability-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, CapturedTrace) {\nvar getDomain = Promise._getDomain;\nvar async = require(\"./async.js\");\nvar Warning = require(\"./errors.js\").Warning;\nvar util = require(\"./util.js\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar debugging = false || (util.isNode &&\n                    (!!process.env[\"BLUEBIRD_DEBUG\"] ||\n                     process.env[\"NODE_ENV\"] === \"development\"));\n\nif (util.isNode && process.env[\"BLUEBIRD_DEBUG\"] == 0) debugging = false;\n\nif (debugging) {\n    async.disableTrampolineIfNecessary();\n}\n\nPromise.prototype._ignoreRejections = function() {\n    this._unsetRejectionIsUnhandled();\n    this._bitField = this._bitField | 16777216;\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 16777216) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    CapturedTrace.fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._getCarriedStackTrace() || this._settledValue;\n        this._setUnhandledRejectionIsNotified();\n        CapturedTrace.fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 524288;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~524288);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 524288) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 2097152;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~2097152);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 2097152) > 0;\n};\n\nPromise.prototype._setCarriedStackTrace = function (capturedTrace) {\n    this._bitField = this._bitField | 1048576;\n    this._fulfillmentHandler0 = capturedTrace;\n};\n\nPromise.prototype._isCarryingStackTrace = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._getCarriedStackTrace = function () {\n    return this._isCarryingStackTrace()\n        ? this._fulfillmentHandler0\n        : undefined;\n};\n\nPromise.prototype._captureStackTrace = function () {\n    if (debugging) {\n        this._trace = new CapturedTrace(this._peekContext());\n    }\n    return this;\n};\n\nPromise.prototype._attachExtraTrace = function (error, ignoreSelf) {\n    if (debugging && canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = CapturedTrace.parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n};\n\nPromise.prototype._warn = function(message) {\n    var warning = new Warning(message);\n    var ctx = this._peekContext();\n    if (ctx) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = CapturedTrace.parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n    CapturedTrace.formatAndLogError(warning, \"\");\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ? fn : domain.bind(fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ? fn : domain.bind(fn))\n                                 : undefined;\n};\n\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() &&\n        debugging === false\n   ) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/DT1qyG\\u000a\");\n    }\n    debugging = CapturedTrace.isSupported();\n    if (debugging) {\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return debugging && CapturedTrace.isSupported();\n};\n\nif (!CapturedTrace.isSupported()) {\n    Promise.longStackTraces = function(){};\n    debugging = false;\n}\n\nreturn function() {\n    return debugging;\n};\n};\n"]}