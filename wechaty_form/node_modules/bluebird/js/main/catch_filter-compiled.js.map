{"version":3,"sources":["catch_filter.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UAAS,WAAT,EAAsB;AACvC,QAAI,OAAO,QAAQ,WAAR,CAAX;AACA,QAAI,SAAS,QAAQ,aAAR,CAAb;AACA,QAAI,WAAW,KAAK,QAApB;AACA,QAAI,WAAW,KAAK,QAApB;AACA,QAAI,OAAO,QAAQ,UAAR,EAAoB,IAA/B;AACA,QAAI,YAAY,OAAO,SAAvB;;AAEA,aAAS,WAAT,CAAqB,SAArB,EAAgC,QAAhC,EAA0C,OAA1C,EAAmD;AAC/C,aAAK,UAAL,GAAkB,SAAlB;AACA,aAAK,SAAL,GAAiB,QAAjB;AACA,aAAK,QAAL,GAAgB,OAAhB;AACH;;AAED,aAAS,aAAT,CAAuB,SAAvB,EAAkC,CAAlC,EAAqC;AACjC,YAAI,aAAa,EAAjB;AACA,YAAI,YAAY,SAAS,SAAT,EAAoB,IAApB,CAAyB,UAAzB,EAAqC,CAArC,CAAhB;;AAEA,YAAI,cAAc,QAAlB,EAA4B,OAAO,SAAP;;AAE5B,YAAI,WAAW,KAAK,UAAL,CAAf;AACA,YAAI,SAAS,MAAb,EAAqB;AACjB,qBAAS,CAAT,GAAa,IAAI,SAAJ,CAAc,sHAAd,CAAb;AACA,mBAAO,QAAP;AACH;AACD,eAAO,SAAP;AACH;;AAED,gBAAY,SAAZ,CAAsB,QAAtB,GAAiC,UAAU,CAAV,EAAa;AAC1C,YAAI,KAAK,KAAK,SAAd;AACA,YAAI,UAAU,KAAK,QAAnB;AACA,YAAI,UAAU,QAAQ,WAAR,EAAd;AACA,aAAK,IAAI,IAAI,CAAR,EAAW,MAAM,KAAK,UAAL,CAAgB,MAAtC,EAA8C,IAAI,GAAlD,EAAuD,EAAE,CAAzD,EAA4D;AACxD,gBAAI,OAAO,KAAK,UAAL,CAAgB,CAAhB,CAAX;AACA,gBAAI,kBAAkB,SAAS,KAAT,IACjB,QAAQ,IAAR,IAAgB,KAAK,SAAL,YAA0B,KAD/C;;AAGA,gBAAI,mBAAmB,aAAa,IAApC,EAA0C;AACtC,oBAAI,MAAM,SAAS,EAAT,EAAa,IAAb,CAAkB,OAAlB,EAA2B,CAA3B,CAAV;AACA,oBAAI,QAAQ,QAAZ,EAAsB;AAClB,gCAAY,CAAZ,GAAgB,IAAI,CAApB;AACA,2BAAO,WAAP;AACH;AACD,uBAAO,GAAP;AACH,aAPD,MAOO,IAAI,OAAO,IAAP,KAAgB,UAAhB,IAA8B,CAAC,eAAnC,EAAoD;AACvD,oBAAI,eAAe,cAAc,IAAd,EAAoB,CAApB,CAAnB;AACA,oBAAI,iBAAiB,QAArB,EAA+B;AAC3B,wBAAI,SAAS,CAAb;AACA;AACH,iBAHD,MAGO,IAAI,YAAJ,EAAkB;AACrB,wBAAI,MAAM,SAAS,EAAT,EAAa,IAAb,CAAkB,OAAlB,EAA2B,CAA3B,CAAV;AACA,wBAAI,QAAQ,QAAZ,EAAsB;AAClB,oCAAY,CAAZ,GAAgB,IAAI,CAApB;AACA,+BAAO,WAAP;AACH;AACD,2BAAO,GAAP;AACH;AACJ;AACJ;AACD,oBAAY,CAAZ,GAAgB,CAAhB;AACA,eAAO,WAAP;AACH,KAjCD;;AAmCA,WAAO,WAAP;AACC,CAhED","file":"catch_filter-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = require(\"./util.js\");\nvar errors = require(\"./errors.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar keys = require(\"./es5.js\").keys;\nvar TypeError = errors.TypeError;\n\nfunction CatchFilter(instances, callback, promise) {\n    this._instances = instances;\n    this._callback = callback;\n    this._promise = promise;\n}\n\nfunction safePredicate(predicate, e) {\n    var safeObject = {};\n    var retfilter = tryCatch(predicate).call(safeObject, e);\n\n    if (retfilter === errorObj) return retfilter;\n\n    var safeKeys = keys(safeObject);\n    if (safeKeys.length) {\n        errorObj.e = new TypeError(\"Catch filter must inherit from Error or be a simple predicate function\\u000a\\u000a    See http://goo.gl/o84o68\\u000a\");\n        return errorObj;\n    }\n    return retfilter;\n}\n\nCatchFilter.prototype.doFilter = function (e) {\n    var cb = this._callback;\n    var promise = this._promise;\n    var boundTo = promise._boundValue();\n    for (var i = 0, len = this._instances.length; i < len; ++i) {\n        var item = this._instances[i];\n        var itemIsErrorType = item === Error ||\n            (item != null && item.prototype instanceof Error);\n\n        if (itemIsErrorType && e instanceof item) {\n            var ret = tryCatch(cb).call(boundTo, e);\n            if (ret === errorObj) {\n                NEXT_FILTER.e = ret.e;\n                return NEXT_FILTER;\n            }\n            return ret;\n        } else if (typeof item === \"function\" && !itemIsErrorType) {\n            var shouldHandle = safePredicate(item, e);\n            if (shouldHandle === errorObj) {\n                e = errorObj.e;\n                break;\n            } else if (shouldHandle) {\n                var ret = tryCatch(cb).call(boundTo, e);\n                if (ret === errorObj) {\n                    NEXT_FILTER.e = ret.e;\n                    return NEXT_FILTER;\n                }\n                return ret;\n            }\n        }\n    }\n    NEXT_FILTER.e = e;\n    return NEXT_FILTER;\n};\n\nreturn CatchFilter;\n};\n"]}