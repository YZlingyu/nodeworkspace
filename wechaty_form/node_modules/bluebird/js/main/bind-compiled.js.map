{"version":3,"sources":["bind.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UAAS,OAAT,EAAkB,QAAlB,EAA4B,mBAA5B,EAAiD;AAClE,QAAI,aAAa,UAAS,CAAT,EAAY,CAAZ,EAAe;AAC5B,aAAK,OAAL,CAAa,CAAb;AACH,KAFD;;AAIA,QAAI,iBAAiB,UAAS,CAAT,EAAY,OAAZ,EAAqB;AACtC,gBAAQ,sBAAR,GAAiC,IAAjC;AACA,gBAAQ,cAAR,CAAuB,KAAvB,CAA6B,UAA7B,EAAyC,UAAzC,EAAqD,IAArD,EAA2D,IAA3D,EAAiE,CAAjE;AACH,KAHD;;AAKA,QAAI,kBAAkB,UAAS,OAAT,EAAkB,OAAlB,EAA2B;AAC7C,YAAI,KAAK,UAAL,EAAJ,EAAuB;AACnB,iBAAK,gBAAL,CAAsB,QAAQ,MAA9B;AACH;AACJ,KAJD;;AAMA,QAAI,kBAAkB,UAAS,CAAT,EAAY,OAAZ,EAAqB;AACvC,YAAI,CAAC,QAAQ,sBAAb,EAAqC,KAAK,OAAL,CAAa,CAAb;AACxC,KAFD;;AAIA,YAAQ,SAAR,CAAkB,IAAlB,GAAyB,UAAU,OAAV,EAAmB;AACxC,YAAI,eAAe,oBAAoB,OAApB,CAAnB;AACA,YAAI,MAAM,IAAI,OAAJ,CAAY,QAAZ,CAAV;AACA,YAAI,cAAJ,CAAmB,IAAnB,EAAyB,CAAzB;AACA,YAAI,SAAS,KAAK,OAAL,EAAb;;AAEA,YAAI,WAAJ,CAAgB,YAAhB;AACA,YAAI,wBAAwB,OAA5B,EAAqC;AACjC,gBAAI,UAAU;AACV,wCAAwB,KADd;AAEV,yBAAS,GAFC;AAGV,wBAAQ,MAHE;AAIV,gCAAgB;AAJN,aAAd;AAMA,mBAAO,KAAP,CAAa,QAAb,EAAuB,cAAvB,EAAuC,IAAI,SAA3C,EAAsD,GAAtD,EAA2D,OAA3D;AACA,yBAAa,KAAb,CACI,eADJ,EACqB,eADrB,EACsC,IAAI,SAD1C,EACqD,GADrD,EAC0D,OAD1D;AAEH,SAVD,MAUO;AACH,gBAAI,gBAAJ,CAAqB,MAArB;AACH;AACD,eAAO,GAAP;AACH,KArBD;;AAuBA,YAAQ,SAAR,CAAkB,WAAlB,GAAgC,UAAU,GAAV,EAAe;AAC3C,YAAI,QAAQ,SAAZ,EAAuB;AACnB,iBAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,MAAlC;AACA,iBAAK,QAAL,GAAgB,GAAhB;AACH,SAHD,MAGO;AACH,iBAAK,SAAL,GAAiB,KAAK,SAAL,GAAkB,CAAC,MAApC;AACH;AACJ,KAPD;;AASA,YAAQ,SAAR,CAAkB,QAAlB,GAA6B,YAAY;AACrC,eAAO,CAAC,KAAK,SAAL,GAAiB,MAAlB,MAA8B,MAArC;AACH,KAFD;;AAIA,YAAQ,IAAR,GAAe,UAAU,OAAV,EAAmB,KAAnB,EAA0B;AACrC,YAAI,eAAe,oBAAoB,OAApB,CAAnB;AACA,YAAI,MAAM,IAAI,OAAJ,CAAY,QAAZ,CAAV;;AAEA,YAAI,WAAJ,CAAgB,YAAhB;AACA,YAAI,wBAAwB,OAA5B,EAAqC;AACjC,yBAAa,KAAb,CAAmB,YAAW;AAC1B,oBAAI,gBAAJ,CAAqB,KAArB;AACH,aAFD,EAEG,IAAI,OAFP,EAEgB,IAAI,SAFpB,EAE+B,GAF/B,EAEoC,IAFpC;AAGH,SAJD,MAIO;AACH,gBAAI,gBAAJ,CAAqB,KAArB;AACH;AACD,eAAO,GAAP;AACH,KAbD;AAcC,CAtED","file":"bind-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise) {\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (this._isPending()) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, ret._progress, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, ret._progress, ret, context);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 131072;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~131072);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 131072) === 131072;\n};\n\nPromise.bind = function (thisArg, value) {\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        maybePromise._then(function() {\n            ret._resolveCallback(value);\n        }, ret._reject, ret._progress, ret, null);\n    } else {\n        ret._resolveCallback(value);\n    }\n    return ret;\n};\n};\n"]}