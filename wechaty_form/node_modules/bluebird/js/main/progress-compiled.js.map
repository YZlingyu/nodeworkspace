{"version":3,"sources":["progress.js"],"names":[],"mappings":"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","file":"progress-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, PromiseArray) {\nvar util = require(\"./util.js\");\nvar async = require(\"./async.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nPromise.prototype.progressed = function (handler) {\n    return this._then(undefined, undefined, handler, undefined, undefined);\n};\n\nPromise.prototype._progress = function (progressValue) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    this._target()._progressUnchecked(progressValue);\n\n};\n\nPromise.prototype._progressHandlerAt = function (index) {\n    return index === 0\n        ? this._progressHandler0\n        : this[(index << 2) + index - 5 + 2];\n};\n\nPromise.prototype._doProgressWith = function (progression) {\n    var progressValue = progression.value;\n    var handler = progression.handler;\n    var promise = progression.promise;\n    var receiver = progression.receiver;\n\n    var ret = tryCatch(handler).call(receiver, progressValue);\n    if (ret === errorObj) {\n        if (ret.e != null &&\n            ret.e.name !== \"StopProgressPropagation\") {\n            var trace = util.canAttachTrace(ret.e)\n                ? ret.e : new Error(util.toString(ret.e));\n            promise._attachExtraTrace(trace);\n            promise._progress(ret.e);\n        }\n    } else if (ret instanceof Promise) {\n        ret._then(promise._progress, null, null, promise, undefined);\n    } else {\n        promise._progress(ret);\n    }\n};\n\n\nPromise.prototype._progressUnchecked = function (progressValue) {\n    var len = this._length();\n    var progress = this._progress;\n    for (var i = 0; i < len; i++) {\n        var handler = this._progressHandlerAt(i);\n        var promise = this._promiseAt(i);\n        if (!(promise instanceof Promise)) {\n            var receiver = this._receiverAt(i);\n            if (typeof handler === \"function\") {\n                handler.call(receiver, progressValue, promise);\n            } else if (receiver instanceof PromiseArray &&\n                       !receiver._isResolved()) {\n                receiver._promiseProgressed(progressValue, promise);\n            }\n            continue;\n        }\n\n        if (typeof handler === \"function\") {\n            async.invoke(this._doProgressWith, this, {\n                handler: handler,\n                promise: promise,\n                receiver: this._receiverAt(i),\n                value: progressValue\n            });\n        } else {\n            async.invoke(progress, promise, progressValue);\n        }\n    }\n};\n};\n"]}