{"version":3,"sources":["promise.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,YAAW;AAC5B,QAAI,0BAA0B,YAAY;AACtC,eAAO,IAAI,SAAJ,CAAc,iFAAd,CAAP;AACH,KAFD;AAGA,QAAI,UAAU,YAAW;AACrB,eAAO,IAAI,QAAQ,iBAAZ,CAA8B,KAAK,OAAL,EAA9B,CAAP;AACH,KAFD;AAGA,QAAI,eAAe,UAAS,GAAT,EAAc;AAC7B,eAAO,QAAQ,MAAR,CAAe,IAAI,SAAJ,CAAc,GAAd,CAAf,CAAP;AACH,KAFD;;AAIA,QAAI,OAAO,QAAQ,WAAR,CAAX;;AAEA,QAAI,SAAJ;AACA,QAAI,KAAK,MAAT,EAAiB;AACb,oBAAY,YAAW;AACnB,gBAAI,MAAM,QAAQ,MAAlB;AACA,gBAAI,QAAQ,SAAZ,EAAuB,MAAM,IAAN;AACvB,mBAAO,GAAP;AACH,SAJD;AAKH,KAND,MAMO;AACH,oBAAY,YAAW;AACnB,mBAAO,IAAP;AACH,SAFD;AAGH;AACD,SAAK,iBAAL,CAAuB,OAAvB,EAAgC,YAAhC,EAA8C,SAA9C;;AAEA,QAAI,oBAAoB,EAAxB;AACA,QAAI,QAAQ,QAAQ,YAAR,CAAZ;AACA,QAAI,SAAS,QAAQ,aAAR,CAAb;AACA,QAAI,YAAY,QAAQ,SAAR,GAAoB,OAAO,SAA3C;AACA,YAAQ,UAAR,GAAqB,OAAO,UAA5B;AACA,YAAQ,iBAAR,GAA4B,OAAO,iBAAnC;AACA,YAAQ,YAAR,GAAuB,OAAO,YAA9B;AACA,YAAQ,gBAAR,GAA2B,OAAO,gBAAlC;AACA,YAAQ,cAAR,GAAyB,OAAO,gBAAhC;AACA,YAAQ,cAAR,GAAyB,OAAO,cAAhC;AACA,QAAI,WAAW,YAAU,CAAE,CAA3B;AACA,QAAI,QAAQ,EAAZ;AACA,QAAI,cAAc,EAAC,GAAG,IAAJ,EAAlB;AACA,QAAI,sBAAsB,QAAQ,gBAAR,EAA0B,OAA1B,EAAmC,QAAnC,CAA1B;AACA,QAAI,eACA,QAAQ,oBAAR,EAA8B,OAA9B,EAAuC,QAAvC,EACgC,mBADhC,EACqD,YADrD,CADJ;AAGA,QAAI,gBAAgB,QAAQ,qBAAR,GAApB;AACA,QAAI,cAAc,QAAQ,oBAAR,EAA8B,OAA9B,EAAuC,aAAvC,CAAlB;AACC;AACD,QAAI,gBACA,QAAQ,cAAR,EAAwB,OAAxB,EAAiC,aAAjC,EAAgD,WAAhD,CADJ;AAEA,QAAI,cAAc,QAAQ,mBAAR,EAA6B,WAA7B,CAAlB;AACA,QAAI,kBAAkB,QAAQ,uBAAR,CAAtB;AACA,QAAI,qBAAqB,gBAAgB,mBAAzC;AACA,QAAI,WAAW,KAAK,QAApB;AACA,QAAI,WAAW,KAAK,QAApB;AACA,aAAS,OAAT,CAAiB,QAAjB,EAA2B;AACvB,YAAI,OAAO,QAAP,KAAoB,UAAxB,EAAoC;AAChC,kBAAM,IAAI,SAAJ,CAAc,oGAAd,CAAN;AACH;AACD,YAAI,KAAK,WAAL,KAAqB,OAAzB,EAAkC;AAC9B,kBAAM,IAAI,SAAJ,CAAc,kGAAd,CAAN;AACH;AACD,aAAK,SAAL,GAAiB,CAAjB;AACA,aAAK,oBAAL,GAA4B,SAA5B;AACA,aAAK,kBAAL,GAA0B,SAA1B;AACA,aAAK,iBAAL,GAAyB,SAAzB;AACA,aAAK,SAAL,GAAiB,SAAjB;AACA,aAAK,UAAL,GAAkB,SAAlB;AACA,aAAK,aAAL,GAAqB,SAArB;AACA,YAAI,aAAa,QAAjB,EAA2B,KAAK,oBAAL,CAA0B,QAA1B;AAC9B;;AAED,YAAQ,SAAR,CAAkB,QAAlB,GAA6B,YAAY;AACrC,eAAO,kBAAP;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,MAAlB,GAA2B,QAAQ,SAAR,CAAkB,OAAlB,IAA6B,UAAU,EAAV,EAAc;AAClE,YAAI,MAAM,UAAU,MAApB;AACA,YAAI,MAAM,CAAV,EAAa;AACT,gBAAI,iBAAiB,IAAI,KAAJ,CAAU,MAAM,CAAhB,CAArB;AAAA,gBACI,IAAI,CADR;AAAA,gBACW,CADX;AAEA,iBAAK,IAAI,CAAT,EAAY,IAAI,MAAM,CAAtB,EAAyB,EAAE,CAA3B,EAA8B;AAC1B,oBAAI,OAAO,UAAU,CAAV,CAAX;AACA,oBAAI,OAAO,IAAP,KAAgB,UAApB,EAAgC;AAC5B,mCAAe,GAAf,IAAsB,IAAtB;AACH,iBAFD,MAEO;AACH,2BAAO,QAAQ,MAAR,CACH,IAAI,SAAJ,CAAc,sHAAd,CADG,CAAP;AAEH;AACJ;AACD,2BAAe,MAAf,GAAwB,CAAxB;AACA,iBAAK,UAAU,CAAV,CAAL;AACA,gBAAI,cAAc,IAAI,WAAJ,CAAgB,cAAhB,EAAgC,EAAhC,EAAoC,IAApC,CAAlB;AACA,mBAAO,KAAK,KAAL,CAAW,SAAX,EAAsB,YAAY,QAAlC,EAA4C,SAA5C,EACH,WADG,EACU,SADV,CAAP;AAEH;AACD,eAAO,KAAK,KAAL,CAAW,SAAX,EAAsB,EAAtB,EAA0B,SAA1B,EAAqC,SAArC,EAAgD,SAAhD,CAAP;AACH,KArBD;;AAuBA,YAAQ,SAAR,CAAkB,OAAlB,GAA4B,YAAY;AACpC,eAAO,KAAK,KAAL,CAAW,OAAX,EAAoB,OAApB,EAA6B,SAA7B,EAAwC,IAAxC,EAA8C,SAA9C,CAAP;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,IAAlB,GAAyB,UAAU,UAAV,EAAsB,SAAtB,EAAiC,WAAjC,EAA8C;AACnE,YAAI,iBAAiB,UAAU,MAAV,GAAmB,CAApC,IACA,OAAO,UAAP,KAAsB,UADtB,IAEA,OAAO,SAAP,KAAqB,UAFzB,EAEqC;AACjC,gBAAI,MAAM,oDACF,KAAK,WAAL,CAAiB,UAAjB,CADR;AAEA,gBAAI,UAAU,MAAV,GAAmB,CAAvB,EAA0B;AACtB,uBAAO,OAAO,KAAK,WAAL,CAAiB,SAAjB,CAAd;AACH;AACD,iBAAK,KAAL,CAAW,GAAX;AACH;AACD,eAAO,KAAK,KAAL,CAAW,UAAX,EAAuB,SAAvB,EAAkC,WAAlC,EACH,SADG,EACQ,SADR,CAAP;AAEH,KAbD;;AAeA,YAAQ,SAAR,CAAkB,IAAlB,GAAyB,UAAU,UAAV,EAAsB,SAAtB,EAAiC,WAAjC,EAA8C;AACnE,YAAI,UAAU,KAAK,KAAL,CAAW,UAAX,EAAuB,SAAvB,EAAkC,WAAlC,EACV,SADU,EACC,SADD,CAAd;AAEA,gBAAQ,WAAR;AACH,KAJD;;AAMA,YAAQ,SAAR,CAAkB,MAAlB,GAA2B,UAAU,UAAV,EAAsB,SAAtB,EAAiC;AACxD,eAAO,KAAK,GAAL,GAAW,KAAX,CAAiB,UAAjB,EAA6B,SAA7B,EAAwC,SAAxC,EAAmD,KAAnD,EAA0D,SAA1D,CAAP;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,aAAlB,GAAkC,YAAY;AAC1C,eAAO,CAAC,KAAK,UAAL,EAAD,IACH,KAAK,YAAL,EADJ;AAEH,KAHD;;AAKA,YAAQ,SAAR,CAAkB,MAAlB,GAA2B,YAAY;AACnC,YAAI,MAAM;AACN,yBAAa,KADP;AAEN,wBAAY,KAFN;AAGN,8BAAkB,SAHZ;AAIN,6BAAiB;AAJX,SAAV;AAMA,YAAI,KAAK,WAAL,EAAJ,EAAwB;AACpB,gBAAI,gBAAJ,GAAuB,KAAK,KAAL,EAAvB;AACA,gBAAI,WAAJ,GAAkB,IAAlB;AACH,SAHD,MAGO,IAAI,KAAK,UAAL,EAAJ,EAAuB;AAC1B,gBAAI,eAAJ,GAAsB,KAAK,MAAL,EAAtB;AACA,gBAAI,UAAJ,GAAiB,IAAjB;AACH;AACD,eAAO,GAAP;AACH,KAfD;;AAiBA,YAAQ,SAAR,CAAkB,GAAlB,GAAwB,YAAY;AAChC,eAAO,IAAI,YAAJ,CAAiB,IAAjB,EAAuB,OAAvB,EAAP;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,KAAlB,GAA0B,UAAU,EAAV,EAAc;AACpC,eAAO,KAAK,MAAL,CAAY,KAAK,uBAAjB,EAA0C,EAA1C,CAAP;AACH,KAFD;;AAIA,YAAQ,EAAR,GAAa,UAAU,GAAV,EAAe;AACxB,eAAO,eAAe,OAAtB;AACH,KAFD;;AAIA,YAAQ,QAAR,GAAmB,UAAS,EAAT,EAAa;AAC5B,YAAI,MAAM,IAAI,OAAJ,CAAY,QAAZ,CAAV;AACA,YAAI,SAAS,SAAS,EAAT,EAAa,mBAAmB,GAAnB,CAAb,CAAb;AACA,YAAI,WAAW,QAAf,EAAyB;AACrB,gBAAI,eAAJ,CAAoB,OAAO,CAA3B,EAA8B,IAA9B,EAAoC,IAApC;AACH;AACD,eAAO,GAAP;AACH,KAPD;;AASA,YAAQ,GAAR,GAAc,UAAU,QAAV,EAAoB;AAC9B,eAAO,IAAI,YAAJ,CAAiB,QAAjB,EAA2B,OAA3B,EAAP;AACH,KAFD;;AAIA,YAAQ,KAAR,GAAgB,QAAQ,OAAR,GAAkB,YAAY;AAC1C,YAAI,UAAU,IAAI,OAAJ,CAAY,QAAZ,CAAd;AACA,eAAO,IAAI,eAAJ,CAAoB,OAApB,CAAP;AACH,KAHD;;AAKA,YAAQ,IAAR,GAAe,UAAU,GAAV,EAAe;AAC1B,YAAI,MAAM,oBAAoB,GAApB,CAAV;AACA,YAAI,EAAE,eAAe,OAAjB,CAAJ,EAA+B;AAC3B,gBAAI,MAAM,GAAV;AACA,kBAAM,IAAI,OAAJ,CAAY,QAAZ,CAAN;AACA,gBAAI,iBAAJ,CAAsB,GAAtB;AACH;AACD,eAAO,GAAP;AACH,KARD;;AAUA,YAAQ,OAAR,GAAkB,QAAQ,SAAR,GAAoB,QAAQ,IAA9C;;AAEA,YAAQ,MAAR,GAAiB,QAAQ,QAAR,GAAmB,UAAU,MAAV,EAAkB;AAClD,YAAI,MAAM,IAAI,OAAJ,CAAY,QAAZ,CAAV;AACA,YAAI,kBAAJ;AACA,YAAI,eAAJ,CAAoB,MAApB,EAA4B,IAA5B;AACA,eAAO,GAAP;AACH,KALD;;AAOA,YAAQ,YAAR,GAAuB,UAAS,EAAT,EAAa;AAChC,YAAI,OAAO,EAAP,KAAc,UAAlB,EAA8B,MAAM,IAAI,SAAJ,CAAc,qEAAd,CAAN;AAC9B,YAAI,OAAO,MAAM,SAAjB;AACA,cAAM,SAAN,GAAkB,EAAlB;AACA,eAAO,IAAP;AACH,KALD;;AAOA,YAAQ,SAAR,CAAkB,KAAlB,GAA0B,UACtB,UADsB,EAEtB,SAFsB,EAGtB,WAHsB,EAItB,QAJsB,EAKtB,YALsB,EAMxB;AACE,YAAI,mBAAmB,iBAAiB,SAAxC;AACA,YAAI,MAAM,mBAAmB,YAAnB,GAAkC,IAAI,OAAJ,CAAY,QAAZ,CAA5C;;AAEA,YAAI,CAAC,gBAAL,EAAuB;AACnB,gBAAI,cAAJ,CAAmB,IAAnB,EAAyB,IAAI,CAA7B;AACA,gBAAI,kBAAJ;AACH;;AAED,YAAI,SAAS,KAAK,OAAL,EAAb;AACA,YAAI,WAAW,IAAf,EAAqB;AACjB,gBAAI,aAAa,SAAjB,EAA4B,WAAW,KAAK,QAAhB;AAC5B,gBAAI,CAAC,gBAAL,EAAuB,IAAI,cAAJ;AAC1B;;AAED,YAAI,gBAAgB,OAAO,aAAP,CAAqB,UAArB,EACqB,SADrB,EAEqB,WAFrB,EAGqB,GAHrB,EAIqB,QAJrB,EAKqB,WALrB,CAApB;;AAOA,YAAI,OAAO,WAAP,MAAwB,CAAC,OAAO,uBAAP,EAA7B,EAA+D;AAC3D,kBAAM,MAAN,CACI,OAAO,8BADX,EAC2C,MAD3C,EACmD,aADnD;AAEH;;AAED,eAAO,GAAP;AACH,KAlCD;;AAoCA,YAAQ,SAAR,CAAkB,8BAAlB,GAAmD,UAAU,KAAV,EAAiB;AAChE,YAAI,KAAK,qBAAL,EAAJ,EAAkC,KAAK,0BAAL;AAClC,aAAK,gBAAL,CAAsB,KAAtB;AACH,KAHD;;AAKA,YAAQ,SAAR,CAAkB,OAAlB,GAA4B,YAAY;AACpC,eAAO,KAAK,SAAL,GAAiB,MAAxB;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,iCAAlB,GAAsD,YAAY;AAC9D,eAAO,CAAC,KAAK,SAAL,GAAiB,SAAlB,IAA+B,CAAtC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,YAAlB,GAAiC,YAAY;AACzC,eAAO,CAAC,KAAK,SAAL,GAAiB,SAAlB,MAAiC,SAAxC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,UAAlB,GAA+B,UAAU,GAAV,EAAe;AAC1C,aAAK,SAAL,GAAkB,KAAK,SAAL,GAAiB,CAAC,MAAnB,GACZ,MAAM,MADX;AAEH,KAHD;;AAKA,YAAQ,SAAR,CAAkB,aAAlB,GAAkC,YAAY;AAC1C,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,SAAlC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,YAAlB,GAAiC,YAAY;AACzC,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,SAAlC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,aAAlB,GAAkC,YAAY;AAC1C,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,SAAlC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,WAAlB,GAAgC,YAAY;AACxC,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,QAAlC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,QAAlB,GAA6B,YAAY;AACrC,eAAO,CAAC,KAAK,SAAL,GAAiB,QAAlB,IAA8B,CAArC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,YAAlB,GAAiC,YAAY;AACzC,eAAO,CAAC,KAAK,SAAL,GAAiB,QAAlB,IAA8B,CAArC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,eAAlB,GAAoC,YAAY;AAC5C,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,QAAlC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,iBAAlB,GAAsC,YAAY;AAC9C,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAkB,CAAC,QAApC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,cAAlB,GAAmC,YAAY;AAC3C,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,OAAlC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,gBAAlB,GAAqC,YAAY;AAC7C,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAkB,CAAC,OAApC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,WAAlB,GAAgC,YAAY;AACxC,eAAO,CAAC,KAAK,SAAL,GAAiB,OAAlB,IAA6B,CAApC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,WAAlB,GAAgC,UAAU,KAAV,EAAiB;AAC7C,YAAI,MAAM,UAAU,CAAV,GACJ,KAAK,UADD,GAEJ,KACE,QAAQ,CAAR,GAAY,CAAZ,GAAgB,CADlB,CAFN;AAIA,YAAI,QAAQ,iBAAZ,EAA+B;AAC3B,mBAAO,SAAP;AACH,SAFD,MAEO,IAAI,QAAQ,SAAR,IAAqB,KAAK,QAAL,EAAzB,EAA0C;AAC7C,mBAAO,KAAK,WAAL,EAAP;AACH;AACD,eAAO,GAAP;AACH,KAXD;;AAaA,YAAQ,SAAR,CAAkB,UAAlB,GAA+B,UAAU,KAAV,EAAiB;AAC5C,eAAO,UAAU,CAAV,GACD,KAAK,SADJ,GAED,KAAK,QAAQ,CAAR,GAAY,CAAZ,GAAgB,CAArB,CAFN;AAGH,KAJD;;AAMA,YAAQ,SAAR,CAAkB,qBAAlB,GAA0C,UAAU,KAAV,EAAiB;AACvD,eAAO,UAAU,CAAV,GACD,KAAK,oBADJ,GAED,KAAK,QAAQ,CAAR,GAAY,CAAZ,GAAgB,CAArB,CAFN;AAGH,KAJD;;AAMA,YAAQ,SAAR,CAAkB,mBAAlB,GAAwC,UAAU,KAAV,EAAiB;AACrD,eAAO,UAAU,CAAV,GACD,KAAK,kBADJ,GAED,KAAK,QAAQ,CAAR,GAAY,CAAZ,GAAgB,CAArB,CAFN;AAGH,KAJD;;AAMA,YAAQ,SAAR,CAAkB,WAAlB,GAAgC,YAAW;AACvC,YAAI,MAAM,KAAK,QAAf;AACA,YAAI,QAAQ,SAAZ,EAAuB;AACnB,gBAAI,eAAe,OAAnB,EAA4B;AACxB,oBAAI,IAAI,WAAJ,EAAJ,EAAuB;AACnB,2BAAO,IAAI,KAAJ,EAAP;AACH,iBAFD,MAEO;AACH,2BAAO,SAAP;AACH;AACJ;AACJ;AACD,eAAO,GAAP;AACH,KAZD;;AAcA,YAAQ,SAAR,CAAkB,iBAAlB,GAAsC,UAAU,QAAV,EAAoB,KAApB,EAA2B;AAC7D,YAAI,UAAU,SAAS,qBAAT,CAA+B,KAA/B,CAAd;AACA,YAAI,SAAS,SAAS,mBAAT,CAA6B,KAA7B,CAAb;AACA,YAAI,WAAW,SAAS,kBAAT,CAA4B,KAA5B,CAAf;AACA,YAAI,UAAU,SAAS,UAAT,CAAoB,KAApB,CAAd;AACA,YAAI,WAAW,SAAS,WAAT,CAAqB,KAArB,CAAf;AACA,YAAI,mBAAmB,OAAvB,EAAgC,QAAQ,cAAR;AAChC,YAAI,aAAa,SAAjB,EAA4B,WAAW,iBAAX;AAC5B,aAAK,aAAL,CAAmB,OAAnB,EAA4B,MAA5B,EAAoC,QAApC,EAA8C,OAA9C,EAAuD,QAAvD,EAAiE,IAAjE;AACH,KATD;;AAWA,YAAQ,SAAR,CAAkB,aAAlB,GAAkC,UAC9B,OAD8B,EAE9B,MAF8B,EAG9B,QAH8B,EAI9B,OAJ8B,EAK9B,QAL8B,EAM9B,MAN8B,EAOhC;AACE,YAAI,QAAQ,KAAK,OAAL,EAAZ;;AAEA,YAAI,SAAS,SAAS,CAAtB,EAAyB;AACrB,oBAAQ,CAAR;AACA,iBAAK,UAAL,CAAgB,CAAhB;AACH;;AAED,YAAI,UAAU,CAAd,EAAiB;AACb,iBAAK,SAAL,GAAiB,OAAjB;AACA,gBAAI,aAAa,SAAjB,EAA4B,KAAK,UAAL,GAAkB,QAAlB;AAC5B,gBAAI,OAAO,OAAP,KAAmB,UAAnB,IAAiC,CAAC,KAAK,qBAAL,EAAtC,EAAoE;AAChE,qBAAK,oBAAL,GACI,WAAW,IAAX,GAAkB,OAAlB,GAA4B,OAAO,IAAP,CAAY,OAAZ,CADhC;AAEH;AACD,gBAAI,OAAO,MAAP,KAAkB,UAAtB,EAAkC;AAC9B,qBAAK,kBAAL,GACI,WAAW,IAAX,GAAkB,MAAlB,GAA2B,OAAO,IAAP,CAAY,MAAZ,CAD/B;AAEH;AACD,gBAAI,OAAO,QAAP,KAAoB,UAAxB,EAAoC;AAChC,qBAAK,iBAAL,GACI,WAAW,IAAX,GAAkB,QAAlB,GAA6B,OAAO,IAAP,CAAY,QAAZ,CADjC;AAEH;AACJ,SAfD,MAeO;AACH,gBAAI,OAAO,QAAQ,CAAR,GAAY,CAAvB;AACA,iBAAK,OAAO,CAAZ,IAAiB,OAAjB;AACA,iBAAK,OAAO,CAAZ,IAAiB,QAAjB;AACA,gBAAI,OAAO,OAAP,KAAmB,UAAvB,EAAmC;AAC/B,qBAAK,OAAO,CAAZ,IACI,WAAW,IAAX,GAAkB,OAAlB,GAA4B,OAAO,IAAP,CAAY,OAAZ,CADhC;AAEH;AACD,gBAAI,OAAO,MAAP,KAAkB,UAAtB,EAAkC;AAC9B,qBAAK,OAAO,CAAZ,IACI,WAAW,IAAX,GAAkB,MAAlB,GAA2B,OAAO,IAAP,CAAY,MAAZ,CAD/B;AAEH;AACD,gBAAI,OAAO,QAAP,KAAoB,UAAxB,EAAoC;AAChC,qBAAK,OAAO,CAAZ,IACI,WAAW,IAAX,GAAkB,QAAlB,GAA6B,OAAO,IAAP,CAAY,QAAZ,CADjC;AAEH;AACJ;AACD,aAAK,UAAL,CAAgB,QAAQ,CAAxB;AACA,eAAO,KAAP;AACH,KAjDD;;AAmDA,YAAQ,SAAR,CAAkB,iBAAlB,GAAsC,UAAU,QAAV,EAAoB,gBAApB,EAAsC;AACxE,YAAI,QAAQ,KAAK,OAAL,EAAZ;;AAEA,YAAI,SAAS,SAAS,CAAtB,EAAyB;AACrB,oBAAQ,CAAR;AACA,iBAAK,UAAL,CAAgB,CAAhB;AACH;AACD,YAAI,UAAU,CAAd,EAAiB;AACb,iBAAK,SAAL,GAAiB,gBAAjB;AACA,iBAAK,UAAL,GAAkB,QAAlB;AACH,SAHD,MAGO;AACH,gBAAI,OAAO,QAAQ,CAAR,GAAY,CAAvB;AACA,iBAAK,OAAO,CAAZ,IAAiB,gBAAjB;AACA,iBAAK,OAAO,CAAZ,IAAiB,QAAjB;AACH;AACD,aAAK,UAAL,CAAgB,QAAQ,CAAxB;AACH,KAhBD;;AAkBA,YAAQ,SAAR,CAAkB,kBAAlB,GAAuC,UAAU,YAAV,EAAwB,KAAxB,EAA+B;AAClE,aAAK,iBAAL,CAAuB,YAAvB,EAAqC,KAArC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,gBAAlB,GAAqC,UAAS,KAAT,EAAgB,UAAhB,EAA4B;AAC7D,YAAI,KAAK,iCAAL,EAAJ,EAA8C;AAC9C,YAAI,UAAU,IAAd,EACI,OAAO,KAAK,eAAL,CAAqB,yBAArB,EAAgD,KAAhD,EAAuD,IAAvD,CAAP;AACJ,YAAI,eAAe,oBAAoB,KAApB,EAA2B,IAA3B,CAAnB;AACA,YAAI,EAAE,wBAAwB,OAA1B,CAAJ,EAAwC,OAAO,KAAK,QAAL,CAAc,KAAd,CAAP;;AAExC,YAAI,mBAAmB,KAAK,aAAa,CAAb,GAAiB,CAAtB,CAAvB;AACA,aAAK,cAAL,CAAoB,YAApB,EAAkC,gBAAlC;AACA,YAAI,UAAU,aAAa,OAAb,EAAd;AACA,YAAI,QAAQ,UAAR,EAAJ,EAA0B;AACtB,gBAAI,MAAM,KAAK,OAAL,EAAV;AACA,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,GAApB,EAAyB,EAAE,CAA3B,EAA8B;AAC1B,wBAAQ,iBAAR,CAA0B,IAA1B,EAAgC,CAAhC;AACH;AACD,iBAAK,aAAL;AACA,iBAAK,UAAL,CAAgB,CAAhB;AACA,iBAAK,YAAL,CAAkB,OAAlB;AACH,SARD,MAQO,IAAI,QAAQ,YAAR,EAAJ,EAA4B;AAC/B,iBAAK,iBAAL,CAAuB,QAAQ,MAAR,EAAvB;AACH,SAFM,MAEA;AACH,iBAAK,gBAAL,CAAsB,QAAQ,OAAR,EAAtB,EACI,QAAQ,qBAAR,EADJ;AAEH;AACJ,KAxBD;;AA0BA,YAAQ,SAAR,CAAkB,eAAlB,GACA,UAAS,MAAT,EAAiB,WAAjB,EAA8B,qCAA9B,EAAqE;AACjE,YAAI,CAAC,qCAAL,EAA4C;AACxC,iBAAK,8BAAL,CAAoC,MAApC;AACH;AACD,YAAI,QAAQ,KAAK,iBAAL,CAAuB,MAAvB,CAAZ;AACA,YAAI,WAAW,UAAU,MAAzB;AACA,aAAK,iBAAL,CAAuB,KAAvB,EAA8B,cAAc,QAAd,GAAyB,KAAvD;AACA,aAAK,OAAL,CAAa,MAAb,EAAqB,WAAW,SAAX,GAAuB,KAA5C;AACH,KATD;;AAWA,YAAQ,SAAR,CAAkB,oBAAlB,GAAyC,UAAU,QAAV,EAAoB;AACzD,YAAI,UAAU,IAAd;AACA,aAAK,kBAAL;AACA,aAAK,YAAL;AACA,YAAI,cAAc,IAAlB;AACA,YAAI,IAAI,SAAS,QAAT,EAAmB,UAAS,KAAT,EAAgB;AACvC,gBAAI,YAAY,IAAhB,EAAsB;AACtB,oBAAQ,gBAAR,CAAyB,KAAzB;AACA,sBAAU,IAAV;AACH,SAJO,EAIL,UAAU,MAAV,EAAkB;AACjB,gBAAI,YAAY,IAAhB,EAAsB;AACtB,oBAAQ,eAAR,CAAwB,MAAxB,EAAgC,WAAhC;AACA,sBAAU,IAAV;AACH,SARO,CAAR;AASA,sBAAc,KAAd;AACA,aAAK,WAAL;;AAEA,YAAI,MAAM,SAAN,IAAmB,MAAM,QAAzB,IAAqC,YAAY,IAArD,EAA2D;AACvD,oBAAQ,eAAR,CAAwB,EAAE,CAA1B,EAA6B,IAA7B,EAAmC,IAAnC;AACA,sBAAU,IAAV;AACH;AACJ,KArBD;;AAuBA,YAAQ,SAAR,CAAkB,yBAAlB,GAA8C,UAC1C,OAD0C,EACjC,QADiC,EACvB,KADuB,EAChB,OADgB,EAE5C;AACE,YAAI,QAAQ,WAAR,EAAJ,EAA2B;AAC3B,gBAAQ,YAAR;AACA,YAAI,CAAJ;AACA,YAAI,aAAa,KAAb,IAAsB,CAAC,KAAK,WAAL,EAA3B,EAA+C;AAC3C,gBAAI,SAAS,OAAT,EAAkB,KAAlB,CAAwB,KAAK,WAAL,EAAxB,EAA4C,KAA5C,CAAJ;AACH,SAFD,MAEO;AACH,gBAAI,SAAS,OAAT,EAAkB,IAAlB,CAAuB,QAAvB,EAAiC,KAAjC,CAAJ;AACH;AACD,gBAAQ,WAAR;;AAEA,YAAI,MAAM,QAAN,IAAkB,MAAM,OAAxB,IAAmC,MAAM,WAA7C,EAA0D;AACtD,gBAAI,MAAM,MAAM,OAAN,GAAgB,yBAAhB,GAA4C,EAAE,CAAxD;AACA,oBAAQ,eAAR,CAAwB,GAAxB,EAA6B,KAA7B,EAAoC,IAApC;AACH,SAHD,MAGO;AACH,oBAAQ,gBAAR,CAAyB,CAAzB;AACH;AACJ,KAnBD;;AAqBA,YAAQ,SAAR,CAAkB,OAAlB,GAA4B,YAAW;AACnC,YAAI,MAAM,IAAV;AACA,eAAO,IAAI,YAAJ,EAAP,EAA2B,MAAM,IAAI,SAAJ,EAAN;AAC3B,eAAO,GAAP;AACH,KAJD;;AAMA,YAAQ,SAAR,CAAkB,SAAlB,GAA8B,YAAW;AACrC,eAAO,KAAK,kBAAZ;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,YAAlB,GAAiC,UAAS,OAAT,EAAkB;AAC/C,aAAK,kBAAL,GAA0B,OAA1B;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,YAAlB,GAAiC,YAAY;AACzC,YAAI,KAAK,YAAL,EAAJ,EAAyB;AACrB,iBAAK,mBAAL,GAA2B,SAA3B;AACH;AACJ,KAJD;;AAMA,YAAQ,SAAR,CAAkB,cAAlB,GAAmC,UAAU,MAAV,EAAkB,KAAlB,EAAyB;AACxD,YAAI,CAAC,QAAQ,CAAT,IAAc,CAAd,IAAmB,OAAO,YAAP,EAAvB,EAA8C;AAC1C,iBAAK,eAAL;AACA,iBAAK,mBAAL,GAA2B,MAA3B;AACH;AACD,YAAI,CAAC,QAAQ,CAAT,IAAc,CAAd,IAAmB,OAAO,QAAP,EAAvB,EAA0C;AACtC,iBAAK,WAAL,CAAiB,OAAO,QAAxB;AACH;AACJ,KARD;;AAUA,YAAQ,SAAR,CAAkB,QAAlB,GAA6B,UAAU,KAAV,EAAiB;AAC1C,YAAI,KAAK,iCAAL,EAAJ,EAA8C;AAC9C,aAAK,iBAAL,CAAuB,KAAvB;AACH,KAHD;;AAKA,YAAQ,SAAR,CAAkB,OAAlB,GAA4B,UAAU,MAAV,EAAkB,iBAAlB,EAAqC;AAC7D,YAAI,KAAK,iCAAL,EAAJ,EAA8C;AAC9C,aAAK,gBAAL,CAAsB,MAAtB,EAA8B,iBAA9B;AACH,KAHD;;AAKA,YAAQ,SAAR,CAAkB,gBAAlB,GAAqC,UAAU,KAAV,EAAiB;AAClD,YAAI,UAAU,KAAK,UAAL,CAAgB,KAAhB,CAAd;AACA,YAAI,YAAY,mBAAmB,OAAnC;;AAEA,YAAI,aAAa,QAAQ,WAAR,EAAjB,EAAwC;AACpC,oBAAQ,gBAAR;AACA,mBAAO,MAAM,MAAN,CAAa,KAAK,gBAAlB,EAAoC,IAApC,EAA0C,KAA1C,CAAP;AACH;AACD,YAAI,UAAU,KAAK,YAAL,KACR,KAAK,qBAAL,CAA2B,KAA3B,CADQ,GAER,KAAK,mBAAL,CAAyB,KAAzB,CAFN;;AAIA,YAAI,oBACA,KAAK,qBAAL,KAA+B,KAAK,qBAAL,EAA/B,GAA8D,SADlE;AAEA,YAAI,QAAQ,KAAK,aAAjB;AACA,YAAI,WAAW,KAAK,WAAL,CAAiB,KAAjB,CAAf;AACA,aAAK,yBAAL,CAA+B,KAA/B;;AAEA,YAAI,OAAO,OAAP,KAAmB,UAAvB,EAAmC;AAC/B,gBAAI,CAAC,SAAL,EAAgB;AACZ,wBAAQ,IAAR,CAAa,QAAb,EAAuB,KAAvB,EAA8B,OAA9B;AACH,aAFD,MAEO;AACH,qBAAK,yBAAL,CAA+B,OAA/B,EAAwC,QAAxC,EAAkD,KAAlD,EAAyD,OAAzD;AACH;AACJ,SAND,MAMO,IAAI,oBAAoB,YAAxB,EAAsC;AACzC,gBAAI,CAAC,SAAS,WAAT,EAAL,EAA6B;AACzB,oBAAI,KAAK,YAAL,EAAJ,EAAyB;AACrB,6BAAS,iBAAT,CAA2B,KAA3B,EAAkC,OAAlC;AACH,iBAFD,MAGK;AACD,6BAAS,gBAAT,CAA0B,KAA1B,EAAiC,OAAjC;AACH;AACJ;AACJ,SATM,MASA,IAAI,SAAJ,EAAe;AAClB,gBAAI,KAAK,YAAL,EAAJ,EAAyB;AACrB,wBAAQ,QAAR,CAAiB,KAAjB;AACH,aAFD,MAEO;AACH,wBAAQ,OAAR,CAAgB,KAAhB,EAAuB,iBAAvB;AACH;AACJ;;AAED,YAAI,SAAS,CAAT,IAAc,CAAC,QAAQ,EAAT,MAAiB,CAAnC,EACI,MAAM,WAAN,CAAkB,KAAK,UAAvB,EAAmC,IAAnC,EAAyC,CAAzC;AACP,KA3CD;;AA6CA,YAAQ,SAAR,CAAkB,yBAAlB,GAA8C,UAAS,KAAT,EAAgB;AAC1D,YAAI,UAAU,CAAd,EAAiB;AACb,gBAAI,CAAC,KAAK,qBAAL,EAAL,EAAmC;AAC/B,qBAAK,oBAAL,GAA4B,SAA5B;AACH;AACD,iBAAK,kBAAL,GACA,KAAK,iBAAL,GACA,KAAK,UAAL,GACA,KAAK,SAAL,GAAiB,SAHjB;AAIH,SARD,MAQO;AACH,gBAAI,OAAO,QAAQ,CAAR,GAAY,CAAvB;AACA,iBAAK,OAAO,CAAZ,IACA,KAAK,OAAO,CAAZ,IACA,KAAK,OAAO,CAAZ,IACA,KAAK,OAAO,CAAZ,IACA,KAAK,OAAO,CAAZ,IAAiB,SAJjB;AAKH;AACJ,KAjBD;;AAmBA,YAAQ,SAAR,CAAkB,uBAAlB,GAA4C,YAAY;AACpD,eAAO,CAAC,KAAK,SAAL,GACA,CAAC,UADF,MACkB,CAAC,UAD1B;AAEH,KAHD;;AAKA,YAAQ,SAAR,CAAkB,wBAAlB,GAA6C,YAAY;AACrD,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAiB,CAAC,UAAnC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,0BAAlB,GAA+C,YAAY;AACvD,aAAK,SAAL,GAAiB,KAAK,SAAL,GAAkB,CAAC,CAAC,UAArC;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,oBAAlB,GAAyC,YAAW;AAChD,cAAM,cAAN,CAAqB,IAArB;AACA,aAAK,wBAAL;AACH,KAHD;;AAKA,YAAQ,SAAR,CAAkB,iBAAlB,GAAsC,UAAU,KAAV,EAAiB;AACnD,YAAI,UAAU,IAAd,EAAoB;AAChB,gBAAI,MAAM,yBAAV;AACA,iBAAK,iBAAL,CAAuB,GAAvB;AACA,mBAAO,KAAK,gBAAL,CAAsB,GAAtB,EAA2B,SAA3B,CAAP;AACH;AACD,aAAK,aAAL;AACA,aAAK,aAAL,GAAqB,KAArB;AACA,aAAK,YAAL;;AAEA,YAAI,KAAK,OAAL,KAAiB,CAArB,EAAwB;AACpB,iBAAK,oBAAL;AACH;AACJ,KAbD;;AAeA,YAAQ,SAAR,CAAkB,0BAAlB,GAA+C,UAAU,MAAV,EAAkB;AAC7D,YAAI,QAAQ,KAAK,iBAAL,CAAuB,MAAvB,CAAZ;AACA,aAAK,gBAAL,CAAsB,MAAtB,EAA8B,UAAU,MAAV,GAAmB,SAAnB,GAA+B,KAA7D;AACH,KAHD;;AAKA,YAAQ,SAAR,CAAkB,gBAAlB,GAAqC,UAAU,MAAV,EAAkB,KAAlB,EAAyB;AAC1D,YAAI,WAAW,IAAf,EAAqB;AACjB,gBAAI,MAAM,yBAAV;AACA,iBAAK,iBAAL,CAAuB,GAAvB;AACA,mBAAO,KAAK,gBAAL,CAAsB,GAAtB,CAAP;AACH;AACD,aAAK,YAAL;AACA,aAAK,aAAL,GAAqB,MAArB;AACA,aAAK,YAAL;;AAEA,YAAI,KAAK,QAAL,EAAJ,EAAqB;AACjB,kBAAM,UAAN,CAAiB,UAAS,CAAT,EAAY;AACzB,oBAAI,WAAW,CAAf,EAAkB;AACd,0BAAM,WAAN,CACI,cAAc,kBADlB,EACsC,SADtC,EACiD,CADjD;AAEH;AACD,sBAAM,CAAN;AACH,aAND,EAMG,UAAU,SAAV,GAAsB,MAAtB,GAA+B,KANlC;AAOA;AACH;;AAED,YAAI,UAAU,SAAV,IAAuB,UAAU,MAArC,EAA6C;AACzC,iBAAK,qBAAL,CAA2B,KAA3B;AACH;;AAED,YAAI,KAAK,OAAL,KAAiB,CAArB,EAAwB;AACpB,iBAAK,oBAAL;AACH,SAFD,MAEO;AACH,iBAAK,+BAAL;AACH;AACJ,KA9BD;;AAgCA,YAAQ,SAAR,CAAkB,eAAlB,GAAoC,YAAY;AAC5C,aAAK,0BAAL;AACA,YAAI,MAAM,KAAK,OAAL,EAAV;AACA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,GAApB,EAAyB,GAAzB,EAA8B;AAC1B,iBAAK,gBAAL,CAAsB,CAAtB;AACH;AACJ,KAND;;AAQA,SAAK,iBAAL,CAAuB,OAAvB,EACuB,0BADvB,EAEuB,uBAFvB;;AAIA,YAAQ,eAAR,EAAyB,OAAzB,EAAkC,YAAlC;AACA,YAAQ,aAAR,EAAuB,OAAvB,EAAgC,QAAhC,EAA0C,mBAA1C,EAA+D,YAA/D;AACA,YAAQ,WAAR,EAAqB,OAArB,EAA8B,QAA9B,EAAwC,mBAAxC;AACA,YAAQ,cAAR,EAAwB,OAAxB,EAAiC,WAAjC,EAA8C,mBAA9C;AACA,YAAQ,qBAAR,EAA+B,OAA/B;AACA,YAAQ,6BAAR,EAAuC,OAAvC;AACA,YAAQ,WAAR,EAAqB,OAArB,EAA8B,YAA9B,EAA4C,mBAA5C,EAAiE,QAAjE;AACA,YAAQ,OAAR,GAAkB,OAAlB;AACA,YAAQ,UAAR,EAAoB,OAApB,EAA6B,YAA7B,EAA2C,YAA3C,EAAyD,mBAAzD,EAA8E,QAA9E;AACA,YAAQ,aAAR,EAAuB,OAAvB;AACA,YAAQ,YAAR,EAAsB,OAAtB,EAA+B,YAA/B,EAA6C,mBAA7C,EAAkE,aAAlE;AACA,YAAQ,iBAAR,EAA2B,OAA3B,EAAoC,YAApC,EAAkD,QAAlD,EAA4D,mBAA5D;AACA,YAAQ,cAAR,EAAwB,OAAxB;AACA,YAAQ,eAAR,EAAyB,OAAzB;AACA,YAAQ,YAAR,EAAsB,OAAtB,EAA+B,YAA/B,EAA6C,mBAA7C,EAAkE,YAAlE;AACA,YAAQ,WAAR,EAAqB,OAArB,EAA8B,QAA9B,EAAwC,mBAAxC,EAA6D,YAA7D;AACA,YAAQ,aAAR,EAAuB,OAAvB,EAAgC,YAAhC,EAA8C,YAA9C,EAA4D,mBAA5D,EAAiF,QAAjF;AACA,YAAQ,aAAR,EAAuB,OAAvB,EAAgC,YAAhC;AACA,YAAQ,WAAR,EAAqB,OAArB,EAA8B,YAA9B,EAA4C,YAA5C;AACA,YAAQ,gBAAR,EAA0B,OAA1B,EAAmC,QAAnC;AACA,YAAQ,UAAR,EAAoB,OAApB;AACA,YAAQ,WAAR,EAAqB,OAArB,EAA8B,QAA9B;AACA,YAAQ,aAAR,EAAuB,OAAvB,EAAgC,QAAhC;AACA,YAAQ,aAAR,EAAuB,OAAvB,EAAgC,QAAhC;;AAEI,SAAK,gBAAL,CAAsB,OAAtB;AACA,SAAK,gBAAL,CAAsB,QAAQ,SAA9B;AACA,aAAS,SAAT,CAAmB,KAAnB,EAA0B;AACtB,YAAI,IAAI,IAAI,OAAJ,CAAY,QAAZ,CAAR;AACA,UAAE,oBAAF,GAAyB,KAAzB;AACA,UAAE,kBAAF,GAAuB,KAAvB;AACA,UAAE,iBAAF,GAAsB,KAAtB;AACA,UAAE,SAAF,GAAc,KAAd;AACA,UAAE,UAAF,GAAe,KAAf;AACA,UAAE,aAAF,GAAkB,KAAlB;AACH;AACD;AACA;AACA,cAAU,EAAC,GAAG,CAAJ,EAAV;AACA,cAAU,EAAC,GAAG,CAAJ,EAAV;AACA,cAAU,EAAC,GAAG,CAAJ,EAAV;AACA,cAAU,CAAV;AACA,cAAU,YAAU,CAAE,CAAtB;AACA,cAAU,SAAV;AACA,cAAU,KAAV;AACA,cAAU,IAAI,OAAJ,CAAY,QAAZ,CAAV;AACA,kBAAc,SAAd,CAAwB,MAAM,cAA9B,EAA8C,KAAK,aAAnD;AACA,WAAO,OAAP;AAEH,CAhvBD","file":"promise-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/LhFpo0\\u000a\");\n};\nvar reflect = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\n\nvar util = require(\"./util.js\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar UNDEFINED_BINDING = {};\nvar async = require(\"./async.js\");\nvar errors = require(\"./errors.js\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nPromise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {e: null};\nvar tryConvertToPromise = require(\"./thenables.js\")(Promise, INTERNAL);\nvar PromiseArray =\n    require(\"./promise_array.js\")(Promise, INTERNAL,\n                                    tryConvertToPromise, apiRejection);\nvar CapturedTrace = require(\"./captured_trace.js\")();\nvar isDebugging = require(\"./debuggability.js\")(Promise, CapturedTrace);\n /*jshint unused:false*/\nvar createContext =\n    require(\"./context.js\")(Promise, CapturedTrace, isDebugging);\nvar CatchFilter = require(\"./catch_filter.js\")(NEXT_FILTER);\nvar PromiseResolver = require(\"./promise_resolver.js\");\nvar nodebackForPromise = PromiseResolver._nodebackForPromise;\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction Promise(resolver) {\n    if (typeof resolver !== \"function\") {\n        throw new TypeError(\"the promise constructor requires a resolver function\\u000a\\u000a    See http://goo.gl/EC22Yn\\u000a\");\n    }\n    if (this.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/KsIlge\\u000a\");\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._progressHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settledValue = undefined;\n    if (resolver !== INTERNAL) this._resolveFromResolver(resolver);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (typeof item === \"function\") {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(\n                    new TypeError(\"Catch filter must inherit from Error or be a simple predicate function\\u000a\\u000a    See http://goo.gl/o84o68\\u000a\"));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        var catchFilter = new CatchFilter(catchInstances, fn, this);\n        return this._then(undefined, catchFilter.doFilter, undefined,\n            catchFilter, undefined);\n    }\n    return this._then(undefined, fn, undefined, undefined, undefined);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflect, reflect, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject, didProgress) {\n    if (isDebugging() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, didProgress,\n        undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject, didProgress) {\n    var promise = this._then(didFulfill, didReject, didProgress,\n        undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (didFulfill, didReject) {\n    return this.all()._then(didFulfill, didReject, undefined, APPLY, undefined);\n};\n\nPromise.prototype.isCancellable = function () {\n    return !this.isResolved() &&\n        this._cancellable();\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = function(fn) {\n    var ret = new Promise(INTERNAL);\n    var result = tryCatch(fn)(nodebackForPromise(ret));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true, true);\n    }\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.defer = Promise.pending = function () {\n    var promise = new Promise(INTERNAL);\n    return new PromiseResolver(promise);\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        var val = ret;\n        ret = new Promise(INTERNAL);\n        ret._fulfillUnchecked(val);\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") throw new TypeError(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    var prev = async._schedule;\n    async._schedule = fn;\n    return prev;\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    didProgress,\n    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var ret = haveInternalData ? internalData : new Promise(INTERNAL);\n\n    if (!haveInternalData) {\n        ret._propagateFrom(this, 4 | 1);\n        ret._captureStackTrace();\n    }\n\n    var target = this._target();\n    if (target !== this) {\n        if (receiver === undefined) receiver = this._boundTo;\n        if (!haveInternalData) ret._setIsMigrated();\n    }\n\n    var callbackIndex = target._addCallbacks(didFulfill,\n                                             didReject,\n                                             didProgress,\n                                             ret,\n                                             receiver,\n                                             getDomain());\n\n    if (target._isResolved() && !target._isSettlePromisesQueued()) {\n        async.invoke(\n            target._settlePromiseAtPostResolution, target, callbackIndex);\n    }\n\n    return ret;\n};\n\nPromise.prototype._settlePromiseAtPostResolution = function (index) {\n    if (this._isRejectionUnhandled()) this._unsetRejectionIsUnhandled();\n    this._settlePromiseAt(index);\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 131071;\n};\n\nPromise.prototype._isFollowingOrFulfilledOrRejected = function () {\n    return (this._bitField & 939524096) > 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 536870912) === 536870912;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -131072) |\n        (len & 131071);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 536870912;\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 33554432;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 33554432) > 0;\n};\n\nPromise.prototype._cancellable = function () {\n    return (this._bitField & 67108864) > 0;\n};\n\nPromise.prototype._setCancellable = function () {\n    this._bitField = this._bitField | 67108864;\n};\n\nPromise.prototype._unsetCancellable = function () {\n    this._bitField = this._bitField & (~67108864);\n};\n\nPromise.prototype._setIsMigrated = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._unsetIsMigrated = function () {\n    this._bitField = this._bitField & (~4194304);\n};\n\nPromise.prototype._isMigrated = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0\n        ? this._receiver0\n        : this[\n            index * 5 - 5 + 4];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return index === 0\n        ? this._promise0\n        : this[index * 5 - 5 + 3];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return index === 0\n        ? this._fulfillmentHandler0\n        : this[index * 5 - 5 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return index === 0\n        ? this._rejectionHandler0\n        : this[index * 5 - 5 + 1];\n};\n\nPromise.prototype._boundValue = function() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n};\n\nPromise.prototype._migrateCallbacks = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var progress = follower._progressHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (promise instanceof Promise) promise._setIsMigrated();\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, progress, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    progress,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 131071 - 5) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        if (receiver !== undefined) this._receiver0 = receiver;\n        if (typeof fulfill === \"function\" && !this._isCarryingStackTrace()) {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : domain.bind(fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : domain.bind(reject);\n        }\n        if (typeof progress === \"function\") {\n            this._progressHandler0 =\n                domain === null ? progress : domain.bind(progress);\n        }\n    } else {\n        var base = index * 5 - 5;\n        this[base + 3] = promise;\n        this[base + 4] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : domain.bind(fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : domain.bind(reject);\n        }\n        if (typeof progress === \"function\") {\n            this[base + 2] =\n                domain === null ? progress : domain.bind(progress);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._setProxyHandlers = function (receiver, promiseSlotValue) {\n    var index = this._length();\n\n    if (index >= 131071 - 5) {\n        index = 0;\n        this._setLength(0);\n    }\n    if (index === 0) {\n        this._promise0 = promiseSlotValue;\n        this._receiver0 = receiver;\n    } else {\n        var base = index * 5 - 5;\n        this[base + 3] = promiseSlotValue;\n        this[base + 4] = receiver;\n    }\n    this._setLength(index + 1);\n};\n\nPromise.prototype._proxyPromiseArray = function (promiseArray, index) {\n    this._setProxyHandlers(promiseArray, index);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false, true);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    var propagationFlags = 1 | (shouldBind ? 4 : 0);\n    this._propagateFrom(maybePromise, propagationFlags);\n    var promise = maybePromise._target();\n    if (promise._isPending()) {\n        var len = this._length();\n        for (var i = 0; i < len; ++i) {\n            promise._migrateCallbacks(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (promise._isFulfilled()) {\n        this._fulfillUnchecked(promise._value());\n    } else {\n        this._rejectUnchecked(promise._reason(),\n            promise._getCarriedStackTrace());\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, shouldNotMarkOriginatingFromRejection) {\n    if (!shouldNotMarkOriginatingFromRejection) {\n        util.markAsOriginatingFromRejection(reason);\n    }\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason, hasStack ? undefined : trace);\n};\n\nPromise.prototype._resolveFromResolver = function (resolver) {\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = tryCatch(resolver)(function(value) {\n        if (promise === null) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }, function (reason) {\n        if (promise === null) return;\n        promise._rejectCallback(reason, synchronous);\n        promise = null;\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined && r === errorObj && promise !== null) {\n        promise._rejectCallback(r.e, true, true);\n        promise = null;\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    if (promise._isRejected()) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY && !this._isRejected()) {\n        x = tryCatch(handler).apply(this._boundValue(), value);\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    promise._popContext();\n\n    if (x === errorObj || x === promise || x === NEXT_FILTER) {\n        var err = x === promise ? makeSelfResolutionError() : x.e;\n        promise._rejectCallback(err, false, true);\n    } else {\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._cleanValues = function () {\n    if (this._cancellable()) {\n        this._cancellationParent = undefined;\n    }\n};\n\nPromise.prototype._propagateFrom = function (parent, flags) {\n    if ((flags & 1) > 0 && parent._cancellable()) {\n        this._setCancellable();\n        this._cancellationParent = parent;\n    }\n    if ((flags & 4) > 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n};\n\nPromise.prototype._fulfill = function (value) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    this._fulfillUnchecked(value);\n};\n\nPromise.prototype._reject = function (reason, carriedStackTrace) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    this._rejectUnchecked(reason, carriedStackTrace);\n};\n\nPromise.prototype._settlePromiseAt = function (index) {\n    var promise = this._promiseAt(index);\n    var isPromise = promise instanceof Promise;\n\n    if (isPromise && promise._isMigrated()) {\n        promise._unsetIsMigrated();\n        return async.invoke(this._settlePromiseAt, this, index);\n    }\n    var handler = this._isFulfilled()\n        ? this._fulfillmentHandlerAt(index)\n        : this._rejectionHandlerAt(index);\n\n    var carriedStackTrace =\n        this._isCarryingStackTrace() ? this._getCarriedStackTrace() : undefined;\n    var value = this._settledValue;\n    var receiver = this._receiverAt(index);\n    this._clearCallbackDataAtIndex(index);\n\n    if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof PromiseArray) {\n        if (!receiver._isResolved()) {\n            if (this._isFulfilled()) {\n                receiver._promiseFulfilled(value, promise);\n            }\n            else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (this._isFulfilled()) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value, carriedStackTrace);\n        }\n    }\n\n    if (index >= 4 && (index & 31) === 4)\n        async.invokeLater(this._setLength, this, 0);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    if (index === 0) {\n        if (!this._isCarryingStackTrace()) {\n            this._fulfillmentHandler0 = undefined;\n        }\n        this._rejectionHandler0 =\n        this._progressHandler0 =\n        this._receiver0 =\n        this._promise0 = undefined;\n    } else {\n        var base = index * 5 - 5;\n        this[base + 3] =\n        this[base + 4] =\n        this[base + 0] =\n        this[base + 1] =\n        this[base + 2] = undefined;\n    }\n};\n\nPromise.prototype._isSettlePromisesQueued = function () {\n    return (this._bitField &\n            -1073741824) === -1073741824;\n};\n\nPromise.prototype._setSettlePromisesQueued = function () {\n    this._bitField = this._bitField | -1073741824;\n};\n\nPromise.prototype._unsetSettlePromisesQueued = function () {\n    this._bitField = this._bitField & (~-1073741824);\n};\n\nPromise.prototype._queueSettlePromises = function() {\n    async.settlePromises(this);\n    this._setSettlePromisesQueued();\n};\n\nPromise.prototype._fulfillUnchecked = function (value) {\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._rejectUnchecked(err, undefined);\n    }\n    this._setFulfilled();\n    this._settledValue = value;\n    this._cleanValues();\n\n    if (this._length() > 0) {\n        this._queueSettlePromises();\n    }\n};\n\nPromise.prototype._rejectUncheckedCheckError = function (reason) {\n    var trace = util.ensureErrorObject(reason);\n    this._rejectUnchecked(reason, trace === reason ? undefined : trace);\n};\n\nPromise.prototype._rejectUnchecked = function (reason, trace) {\n    if (reason === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._rejectUnchecked(err);\n    }\n    this._setRejected();\n    this._settledValue = reason;\n    this._cleanValues();\n\n    if (this._isFinal()) {\n        async.throwLater(function(e) {\n            if (\"stack\" in e) {\n                async.invokeFirst(\n                    CapturedTrace.unhandledRejection, undefined, e);\n            }\n            throw e;\n        }, trace === undefined ? reason : trace);\n        return;\n    }\n\n    if (trace !== undefined && trace !== reason) {\n        this._setCarriedStackTrace(trace);\n    }\n\n    if (this._length() > 0) {\n        this._queueSettlePromises();\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    this._unsetSettlePromisesQueued();\n    var len = this._length();\n    for (var i = 0; i < len; i++) {\n        this._settlePromiseAt(i);\n    }\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\nrequire(\"./progress.js\")(Promise, PromiseArray);\nrequire(\"./method.js\")(Promise, INTERNAL, tryConvertToPromise, apiRejection);\nrequire(\"./bind.js\")(Promise, INTERNAL, tryConvertToPromise);\nrequire(\"./finally.js\")(Promise, NEXT_FILTER, tryConvertToPromise);\nrequire(\"./direct_resolve.js\")(Promise);\nrequire(\"./synchronous_inspection.js\")(Promise);\nrequire(\"./join.js\")(Promise, PromiseArray, tryConvertToPromise, INTERNAL);\nPromise.Promise = Promise;\nrequire('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL);\nrequire('./cancel.js')(Promise);\nrequire('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext);\nrequire('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise);\nrequire('./nodeify.js')(Promise);\nrequire('./call_get.js')(Promise);\nrequire('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\nrequire('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\nrequire('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL);\nrequire('./settle.js')(Promise, PromiseArray);\nrequire('./some.js')(Promise, PromiseArray, apiRejection);\nrequire('./promisify.js')(Promise, INTERNAL);\nrequire('./any.js')(Promise);\nrequire('./each.js')(Promise, INTERNAL);\nrequire('./timers.js')(Promise, INTERNAL);\nrequire('./filter.js')(Promise, INTERNAL);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._progressHandler0 = value;                                         \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n        p._settledValue = value;                                             \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    CapturedTrace.setBounds(async.firstLineError, util.lastLineError);       \n    return Promise;                                                          \n\n};\n"]}