{"version":3,"sources":["cancel.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UAAS,OAAT,EAAkB;AACnC,QAAI,SAAS,QAAQ,aAAR,CAAb;AACA,QAAI,QAAQ,QAAQ,YAAR,CAAZ;AACA,QAAI,oBAAoB,OAAO,iBAA/B;;AAEA,YAAQ,SAAR,CAAkB,OAAlB,GAA4B,UAAU,MAAV,EAAkB;AAC1C,YAAI,CAAC,KAAK,aAAL,EAAL,EAA2B,OAAO,IAAP;AAC3B,YAAI,MAAJ;AACA,YAAI,kBAAkB,IAAtB;AACA,eAAO,CAAC,SAAS,gBAAgB,mBAA1B,MAAmD,SAAnD,IACH,OAAO,aAAP,EADJ,EAC4B;AACxB,8BAAkB,MAAlB;AACH;AACD,aAAK,iBAAL;AACA,wBAAgB,OAAhB,GAA0B,eAA1B,CAA0C,MAA1C,EAAkD,KAAlD,EAAyD,IAAzD;AACH,KAVD;;AAYA,YAAQ,SAAR,CAAkB,MAAlB,GAA2B,UAAU,MAAV,EAAkB;AACzC,YAAI,CAAC,KAAK,aAAL,EAAL,EAA2B,OAAO,IAAP;AAC3B,YAAI,WAAW,SAAf,EAA0B,SAAS,IAAI,iBAAJ,EAAT;AAC1B,cAAM,WAAN,CAAkB,KAAK,OAAvB,EAAgC,IAAhC,EAAsC,MAAtC;AACA,eAAO,IAAP;AACH,KALD;;AAOA,YAAQ,SAAR,CAAkB,WAAlB,GAAgC,YAAY;AACxC,YAAI,KAAK,YAAL,EAAJ,EAAyB,OAAO,IAAP;AACzB,cAAM,gBAAN;AACA,aAAK,eAAL;AACA,aAAK,mBAAL,GAA2B,SAA3B;AACA,eAAO,IAAP;AACH,KAND;;AAQA,YAAQ,SAAR,CAAkB,aAAlB,GAAkC,YAAY;AAC1C,YAAI,MAAM,KAAK,IAAL,EAAV;AACA,YAAI,iBAAJ;AACA,eAAO,GAAP;AACH,KAJD;;AAMA,YAAQ,SAAR,CAAkB,IAAlB,GAAyB,UAAU,UAAV,EAAsB,SAAtB,EAAiC,WAAjC,EAA8C;AACnE,YAAI,MAAM,KAAK,KAAL,CAAW,UAAX,EAAuB,SAAvB,EAAkC,WAAlC,EACW,SADX,EACsB,SADtB,CAAV;;AAGA,YAAI,eAAJ;AACA,YAAI,mBAAJ,GAA0B,SAA1B;AACA,eAAO,GAAP;AACH,KAPD;AAQC,CA9CD","file":"cancel-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise) {\nvar errors = require(\"./errors.js\");\nvar async = require(\"./async.js\");\nvar CancellationError = errors.CancellationError;\n\nPromise.prototype._cancel = function (reason) {\n    if (!this.isCancellable()) return this;\n    var parent;\n    var promiseToReject = this;\n    while ((parent = promiseToReject._cancellationParent) !== undefined &&\n        parent.isCancellable()) {\n        promiseToReject = parent;\n    }\n    this._unsetCancellable();\n    promiseToReject._target()._rejectCallback(reason, false, true);\n};\n\nPromise.prototype.cancel = function (reason) {\n    if (!this.isCancellable()) return this;\n    if (reason === undefined) reason = new CancellationError();\n    async.invokeLater(this._cancel, this, reason);\n    return this;\n};\n\nPromise.prototype.cancellable = function () {\n    if (this._cancellable()) return this;\n    async.enableTrampoline();\n    this._setCancellable();\n    this._cancellationParent = undefined;\n    return this;\n};\n\nPromise.prototype.uncancellable = function () {\n    var ret = this.then();\n    ret._unsetCancellable();\n    return ret;\n};\n\nPromise.prototype.fork = function (didFulfill, didReject, didProgress) {\n    var ret = this._then(didFulfill, didReject, didProgress,\n                         undefined, undefined);\n\n    ret._setCancellable();\n    ret._cancellationParent = undefined;\n    return ret;\n};\n};\n"]}