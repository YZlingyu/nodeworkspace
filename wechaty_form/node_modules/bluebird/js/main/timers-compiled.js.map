{"version":3,"sources":["timers.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UAAS,OAAT,EAAkB,QAAlB,EAA4B;AAC7C,QAAI,OAAO,QAAQ,WAAR,CAAX;AACA,QAAI,eAAe,QAAQ,YAA3B;;AAEA,QAAI,eAAe,UAAU,OAAV,EAAmB,OAAnB,EAA4B;AAC3C,YAAI,CAAC,QAAQ,SAAR,EAAL,EAA0B;;AAE1B,YAAI,GAAJ;AACA,YAAG,CAAC,KAAK,WAAL,CAAiB,OAAjB,CAAD,IAA+B,mBAAmB,KAArD,EAA6D;AACzD,kBAAM,OAAN;AACH,SAFD,MAEO;AACH,gBAAI,OAAO,OAAP,KAAmB,QAAvB,EAAiC;AAC7B,0BAAU,qBAAV;AACH;AACD,kBAAM,IAAI,YAAJ,CAAiB,OAAjB,CAAN;AACH;AACD,aAAK,8BAAL,CAAoC,GAApC;AACA,gBAAQ,iBAAR,CAA0B,GAA1B;AACA,gBAAQ,OAAR,CAAgB,GAAhB;AACH,KAfD;;AAiBA,QAAI,aAAa,UAAS,KAAT,EAAgB;AAAE,eAAO,MAAM,CAAC,IAAP,EAAa,UAAb,CAAwB,KAAxB,CAAP;AAAwC,KAA3E;AACA,QAAI,QAAQ,QAAQ,KAAR,GAAgB,UAAU,KAAV,EAAiB,EAAjB,EAAqB;AAC7C,YAAI,OAAO,SAAX,EAAsB;AAClB,iBAAK,KAAL;AACA,oBAAQ,SAAR;AACA,gBAAI,MAAM,IAAI,OAAJ,CAAY,QAAZ,CAAV;AACA,uBAAW,YAAW;AAAE,oBAAI,QAAJ;AAAiB,aAAzC,EAA2C,EAA3C;AACA,mBAAO,GAAP;AACH;AACD,aAAK,CAAC,EAAN;AACA,eAAO,QAAQ,OAAR,CAAgB,KAAhB,EAAuB,KAAvB,CAA6B,UAA7B,EAAyC,IAAzC,EAA+C,IAA/C,EAAqD,EAArD,EAAyD,SAAzD,CAAP;AACH,KAVD;;AAYA,YAAQ,SAAR,CAAkB,KAAlB,GAA0B,UAAU,EAAV,EAAc;AACpC,eAAO,MAAM,IAAN,EAAY,EAAZ,CAAP;AACH,KAFD;;AAIA,aAAS,YAAT,CAAsB,KAAtB,EAA6B;AACzB,YAAI,SAAS,IAAb;AACA,YAAI,kBAAkB,MAAtB,EAA8B,SAAS,CAAC,MAAV;AAC9B,qBAAa,MAAb;AACA,eAAO,KAAP;AACH;;AAED,aAAS,YAAT,CAAsB,MAAtB,EAA8B;AAC1B,YAAI,SAAS,IAAb;AACA,YAAI,kBAAkB,MAAtB,EAA8B,SAAS,CAAC,MAAV;AAC9B,qBAAa,MAAb;AACA,cAAM,MAAN;AACH;;AAED,YAAQ,SAAR,CAAkB,OAAlB,GAA4B,UAAU,EAAV,EAAc,OAAd,EAAuB;AAC/C,aAAK,CAAC,EAAN;AACA,YAAI,MAAM,KAAK,IAAL,GAAY,WAAZ,EAAV;AACA,YAAI,mBAAJ,GAA0B,IAA1B;AACA,YAAI,SAAS,WAAW,SAAS,cAAT,GAA0B;AAC9C,yBAAa,GAAb,EAAkB,OAAlB;AACH,SAFY,EAEV,EAFU,CAAb;AAGA,eAAO,IAAI,KAAJ,CAAU,YAAV,EAAwB,YAAxB,EAAsC,SAAtC,EAAiD,MAAjD,EAAyD,SAAzD,CAAP;AACH,KARD;AAUC,CA9DD","file":"timers-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = require(\"./util.js\");\nvar TimeoutError = Promise.TimeoutError;\n\nvar afterTimeout = function (promise, message) {\n    if (!promise.isPending()) return;\n    \n    var err;\n    if(!util.isPrimitive(message) && (message instanceof Error)) {\n        err = message;\n    } else {\n        if (typeof message !== \"string\") {\n            message = \"operation timed out\";\n        }\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._cancel(err);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (value, ms) {\n    if (ms === undefined) {\n        ms = value;\n        value = undefined;\n        var ret = new Promise(INTERNAL);\n        setTimeout(function() { ret._fulfill(); }, ms);\n        return ret;\n    }\n    ms = +ms;\n    return Promise.resolve(value)._then(afterValue, null, null, ms, undefined);\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(this, ms);\n};\n\nfunction successClear(value) {\n    var handle = this;\n    if (handle instanceof Number) handle = +handle;\n    clearTimeout(handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    var handle = this;\n    if (handle instanceof Number) handle = +handle;\n    clearTimeout(handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret = this.then().cancellable();\n    ret._cancellationParent = this;\n    var handle = setTimeout(function timeoutTimeout() {\n        afterTimeout(ret, message);\n    }, ms);\n    return ret._then(successClear, failureClear, undefined, handle, undefined);\n};\n\n};\n"]}