{"version":3,"sources":["context.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UAAS,OAAT,EAAkB,aAAlB,EAAiC,WAAjC,EAA8C;AAC/D,QAAI,eAAe,EAAnB;AACA,aAAS,OAAT,GAAmB;AACf,aAAK,MAAL,GAAc,IAAI,aAAJ,CAAkB,aAAlB,CAAd;AACH;AACD,YAAQ,SAAR,CAAkB,YAAlB,GAAiC,YAAY;AACzC,YAAI,CAAC,aAAL,EAAoB;AACpB,YAAI,KAAK,MAAL,KAAgB,SAApB,EAA+B;AAC3B,yBAAa,IAAb,CAAkB,KAAK,MAAvB;AACH;AACJ,KALD;;AAOA,YAAQ,SAAR,CAAkB,WAAlB,GAAgC,YAAY;AACxC,YAAI,CAAC,aAAL,EAAoB;AACpB,YAAI,KAAK,MAAL,KAAgB,SAApB,EAA+B;AAC3B,yBAAa,GAAb;AACH;AACJ,KALD;;AAOA,aAAS,aAAT,GAAyB;AACrB,YAAI,aAAJ,EAAmB,OAAO,IAAI,OAAJ,EAAP;AACtB;;AAED,aAAS,WAAT,GAAuB;AACnB,YAAI,YAAY,aAAa,MAAb,GAAsB,CAAtC;AACA,YAAI,aAAa,CAAjB,EAAoB;AAChB,mBAAO,aAAa,SAAb,CAAP;AACH;AACD,eAAO,SAAP;AACH;;AAED,YAAQ,SAAR,CAAkB,YAAlB,GAAiC,WAAjC;AACA,YAAQ,SAAR,CAAkB,YAAlB,GAAiC,QAAQ,SAAR,CAAkB,YAAnD;AACA,YAAQ,SAAR,CAAkB,WAAlB,GAAgC,QAAQ,SAAR,CAAkB,WAAlD;;AAEA,WAAO,aAAP;AACC,CApCD","file":"context-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, CapturedTrace, isDebugging) {\nvar contextStack = [];\nfunction Context() {\n    this._trace = new CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (!isDebugging()) return;\n    if (this._trace !== undefined) {\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (!isDebugging()) return;\n    if (this._trace !== undefined) {\n        contextStack.pop();\n    }\n};\n\nfunction createContext() {\n    if (isDebugging()) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\n\nPromise.prototype._peekContext = peekContext;\nPromise.prototype._pushContext = Context.prototype._pushContext;\nPromise.prototype._popContext = Context.prototype._popContext;\n\nreturn createContext;\n};\n"]}