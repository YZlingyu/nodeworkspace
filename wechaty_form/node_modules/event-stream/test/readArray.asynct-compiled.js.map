{"version":3,"sources":["readArray.asynct.js"],"names":[],"mappings":"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","file":"readArray.asynct-compiled.js","sourcesContent":["\nvar es = require('../')\n  , it = require('it-is').style('colour')\n  , d = require('ubelt')\n\nfunction readStream(stream, pauseAt, done) {\n  if(!done) done = pauseAt, pauseAt = -1\n  var array = [] \n  stream.on('data', function (data) {\n    array.push(data)\n    if(!--pauseAt )\n      stream.pause(), done(null, array)\n  })\n  stream.on('error', done)\n  stream.on('end', function (data) {\n    done(null, array)\n  })\n\n}\n\nexports ['read an array'] = function (test) {\n\n  var readThis = d.map(3, 6, 100, d.id) //array of multiples of 3 < 100\n\n  var reader = es.readArray(readThis)\n\n  var writer = es.writeArray(function (err, array){\n    if(err) throw err //unpossible\n    it(array).deepEqual(readThis)\n    test.done()     \n  })\n\n  reader.pipe(writer)\n}\n\nexports ['read an array and pause it.'] = function (test) {\n\n  var readThis = d.map(3, 6, 100, d.id) //array of multiples of 3 < 100\n\n  var reader = es.readArray(readThis)\n  \n  readStream(reader, 10, function (err, data) {\n    if(err) throw err\n    it(data).deepEqual([3, 6, 9, 12, 15, 18, 21, 24, 27, 30])\n    readStream(reader, 10, function (err, data) {\n      it(data).deepEqual([33, 36, 39, 42, 45, 48, 51, 54, 57, 60])\n      test.done() \n    })\n    reader.resume()\n  })\n\n}\n\nexports ['reader is readable, but not writeable'] = function (test) {\n  var reader = es.readArray([1])\n  it(reader).has({\n    readable: true,\n    writable: false\n  })\n\n  test.done()\n}\n\n\nexports ['read one item per tick'] = function (test) {\n  var readThis = d.map(3, 6, 100, d.id) //array of multiples of 3 < 100\n  var drains = 0\n  var reader = es.readArray(readThis)\n  var tickMapper = es.map(function (data,callback) {\n    process.nextTick(function () {\n      callback(null, data)\n    })\n    //since tickMapper is returning false\n    //pipe should pause the writer until a drain occurs\n    return false\n  })\n  reader.pipe(tickMapper)\n  readStream(tickMapper, function (err, array) {\n    it(array).deepEqual(readThis)\n    it(array.length).deepEqual(readThis.length)\n    it(drains).equal(readThis.length)\n    test.done()\n  })\n  tickMapper.on('drain', function () {\n    drains ++\n  })\n\n}\nrequire('./helper')(module)\n"]}