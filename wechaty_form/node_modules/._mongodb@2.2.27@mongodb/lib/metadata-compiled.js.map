{"version":3,"sources":["metadata.js"],"names":[],"mappings":"AAAA,IAAI,IAAI,QAAQ,MAAR,EAAgB,MAAxB;;AAEA,IAAI,SAAS,UAAS,IAAT,EAAe,MAAf,EAAuB,MAAvB,EAA+B;AAC1C,OAAK,IAAL,GAAY,IAAZ;AACA,OAAK,MAAL,GAAc,MAAd;AACA,OAAK,MAAL,GAAc,OAAO,MAAP,IAAiB,SAAjB,GAA6B,MAA7B,GAAsC,KAApD;AACA,OAAK,gBAAL,GAAwB,EAAxB;AACD,CALD;;AAOA,OAAO,SAAP,CAAiB,WAAjB,GAA+B,UAAS,IAAT,EAAe,OAAf,EAAwB;AACrD,MAAI,OAAO,OAAO,IAAP,CAAY,OAAZ,EAAqB,IAArB,EAAX;AACA,MAAI,MAAM,YAAY,IAAZ,EAAkB,OAAlB,CAAV;;AAEA;AACA,MAAG,KAAK,gBAAL,CAAsB,GAAtB,KAA8B,IAAjC,EAAuC;AACrC,SAAK,gBAAL,CAAsB,GAAtB,IAA6B;AAC3B,eAAS,EADkB,EACd,SAAS;AADK,KAA7B;AAGD;;AAED;AACA,OAAK,gBAAL,CAAsB,GAAtB,EAA2B,OAA3B,CAAmC,IAAnC,CAAwC,IAAxC;AACD,CAbD;;AAeA,IAAI,cAAc,UAAS,IAAT,EAAe,OAAf,EAAwB;AACxC,MAAI,QAAQ,EAAZ;AACA,OAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,KAAK,MAAxB,EAAgC,GAAhC,EAAqC;AACnC,UAAM,IAAN,CAAW,EAAE,OAAF,EAAW,KAAK,CAAL,CAAX,EAAoB,QAAQ,KAAK,CAAL,CAAR,CAApB,CAAX;AACD;;AAED,SAAO,MAAM,IAAN,EAAP;AACD,CAPD;;AASA,OAAO,SAAP,CAAiB,YAAjB,GAAgC,UAAS,IAAT,EAAe,OAAf,EAAwB;AACtD,UAAQ,MAAR,GAAiB,IAAjB;AACA,MAAI,OAAO,OAAO,IAAP,CAAY,OAAZ,EAAqB,IAArB,EAAX;AACA,MAAI,MAAM,YAAY,IAAZ,EAAkB,OAAlB,CAAV;;AAEA;AACA,MAAG,KAAK,gBAAL,CAAsB,GAAtB,KAA8B,IAAjC,EAAuC;AACrC,SAAK,gBAAL,CAAsB,GAAtB,IAA6B;AAC3B,eAAS,EADkB,EACd,SAAS;AADK,KAA7B;AAGD;;AAED;AACA,OAAK,gBAAL,CAAsB,GAAtB,EAA2B,OAA3B,CAAmC,IAAnC,CAAwC,IAAxC;AACD,CAdD;;AAgBA,OAAO,SAAP,CAAiB,QAAjB,GAA4B,YAAW;AACrC;AACA,MAAI,SAAS;AACX,UAAM,KAAK,IADA,EACM,KAAK,KAAK,MADhB,EACwB,QAAQ,KAAK,MADrC;AAEX,sBAAkB;AAFP,GAAb;;AAKA,OAAI,IAAI,IAAR,IAAgB,KAAK,gBAArB,EAAuC;AACrC,WAAO,gBAAP,CAAwB,IAAxB,CAA6B,KAAK,gBAAL,CAAsB,IAAtB,CAA7B;AACD;;AAED,SAAO,MAAP;AACD,CAZD;;AAcA,OAAO,OAAP,GAAiB,MAAjB","file":"metadata-compiled.js","sourcesContent":["var f = require('util').format;\n\nvar Define = function(name, object, stream) {\n  this.name = name;\n  this.object = object;\n  this.stream = typeof stream == 'boolean' ? stream : false;\n  this.instrumentations = {};\n}\n\nDefine.prototype.classMethod = function(name, options) {\n  var keys = Object.keys(options).sort();\n  var key = generateKey(keys, options);\n\n  // Add a list of instrumentations\n  if(this.instrumentations[key] == null) {\n    this.instrumentations[key] = {\n      methods: [], options: options\n    }\n  }\n\n  // Push to list of method for this instrumentation\n  this.instrumentations[key].methods.push(name);\n}\n\nvar generateKey = function(keys, options) {\n  var parts = [];\n  for(var i = 0; i < keys.length; i++) {\n    parts.push(f('%s=%s', keys[i], options[keys[i]]));\n  }\n\n  return parts.join();\n}\n\nDefine.prototype.staticMethod = function(name, options) {\n  options.static = true;\n  var keys = Object.keys(options).sort();\n  var key = generateKey(keys, options);\n\n  // Add a list of instrumentations\n  if(this.instrumentations[key] == null) {\n    this.instrumentations[key] = {\n      methods: [], options: options\n    }\n  }\n\n  // Push to list of method for this instrumentation\n  this.instrumentations[key].methods.push(name);\n}\n\nDefine.prototype.generate = function() {\n  // Generate the return object\n  var object = {\n    name: this.name, obj: this.object, stream: this.stream,\n    instrumentations: []\n  }\n\n  for(var name in this.instrumentations) {\n    object.instrumentations.push(this.instrumentations[name]);\n  }\n\n  return object;\n}\n\nmodule.exports = Define;\n"]}