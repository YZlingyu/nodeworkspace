{"version":3,"sources":["after-test.js"],"names":[],"mappings":"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","file":"after-test-compiled.js","sourcesContent":["/*global suite, test*/\n\nvar assert = require(\"assert\")\n    , after = require(\"../\")\n\ntest(\"exists\", function () {\n    assert(typeof after === \"function\", \"after is not a function\")\n})\n\ntest(\"after when called with 0 invokes\", function (done) {\n    after(0, done)\n});\n\ntest(\"after 1\", function (done) {\n    var next = after(1, done)\n    next()\n})\n\ntest(\"after 5\", function (done) {\n    var next = after(5, done)\n    , i = 5\n\n    while (i--) {\n        next()\n    }\n})\n\ntest(\"manipulate count\", function (done) {\n    var next = after(1, done)\n    , i = 5\n\n    next.count = i\n    while (i--) {\n        next()\n    }\n})\n\ntest(\"after terminates on error\", function (done) {\n    var next = after(2, function(err) {\n        assert.equal(err.message, 'test');\n        done();\n    })\n    next(new Error('test'))\n    next(new Error('test2'))\n})\n\ntest('gee', function(done) {\n    done = after(2, done)\n\n    function cb(err) {\n        assert.equal(err.message, 1);\n        done()\n    }\n\n    var next = after(3, cb, function(err) {\n        assert.equal(err.message, 2)\n        done()\n    });\n\n    next()\n    next(new Error(1))\n    next(new Error(2))\n})\n\ntest('eee', function(done) {\n    done = after(3, done)\n\n    function cb(err) {\n        assert.equal(err.message, 1);\n        done()\n    }\n\n    var next = after(3, cb, function(err) {\n        assert.equal(err.message, 2)\n        done()\n    });\n\n    next(new Error(1))\n    next(new Error(2))\n    next(new Error(2))\n})\n\ntest('gge', function(done) {\n    function cb(err) {\n        assert.equal(err.message, 1);\n        done()\n    }\n\n    var next = after(3, cb, function(err) {\n        // should not happen\n        assert.ok(false);\n    });\n\n    next()\n    next()\n    next(new Error(1))\n})\n\ntest('egg', function(done) {\n    function cb(err) {\n        assert.equal(err.message, 1);\n        done()\n    }\n\n    var next = after(3, cb, function(err) {\n        // should not happen\n        assert.ok(false);\n    });\n\n    next(new Error(1))\n    next()\n    next()\n})\n\ntest('throws on too many calls', function(done) {\n    var next = after(1, done);\n    next()\n    assert.throws(next, /after called too many times/);\n});\n\n"]}