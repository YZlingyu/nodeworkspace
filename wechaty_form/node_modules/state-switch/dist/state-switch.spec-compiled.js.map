{"version":3,"sources":["state-switch.spec.js"],"names":[],"mappings":"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","file":"state-switch.spec-compiled.js","sourcesContent":["#!/usr/bin/env ts-node\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tap_1 = require(\"tap\");\nconst state_switch_1 = require(\"./state-switch\");\ntap_1.test('StateSwitch target/current & stable', t => {\n    const CLIENT_NAME = 'StateSwitchTest';\n    const sm = new state_switch_1.default(CLIENT_NAME, 'A');\n    t.is(sm.current(), 'A', 'current should be A');\n    t.is(sm.target(), 'A', 'target should be A');\n    t.true(sm.stable(), 'should be stable');\n    t.throws(() => {\n        sm.current('B');\n    }, Error, 'should throw if current not match target');\n    t.throws(() => {\n        sm.current('B', false);\n    }, Error, 'should throw if current not match target 2');\n    t.is(sm.current(), 'A', 'current should still be A');\n    t.is(sm.target(), 'A', 'target should still be A');\n    t.true(sm.stable(), 'should be stable');\n    sm.target('B');\n    sm.current('B');\n    t.is(sm.target(), 'B', 'target should still be B');\n    t.is(sm.current(), 'B', 'current should be B');\n    t.true(sm.stable(), 'should be stable');\n    sm.target('A');\n    sm.current('A', false);\n    t.is(sm.target(), 'A', 'target should still be A');\n    t.is(sm.current(), 'A', 'current should be A');\n    t.false(sm.stable(), 'should not be stable');\n    t.end();\n});\ntap_1.test('StateSwitch client & stable/inprocess', t => {\n    const CLIENT_NAME = 'StateSwitchTest';\n    const sm = new state_switch_1.default(CLIENT_NAME, 'A');\n    t.is(sm.client(), CLIENT_NAME, 'should get the same client name as init');\n    sm.target('B');\n    sm.current('B');\n    t.true(sm.stable(), 'should be stable');\n    t.false(sm.inprocess(), 'should be not inprocess');\n    sm.current('B', false);\n    t.false(sm.stable(), 'should not be stable');\n    t.true(sm.inprocess(), 'should be inprocess');\n    sm.current('B', true);\n    t.true(sm.stable(), 'should be stable');\n    t.false(sm.inprocess(), 'should be not inprocess');\n    t.end();\n});\ntap_1.test('current() strict check with target', t => {\n    const CLIENT_NAME = 'StateSwitchTest';\n    const sm = new state_switch_1.default(CLIENT_NAME, 'A');\n    t.throws(() => {\n        sm.current('B');\n    }, Error, 'should thorw for unmatch current & target');\n    sm.target('B');\n    t.doesNotThrow(() => sm.current('B'), 'should not throws for matched current & target');\n    t.end();\n});\n//# sourceMappingURL=state-switch.spec.js.map"]}