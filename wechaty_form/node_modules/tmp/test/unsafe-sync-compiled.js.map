{"version":3,"sources":["unsafe-sync.js"],"names":[],"mappings":"AAAA,IACE,KAAQ,QAAQ,IAAR,CADV;AAAA,IAEE,OAAQ,QAAQ,MAAR,EAAgB,IAF1B;AAAA,IAGE,QAAQ,QAAQ,cAAR,CAHV;;AAKA,IAAI,SAAS,MAAM,GAAnB;;AAEA,IAAI;AACF,MAAI,SAAS,MAAM,WAAN,CAAkB,EAAE,eAAe,MAAjB,EAAlB,CAAb;AACA,MAAI;AACF;AACA,QAAI,KAAK,GAAG,QAAH,CAAY,KAAK,OAAO,IAAZ,EAAkB,wBAAlB,CAAZ,EAAyD,GAAzD,CAAT;AACA,OAAG,SAAH,CAAa,EAAb;;AAEA;AACA,QAAI,gBAAgB,KAAK,SAAL,EAAgB,WAAhB,CAApB;AACA;AACA,QAAI,gBAAgB,KAAK,OAAO,IAAZ,EAAkB,kBAAlB,CAApB;;AAEA;AACA,OAAG,WAAH,CAAe,aAAf,EAA8B,aAA9B,EAA6C,KAA7C;;AAEA,UAAM,GAAN,CAAU,OAAO,IAAjB,EAAuB,MAAM,IAA7B;AACD,GAdD,CAcE,OAAO,CAAP,EAAU;AACV,UAAM,GAAN,CAAU,EAAE,QAAF,EAAV,EAAwB,MAAM,IAA9B;AACD;AACF,CAnBD,CAoBA,OAAO,CAAP,EAAU;AACR,QAAM,GAAN,CAAU,GAAV,EAAe,MAAM,IAArB;AACD","file":"unsafe-sync-compiled.js","sourcesContent":["var\n  fs    = require('fs'),\n  join  = require('path').join,\n  spawn = require('./spawn-sync');\n\nvar unsafe = spawn.arg;\n\ntry {\n  var result = spawn.tmpFunction({ unsafeCleanup: unsafe });\n  try {\n    // file that should be removed\n    var fd = fs.openSync(join(result.name, 'should-be-removed.file'), 'w');\n    fs.closeSync(fd);\n\n    // in tree source\n    var symlinkSource = join(__dirname, 'symlinkme');\n    // testing target\n    var symlinkTarget = join(result.name, 'symlinkme-target');\n\n    // symlink that should be removed but the contents should be preserved.\n    fs.symlinkSync(symlinkSource, symlinkTarget, 'dir');\n\n    spawn.out(result.name, spawn.exit);\n  } catch (e) {\n    spawn.err(e.toString(), spawn.exit);\n  }\n}\ncatch (e) {\n  spawn.err(err, spawn.exit);\n}\n"]}