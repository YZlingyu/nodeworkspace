{"version":3,"sources":["chain.js"],"names":[],"mappings":"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","file":"chain-compiled.js","sourcesContent":["var Q = require('../kew')\nvar originalQ = require('q')\n\n// test that fin() works with a synchronous resolve\nexports.testSynchronousThenAndFin = function (test) {\n  var vals = ['a', 'b']\n  var counter = 0\n\n  var promise1 = Q.resolve(vals[0])\n  var promise2 = promise1.fin(function () {\n    counter++\n  })\n  var promise3 = promise2.then(function (data) {\n    if (data === vals[0]) return vals[1]\n  })\n  var promise4 = promise3.fin(function () {\n    counter++\n  })\n\n  Q.all([promise2, promise4])\n    .then(function (data) {\n      test.equal(counter, 2, \"fin() should have been called twice\")\n      test.equal(data[0], vals[0], \"first fin() should return the first val\")\n      test.equal(data[1], vals[1], \"second fin() should return the second val\")\n      test.done()\n    })\n}\n\n// test that fin() works with a synchronous reject\nexports.testSynchronousFailAndFin = function (test) {\n  var errs = []\n  errs.push(new Error('nope 1'))\n  errs.push(new Error('nope 2'))\n  var counter = 0\n\n  var promise1 = Q.reject(errs[0])\n  var promise2 = promise1.fin(function () {\n    counter++\n  })\n  var promise3 = promise2.fail(function (e) {\n    if (e === errs[0]) throw errs[1]\n  })\n  var promise4 = promise3.fin(function () {\n    counter++\n  })\n\n  Q.all([\n    promise2.fail(function (e) {\n      return e === errs[0]\n    }),\n    promise4.fail(function (e) {\n      return e === errs[1]\n    })\n  ])\n    .then(function (data) {\n      test.equal(counter, 2, \"fin() should have been called twice\")\n      test.equal(data[0] && data[1], true, \"all promises should return true\")\n      test.done()\n    })\n}\n\n// test that fin() works with an asynchrnous resolve\nexports.testAsynchronousThenAndFin = function (test) {\n  var vals = ['a', 'b']\n  var counter = 0\n\n  var defer = Q.defer()\n  setTimeout(function () {\n    defer.resolve(vals[0])\n  })\n  var promise1 = defer.promise\n  var promise2 = promise1.fin(function () {\n    counter++\n  })\n  var promise3 = promise2.then(function (data) {\n    if (data !== vals[0]) return\n\n    var defer = Q.defer()\n    setTimeout(function () {\n      defer.resolve(vals[1])\n    })\n    return defer.promise\n  })\n  var promise4 = promise3.fin(function () {\n    counter++\n  })\n\n  Q.all([promise2, promise4])\n    .then(function (data) {\n      test.equal(counter, 2, \"fin() should have been called twice\")\n      test.equal(data[0], vals[0], \"first fin() should return the first val\")\n      test.equal(data[1], vals[1], \"second fin() should return the second val\")\n      test.done()\n    })\n}\n\n// test that fin() works with an asynchronous reject\nexports.testAsynchronousFailAndFin = function (test) {\n  var errs = []\n  errs.push(new Error('nope 1'))\n  errs.push(new Error('nope 2'))\n  var counter = 0\n\n  var defer = Q.defer()\n  setTimeout(function () {\n    defer.reject(errs[0])\n  }, 10)\n  var promise1 = defer.promise\n  var promise2 = promise1.fin(function () {\n    counter++\n  })\n  var promise3 = promise2.fail(function (e) {\n    if (e !== errs[0]) return\n\n    var defer = Q.defer()\n    setTimeout(function () {\n      defer.reject(errs[1])\n    }, 10)\n\n    return defer.promise\n  })\n  var promise4 = promise3.fin(function () {\n    counter++\n  })\n\n  Q.all([\n    promise2.fail(function (e) {\n      return e === errs[0]\n    }),\n    promise4.fail(function (e) {\n      return e === errs[1]\n    })\n  ])\n    .then(function (data) {\n      test.equal(counter, 2, \"fin() should have been called twice\")\n      test.equal(data[0] && data[1], true, \"all promises should return true\")\n      test.done()\n    })\n}\n\n// test several thens chaining\nexports.testChainedThens = function (test) {\n  var promise1 = Q.resolve('a')\n  var promise2 = promise1.then(function(data) {\n    return data + 'b'\n  })\n  var promise3 = promise2.then(function (data) {\n    return data + 'c'\n  })\n  // testing the same promise again to make sure they can run side by side\n  var promise4 = promise2.then(function (data) {\n    return data + 'c'\n  })\n\n  Q.all([promise1, promise2, promise3, promise4])\n    .then(function (data) {\n      test.equal(data[0], 'a')\n      test.equal(data[1], 'ab')\n      test.equal(data[2], 'abc')\n      test.equal(data[3], 'abc')\n      test.done()\n    })\n}\n\n// test several fails chaining\nexports.testChainedFails = function (test) {\n  var errs = []\n  errs.push(new Error(\"first err\"))\n  errs.push(new Error(\"second err\"))\n  errs.push(new Error(\"third err\"))\n\n  var promise1 = Q.reject(errs[0])\n  var promise2 = promise1.fail(function (e) {\n    if (e === errs[0]) throw errs[1]\n  })\n  var promise3 = promise2.fail(function (e) {\n    if (e === errs[1]) throw errs[2]\n  })\n  var promise4 = promise2.fail(function (e) {\n    if (e === errs[1]) throw errs[2]\n  })\n\n  Q.all([\n    promise1.fail(function (e) {\n      return e === errs[0]\n    }),\n    promise2.fail(function (e) {\n      return e === errs[1]\n    }),\n    promise3.fail(function (e) {\n      return e === errs[2]\n    }),\n    promise4.fail(function (e) {\n      return e === errs[2]\n    })\n  ])\n  .then(function (data) {\n    test.equal(data[0] && data[1] && data[2] && data[3], true)\n    test.done()\n  })\n}\n\n// test that we can call end without callbacks and not fail\nexports.testEndNoCallbacks = function (test) {\n  Q.resolve(true).end()\n  test.ok(\"Ended successfully\")\n  test.done()\n}\n\n// test that we can call end with callbacks and fail\nexports.testEndNoCallbacksThrows = function (test) {\n  var testError = new Error('Testing')\n  try {\n    Q.reject(testError).end()\n    test.fail(\"Should throw an error\")\n  } catch (e) {\n    test.equal(e, testError, \"Should throw the correct error\")\n  }\n  test.done()\n}\n\n// test chaining when a promise returns a promise\nexports.testChainedPromises = function (test) {\n  var err = new Error('nope')\n  var val = 'ok'\n\n  var shouldFail = Q.reject(err)\n  var shouldSucceed = Q.resolve(val)\n\n  Q.resolve(\"start\")\n    .then(function () {\n      return shouldFail\n    })\n    .fail(function (e) {\n      if (e === err) return shouldSucceed\n      else throw e\n    })\n    .then(function (data) {\n      test.equal(data, val, \"val should be returned\")\n      test.done()\n    })\n}\n\n// test .end() is called with no parent scope (causing an uncaught exception)\nexports.testChainedEndUncaught = function (test) {\n  var uncaughtErrors = 0\n  var errs = []\n  errs.push(new Error('nope 1'))\n  errs.push(new Error('nope 2'))\n  errs.push(new Error('nope 3'))\n\n  var cb = function (e) {\n    uncaughtErrors++\n    if (e === errs[2]) {\n      test.equal(uncaughtErrors, 3, \"Errors should be uncaught\")\n      process.removeListener('uncaughtException', cb)\n      test.done()\n    }\n  }\n  process.on('uncaughtException', cb)\n\n  var defer = Q.defer()\n  defer.promise.end()\n\n  var promise1 = defer.promise\n  var promise2 = promise1.fail(function (e) {\n    if (e === errs[0]) throw errs[1]\n  })\n  var promise3 = promise2.fail(function (e) {\n    if (e === errs[1]) throw errs[2]\n  })\n\n  promise1.end()\n  promise2.end()\n  promise3.end()\n\n  setTimeout(function () {\n    defer.reject(errs[0])\n  }, 10)\n}\n\n// test .end() is called with a parent scope and is caught\nexports.testChainedCaught = function (test) {\n  var err = new Error('nope')\n\n  try {\n    Q.reject(err).end()\n  } catch (e) {\n    test.equal(e, err, \"Error should be caught\")\n    test.done()\n  }\n}\n\n// test a mix of fails and thens\nexports.testChainedMixed = function (test) {\n  var errs = []\n  errs.push(new Error('nope 1'))\n  errs.push(new Error('nope 2'))\n  errs.push(new Error('nope 3'))\n\n  var vals = [3, 2, 1]\n\n  var promise1 = Q.reject(errs[0])\n  var promise2 = promise1.fail(function (e) {\n    if (e === errs[0]) return vals[0]\n  })\n  var promise3 = promise2.then(function (data) {\n    if (data === vals[0]) throw errs[1]\n  })\n  var promise4 = promise3.fail(function (e) {\n    if (e === errs[1]) return vals[1]\n  })\n  var promise5 = promise4.then(function (data) {\n    if (data === vals[1]) throw errs[2]\n  })\n  var promise6 = promise5.fail(function (e) {\n    if (e === errs[2]) return vals[2]\n  })\n\n  Q.all([\n    promise1.fail(function (e) {\n      return e === errs[0]\n    }),\n    promise2.then(function (data) {\n      return data === vals[0]\n    }),\n    promise3.fail(function (e) {\n      return e === errs[1]\n    }),\n    promise4.then(function (data) {\n      return data === vals[1]\n    }),\n    promise5.fail(function (e) {\n      return e === errs[2]\n    }),\n    promise6.then(function (data) {\n      return data === vals[2]\n    })\n  ])\n  .then(function (data) {\n    test.equal(data[0] && data[1] && data[2] && data[3] && data[4] && data[5], true, \"All values should return true\")\n    test.done()\n  })\n}\n\nexports.testInteroperabilityWithOtherPromises = function(test) {\n  var promise1 = Q.defer()\n  promise1.then(function(value) {\n    return originalQ(1 + value)\n  }).then(function(result) {\n    test.equal(result, 11)\n  })\n\n  var promise2 = Q.defer(),\n      errToThrow = new Error('error')\n  promise2.then(function() {\n    return originalQ.reject(errToThrow)\n  }).fail(function(err) {\n    test.equal(err, errToThrow)\n  })\n\n  promise1.resolve(10)\n  promise2.resolve()\n\n  Q.all([promise1, promise2]).then(function() {\n    test.done()\n  })\n}\n\nexports.testAllSettled = function(test) {\n  var promise1 = Q.resolve('woot')\n  var promise2 = Q.reject(new Error('oops'))\n\n  Q.allSettled([promise1, promise2, 'just a string'])\n    .then(function (data) {\n      test.equals('fulfilled', data[0].state)\n      test.equals('woot', data[0].value)\n      test.equals('rejected', data[1].state)\n      test.equals('oops', data[1].reason.message)\n      test.equals('fulfilled', data[2].state)\n      test.equals('just a string', data[2].value)\n    })\n\n  Q.allSettled([])\n    .then(function (data) {\n      test.equals(0, data.length)\n      test.done()\n    })\n}\n\nexports.testTimeout = function(test) {\n  var promise = Q.delay(50).timeout(45, 'Timeout message')\n  promise.then(function () {\n    test.fail('The promise is supposed to be timeout')\n  })\n  .fail(function (e) {\n    test.equals('Timeout message', e.message, 'The error message should be the one passed into timeout()')\n  })\n  .fin(test.done)\n}\n\nexports.testNotTimeout = function(test) {\n  var promise = Q.delay('expected data', 40).timeout(45, 'Timeout message')\n  promise.then(function (data) {\n    test.equals('expected data', data, 'The data should be the data from the original promise')\n  })\n  .fail(function (e) {\n    test.fail('The promise is supposed to be resolved before the timeout')\n  })\n  .fin(test.done)\n}\n\nexports.testNotTimeoutButReject = function(test) {\n  var promise = Q.delay(40).then(function() {throw new Error('Reject message')}).timeout(45, 'Timeout message')\n  promise.then(function (data) {\n    test.fail('The promise is supposed to be rejected')\n  })\n  .fail(function (e) {\n    test.equals('Reject message', e.message, 'The error message should be from the original promise')\n  })\n  .fin(test.done)\n}\n\nexports.testDelay = function (test) {\n  var timePassed = false\n  setTimeout(function () {\n    timePassed = true\n  }, 10)\n  Q.resolve('expected').delay(20).then(function (result) {\n    test.equal('expected', result)\n    test.ok(timePassed)\n    test.done()\n  })\n}\n"]}