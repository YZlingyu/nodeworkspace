{"version":3,"sources":["week-calendar-utils.js"],"names":[],"mappings":"AAAA,SAAS,UAAT,QAA2B,QAA3B;AACA,SAAS,WAAT,QAA4B,iBAA5B;AACA,SAAS,aAAT,QAA8B,2BAA9B;;AAEA;AACA,SAAS,eAAT,CAAyB,IAAzB,EAA+B,GAA/B,EAAoC,GAApC,EAAyC;AACrC,QAAI;AACA,UAAM,IAAI,GAAJ,GAAU,GADpB;;AAEI;AACA,YAAQ,CAAC,IAAI,cAAc,IAAd,EAAoB,CAApB,EAAuB,GAAvB,EAA4B,SAA5B,EAAJ,GAA8C,GAA/C,IAAsD,CAHlE;;AAKA,WAAO,CAAC,KAAD,GAAS,GAAT,GAAe,CAAtB;AACH;;AAED;AACA,OAAO,SAAS,kBAAT,CAA4B,IAA5B,EAAkC,IAAlC,EAAwC,OAAxC,EAAiD,GAAjD,EAAsD,GAAtD,EAA2D;AAC9D,QAAI,eAAe,CAAC,IAAI,OAAJ,GAAc,GAAf,IAAsB,CAAzC;AAAA,QACI,aAAa,gBAAgB,IAAhB,EAAsB,GAAtB,EAA2B,GAA3B,CADjB;AAAA,QAEI,YAAY,IAAI,KAAK,OAAO,CAAZ,CAAJ,GAAqB,YAArB,GAAoC,UAFpD;AAAA,QAGI,OAHJ;AAAA,QAGa,YAHb;;AAKA,QAAI,aAAa,CAAjB,EAAoB;AAChB,kBAAU,OAAO,CAAjB;AACA,uBAAe,WAAW,OAAX,IAAsB,SAArC;AACH,KAHD,MAGO,IAAI,YAAY,WAAW,IAAX,CAAhB,EAAkC;AACrC,kBAAU,OAAO,CAAjB;AACA,uBAAe,YAAY,WAAW,IAAX,CAA3B;AACH,KAHM,MAGA;AACH,kBAAU,IAAV;AACA,uBAAe,SAAf;AACH;;AAED,WAAO;AACH,cAAM,OADH;AAEH,mBAAW;AAFR,KAAP;AAIH;;AAED,OAAO,SAAS,UAAT,CAAoB,GAApB,EAAyB,GAAzB,EAA8B,GAA9B,EAAmC;AACtC,QAAI,aAAa,gBAAgB,IAAI,IAAJ,EAAhB,EAA4B,GAA5B,EAAiC,GAAjC,CAAjB;AAAA,QACI,OAAO,KAAK,KAAL,CAAW,CAAC,IAAI,SAAJ,KAAkB,UAAlB,GAA+B,CAAhC,IAAqC,CAAhD,IAAqD,CADhE;AAAA,QAEI,OAFJ;AAAA,QAEa,OAFb;;AAIA,QAAI,OAAO,CAAX,EAAc;AACV,kBAAU,IAAI,IAAJ,KAAa,CAAvB;AACA,kBAAU,OAAO,YAAY,OAAZ,EAAqB,GAArB,EAA0B,GAA1B,CAAjB;AACH,KAHD,MAGO,IAAI,OAAO,YAAY,IAAI,IAAJ,EAAZ,EAAwB,GAAxB,EAA6B,GAA7B,CAAX,EAA8C;AACjD,kBAAU,OAAO,YAAY,IAAI,IAAJ,EAAZ,EAAwB,GAAxB,EAA6B,GAA7B,CAAjB;AACA,kBAAU,IAAI,IAAJ,KAAa,CAAvB;AACH,KAHM,MAGA;AACH,kBAAU,IAAI,IAAJ,EAAV;AACA,kBAAU,IAAV;AACH;;AAED,WAAO;AACH,cAAM,OADH;AAEH,cAAM;AAFH,KAAP;AAIH;;AAED,OAAO,SAAS,WAAT,CAAqB,IAArB,EAA2B,GAA3B,EAAgC,GAAhC,EAAqC;AACxC,QAAI,aAAa,gBAAgB,IAAhB,EAAsB,GAAtB,EAA2B,GAA3B,CAAjB;AAAA,QACI,iBAAiB,gBAAgB,OAAO,CAAvB,EAA0B,GAA1B,EAA+B,GAA/B,CADrB;AAEA,WAAO,CAAC,WAAW,IAAX,IAAmB,UAAnB,GAAgC,cAAjC,IAAmD,CAA1D;AACH","file":"week-calendar-utils-compiled.js","sourcesContent":["import { daysInYear } from './year';\nimport { createLocal } from '../create/local';\nimport { createUTCDate } from '../create/date-from-array';\n\n// start-of-first-week - start-of-year\nfunction firstWeekOffset(year, dow, doy) {\n    var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n        fwd = 7 + dow - doy,\n        // first-week day local weekday -- which local weekday is fwd\n        fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n    return -fwdlw + fwd - 1;\n}\n\n// https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\nexport function dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n    var localWeekday = (7 + weekday - dow) % 7,\n        weekOffset = firstWeekOffset(year, dow, doy),\n        dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n        resYear, resDayOfYear;\n\n    if (dayOfYear <= 0) {\n        resYear = year - 1;\n        resDayOfYear = daysInYear(resYear) + dayOfYear;\n    } else if (dayOfYear > daysInYear(year)) {\n        resYear = year + 1;\n        resDayOfYear = dayOfYear - daysInYear(year);\n    } else {\n        resYear = year;\n        resDayOfYear = dayOfYear;\n    }\n\n    return {\n        year: resYear,\n        dayOfYear: resDayOfYear\n    };\n}\n\nexport function weekOfYear(mom, dow, doy) {\n    var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n        week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n        resWeek, resYear;\n\n    if (week < 1) {\n        resYear = mom.year() - 1;\n        resWeek = week + weeksInYear(resYear, dow, doy);\n    } else if (week > weeksInYear(mom.year(), dow, doy)) {\n        resWeek = week - weeksInYear(mom.year(), dow, doy);\n        resYear = mom.year() + 1;\n    } else {\n        resYear = mom.year();\n        resWeek = week;\n    }\n\n    return {\n        week: resWeek,\n        year: resYear\n    };\n}\n\nexport function weeksInYear(year, dow, doy) {\n    var weekOffset = firstWeekOffset(year, dow, doy),\n        weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n    return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n}\n"]}