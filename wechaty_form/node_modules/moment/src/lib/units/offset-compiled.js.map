{"version":3,"sources":["offset.js"],"names":[],"mappings":"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","file":"offset-compiled.js","sourcesContent":["import zeroFill from '../utils/zero-fill';\nimport { createDuration } from '../duration/create';\nimport { addSubtract } from '../moment/add-subtract';\nimport { isMoment, copyConfig } from '../moment/constructor';\nimport { addFormatToken } from '../format/format';\nimport { addRegexToken, matchOffset, matchShortOffset } from '../parse/regex';\nimport { addParseToken } from '../parse/token';\nimport { createLocal } from '../create/local';\nimport { prepareConfig } from '../create/from-anything';\nimport { createUTC } from '../create/utc';\nimport isDate from '../utils/is-date';\nimport toInt from '../utils/to-int';\nimport isUndefined from '../utils/is-undefined';\nimport compareArrays from '../utils/compare-arrays';\nimport { hooks } from '../utils/hooks';\n\n// FORMATTING\n\nfunction offset (token, separator) {\n    addFormatToken(token, 0, 0, function () {\n        var offset = this.utcOffset();\n        var sign = '+';\n        if (offset < 0) {\n            offset = -offset;\n            sign = '-';\n        }\n        return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);\n    });\n}\n\noffset('Z', ':');\noffset('ZZ', '');\n\n// PARSING\n\naddRegexToken('Z',  matchShortOffset);\naddRegexToken('ZZ', matchShortOffset);\naddParseToken(['Z', 'ZZ'], function (input, array, config) {\n    config._useUTC = true;\n    config._tzm = offsetFromString(matchShortOffset, input);\n});\n\n// HELPERS\n\n// timezone chunker\n// '+10:00' > ['10',  '00']\n// '-1530'  > ['-15', '30']\nvar chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\nfunction offsetFromString(matcher, string) {\n    var matches = (string || '').match(matcher);\n\n    if (matches === null) {\n        return null;\n    }\n\n    var chunk   = matches[matches.length - 1] || [];\n    var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n    var minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n    return minutes === 0 ?\n      0 :\n      parts[0] === '+' ? minutes : -minutes;\n}\n\n// Return a moment from input, that is local/utc/zone equivalent to model.\nexport function cloneWithOffset(input, model) {\n    var res, diff;\n    if (model._isUTC) {\n        res = model.clone();\n        diff = (isMoment(input) || isDate(input) ? input.valueOf() : createLocal(input).valueOf()) - res.valueOf();\n        // Use low-level api, because this fn is low-level api.\n        res._d.setTime(res._d.valueOf() + diff);\n        hooks.updateOffset(res, false);\n        return res;\n    } else {\n        return createLocal(input).local();\n    }\n}\n\nfunction getDateOffset (m) {\n    // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n    // https://github.com/moment/moment/pull/1871\n    return -Math.round(m._d.getTimezoneOffset() / 15) * 15;\n}\n\n// HOOKS\n\n// This function will be called whenever a moment is mutated.\n// It is intended to keep the offset in sync with the timezone.\nhooks.updateOffset = function () {};\n\n// MOMENTS\n\n// keepLocalTime = true means only change the timezone, without\n// affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n// 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n// +0200, so we adjust the time as needed, to be valid.\n//\n// Keeping the time actually adds/subtracts (one hour)\n// from the actual represented time. That is why we call updateOffset\n// a second time. In case it wants us to change the offset again\n// _changeInProgress == true case, then we have to adjust, because\n// there is no such time in the given timezone.\nexport function getSetOffset (input, keepLocalTime, keepMinutes) {\n    var offset = this._offset || 0,\n        localAdjust;\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n    if (input != null) {\n        if (typeof input === 'string') {\n            input = offsetFromString(matchShortOffset, input);\n            if (input === null) {\n                return this;\n            }\n        } else if (Math.abs(input) < 16 && !keepMinutes) {\n            input = input * 60;\n        }\n        if (!this._isUTC && keepLocalTime) {\n            localAdjust = getDateOffset(this);\n        }\n        this._offset = input;\n        this._isUTC = true;\n        if (localAdjust != null) {\n            this.add(localAdjust, 'm');\n        }\n        if (offset !== input) {\n            if (!keepLocalTime || this._changeInProgress) {\n                addSubtract(this, createDuration(input - offset, 'm'), 1, false);\n            } else if (!this._changeInProgress) {\n                this._changeInProgress = true;\n                hooks.updateOffset(this, true);\n                this._changeInProgress = null;\n            }\n        }\n        return this;\n    } else {\n        return this._isUTC ? offset : getDateOffset(this);\n    }\n}\n\nexport function getSetZone (input, keepLocalTime) {\n    if (input != null) {\n        if (typeof input !== 'string') {\n            input = -input;\n        }\n\n        this.utcOffset(input, keepLocalTime);\n\n        return this;\n    } else {\n        return -this.utcOffset();\n    }\n}\n\nexport function setOffsetToUTC (keepLocalTime) {\n    return this.utcOffset(0, keepLocalTime);\n}\n\nexport function setOffsetToLocal (keepLocalTime) {\n    if (this._isUTC) {\n        this.utcOffset(0, keepLocalTime);\n        this._isUTC = false;\n\n        if (keepLocalTime) {\n            this.subtract(getDateOffset(this), 'm');\n        }\n    }\n    return this;\n}\n\nexport function setOffsetToParsedOffset () {\n    if (this._tzm != null) {\n        this.utcOffset(this._tzm, false, true);\n    } else if (typeof this._i === 'string') {\n        var tZone = offsetFromString(matchOffset, this._i);\n        if (tZone != null) {\n            this.utcOffset(tZone);\n        }\n        else {\n            this.utcOffset(0, true);\n        }\n    }\n    return this;\n}\n\nexport function hasAlignedHourOffset (input) {\n    if (!this.isValid()) {\n        return false;\n    }\n    input = input ? createLocal(input).utcOffset() : 0;\n\n    return (this.utcOffset() - input) % 60 === 0;\n}\n\nexport function isDaylightSavingTime () {\n    return (\n        this.utcOffset() > this.clone().month(0).utcOffset() ||\n        this.utcOffset() > this.clone().month(5).utcOffset()\n    );\n}\n\nexport function isDaylightSavingTimeShifted () {\n    if (!isUndefined(this._isDSTShifted)) {\n        return this._isDSTShifted;\n    }\n\n    var c = {};\n\n    copyConfig(c, this);\n    c = prepareConfig(c);\n\n    if (c._a) {\n        var other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n        this._isDSTShifted = this.isValid() &&\n            compareArrays(c._a, other.toArray()) > 0;\n    } else {\n        this._isDSTShifted = false;\n    }\n\n    return this._isDSTShifted;\n}\n\nexport function isLocal () {\n    return this.isValid() ? !this._isUTC : false;\n}\n\nexport function isUtcOffset () {\n    return this.isValid() ? this._isUTC : false;\n}\n\nexport function isUtc () {\n    return this.isValid() ? this._isUTC && this._offset === 0 : false;\n}\n"]}