{"version":3,"sources":["database.js"],"names":[],"mappings":"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","file":"database-compiled.js","sourcesContent":["var database={};\ndatabase.db={};\n\ndatabase.onError = function(tx, e) {\n  var log = document.createElement('div');\n  log.setAttribute('name','error');\n  log.setAttribute('style','background-color:red');\n  log.innerText = e.message;\n  document.getElementById('logs').appendChild(log);\n}\n\ndatabase.onSuccess = function(tx, r) {\n  if (r.rows.length) {\n    var ol;\n    for (var i = 0; i < r.rows.length; i++) {\n      ol = document.createElement('ol');\n      ol.innerHTML = r.rows.item(i).ID + \": \" + r.rows.item(i).docname + \" (\" + r.rows.item(i).created + \")\";\n      document.getElementById('logs').appendChild(ol);\n    }\n\n  }\n}\n\ndatabase.open=function(){\n  database.db=openDatabase('HTML5', '1.0', 'Offline document storage', 100*1024);\n}\n\ndatabase.create=function(){\n  database.db.transaction(function(tx) {\n    tx.executeSql(\"CREATE TABLE IF NOT EXISTS docs(ID INTEGER PRIMARY KEY ASC, docname TEXT, created TIMESTAMP DEFAULT CURRENT_TIMESTAMP)\",\n      [],\n      database.onSuccess,\n      database.onError);\n  });}\n\ndatabase.add = function(message) {\n  database.db.transaction(function(tx){\n    tx.executeSql(\"INSERT INTO docs(docname) VALUES (?)\",\n        [message], database.onSuccess, database.onError);\n    });\n}\n\ndatabase.selectAll = function() {\n  database.db.transaction(function(tx) {\n    tx.executeSql(\"SELECT * FROM docs\", [], database.onSuccess,\n        database.onError);\n });\n}\n\ndatabase.onDeleteAllSuccess = function(tx, r) {\n  var doc = document.documentElement;\n  var db_completed = document.createElement(\"div\");\n  db_completed.setAttribute(\"id\", \"db_completed\");\n  db_completed.innerText = \"db operation completed\";\n  doc.appendChild(db_completed);\n}\n\ndatabase.deleteAll = function() {\n  database.db.transaction(function(tx) {\n    tx.executeSql(\"delete from docs\", [], database.onDeleteAllSuccess,\n        database.onError);\n  });\n}\n\nvar log = document.createElement('div');\nlog.setAttribute('name','notice');\nlog.setAttribute('style','background-color:yellow');\nlog.innerText = typeof window.openDatabase == \"function\" ? \"Web Database is supported.\" : \"Web Database is not supported.\";\ndocument.getElementById('logs').appendChild(log);\n\ntry {\n  database.open();\n  database.create();\n  database.add('Doc 1');\n  database.add('Doc 2');\n  database.selectAll();\n  database.deleteAll();\n} catch(error) {\n  var log = document.createElement('div');\n  log.setAttribute('name','critical');\n  log.setAttribute('style','background-color:pink');\n  log.innerText =  error;\n  document.getElementById('logs').appendChild(log);\n}\n"]}