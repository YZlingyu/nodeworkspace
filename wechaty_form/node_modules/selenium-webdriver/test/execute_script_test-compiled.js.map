{"version":3,"sources":["execute_script_test.js"],"names":[],"mappings":"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","file":"execute_script_test-compiled.js","sourcesContent":["// Licensed to the Software Freedom Conservancy (SFC) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The SFC licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n'use strict';\n\nvar fail = require('assert').fail;\n\nvar webdriver = require('..'),\n    Browser = webdriver.Browser,\n    By = webdriver.By,\n    assert = require('../testing/assert'),\n    test = require('../lib/test');\n\n\ntest.suite(function(env) {\n  var driver;\n\n  test.before(function*() {\n    driver = yield env.builder().build();\n  });\n\n  test.after(function() {\n    return driver.quit();\n  });\n\n  test.beforeEach(function() {\n    return driver.get(test.Pages.echoPage);\n  });\n\n  describe('executeScript;', function() {\n    var shouldHaveFailed = new Error('Should have failed');\n\n    test.it('fails if script throws', function() {\n      return execute('throw new Error(\"boom\")')\n          .then(function() { throw shouldHaveFailed; })\n          .catch(function(e) {\n            // The java WebDriver server adds a bunch of crap to error messages.\n            // Error message will just be \"JavaScript error\" for IE.\n            assert(e.message).matches(/.*(JavaScript error|boom).*/);\n          });\n    });\n\n    test.it('fails if script does not parse', function() {\n      return execute('throw function\\\\*')\n          .then(function() { throw shouldHaveFailed; })\n          .catch(function(e) {\n            assert(e).notEqualTo(shouldHaveFailed);\n          });\n    });\n\n    describe('scripts;', function() {\n      test.it('do not pollute the global scope', function*() {\n        yield execute('var x = 1;');\n        yield assert(execute('return typeof x;')).equalTo('undefined');\n      });\n\n      test.it('can set global variables', function*() {\n        yield execute('window.x = 1234;');\n        yield assert(execute('return x;')).equalTo(1234);\n      });\n\n      test.it('may be defined as a function expression', function*() {\n        let result = yield execute(function() {\n          return 1234 + 'abc';\n        });\n        assert(result).equalTo('1234abc');\n      });\n    });\n\n    describe('return values;', function() {\n\n      test.it('returns undefined as null', function() {\n        return assert(execute('var x; return x;')).isNull();\n      });\n\n      test.it('can return null', function() {\n        return assert(execute('return null;')).isNull();\n      });\n\n      test.it('can return numbers', function*() {\n        yield assert(execute('return 1234')).equalTo(1234);\n        yield assert(execute('return 3.1456')).equalTo(3.1456);\n      });\n\n      test.it('can return strings', function() {\n        return assert(execute('return \"hello\"')).equalTo('hello');\n      });\n\n      test.it('can return booleans', function*() {\n        yield assert(execute('return true')).equalTo(true);\n        yield assert(execute('return false')).equalTo(false);\n      });\n\n      test.it('can return an array of primitives', function() {\n        return execute('var x; return [1, false, null, 3.14, x]')\n            .then(verifyJson([1, false, null, 3.14, null]));\n      });\n\n      test.it('can return nested arrays', function() {\n        return execute('return [[1, 2, [3]]]').then(verifyJson([[1, 2, [3]]]));\n      });\n\n      test.ignore(env.browsers(Browser.IE)).\n      it('can return empty object literal', function() {\n        return execute('return {}').then(verifyJson({}));\n      });\n\n      test.it('can return object literals', function() {\n        return execute('return {a: 1, b: false, c: null}').then(result => {\n          verifyJson(['a', 'b', 'c'])(Object.keys(result).sort());\n          assert(result.a).equalTo(1);\n          assert(result.b).equalTo(false);\n          assert(result.c).isNull();\n        });\n      });\n\n      test.it('can return complex object literals', function() {\n        return execute('return {a:{b: \"hello\"}}')\n            .then(verifyJson({a:{b: 'hello'}}));\n      });\n\n      test.it('can return dom elements as web elements', function*() {\n        let result =\n            yield execute('return document.querySelector(\".header.host\")');\n        assert(result).instanceOf(webdriver.WebElement);\n\n        return assert(result.getText()).startsWith('host: ');\n      });\n\n      test.it('can return array of dom elements', function*() {\n        let result = yield execute(\n            'var nodes = document.querySelectorAll(\".request,.host\");' +\n            'return [nodes[0], nodes[1]];');\n        assert(result.length).equalTo(2);\n\n        assert(result[0]).instanceOf(webdriver.WebElement);\n        yield assert(result[0].getText()).startsWith('GET ');\n\n        assert(result[1]).instanceOf(webdriver.WebElement);\n        yield assert(result[1].getText()).startsWith('host: ');\n      });\n\n      test.it('can return a NodeList as an array of web elements', function*() {\n        let result =\n            yield execute('return document.querySelectorAll(\".request,.host\");')\n\n        assert(result.length).equalTo(2);\n\n        assert(result[0]).instanceOf(webdriver.WebElement);\n        yield assert(result[0].getText()).startsWith('GET ');\n\n        assert(result[1]).instanceOf(webdriver.WebElement);\n        yield assert(result[1].getText()).startsWith('host: ');\n      });\n\n      test.it('can return object literal with element property', function*() {\n        let result = yield execute('return {a: document.body}');\n\n        assert(result.a).instanceOf(webdriver.WebElement);\n        yield assert(result.a.getTagName()).equalTo('body');\n      });\n    });\n\n    describe('parameters;', function() {\n      test.it('can pass numeric arguments', function*() {\n        yield assert(execute('return arguments[0]', 12)).equalTo(12);\n        yield assert(execute('return arguments[0]', 3.14)).equalTo(3.14);\n      });\n\n      test.it('can pass boolean arguments', function*() {\n        yield assert(execute('return arguments[0]', true)).equalTo(true);\n        yield assert(execute('return arguments[0]', false)).equalTo(false);\n      });\n\n      test.it('can pass string arguments', function*() {\n        yield assert(execute('return arguments[0]', 'hi')).equalTo('hi');\n      });\n\n      test.it('can pass null arguments', function*() {\n        yield assert(execute('return arguments[0] === null', null)).equalTo(true);\n        yield assert(execute('return arguments[0]', null)).equalTo(null);\n      });\n\n      test.it('passes undefined as a null argument', function*() {\n        var x;\n        yield assert(execute('return arguments[0] === null', x)).equalTo(true);\n        yield assert(execute('return arguments[0]', x)).equalTo(null);\n      });\n\n      test.it('can pass multiple arguments', function*() {\n        yield assert(execute('return arguments.length')).equalTo(0);\n        yield assert(execute('return arguments.length', 1, 'a', false)).equalTo(3);\n      });\n\n      test.ignore(env.browsers(Browser.FIREFOX, Browser.SAFARI)).\n      it('can return arguments object as array', function*() {\n        let val = yield execute('return arguments', 1, 'a', false);\n\n        assert(val.length).equalTo(3);\n        assert(val[0]).equalTo(1);\n        assert(val[1]).equalTo('a');\n        assert(val[2]).equalTo(false);\n      });\n\n      test.it('can pass object literal', function*() {\n        let result = yield execute(\n            'return [typeof arguments[0], arguments[0].a]', {a: 'hello'})\n        assert(result[0]).equalTo('object');\n        assert(result[1]).equalTo('hello');\n      });\n\n      test.it('WebElement arguments are passed as DOM elements', function*() {\n        let el = yield driver.findElement(By.tagName('div'));\n        let result =\n            yield execute('return arguments[0].tagName.toLowerCase();', el);\n        assert(result).equalTo('div');\n      });\n\n      test.it('can pass array containing object literals', function*() {\n        let result = yield execute('return arguments[0]', [{color: \"red\"}]);\n        assert(result.length).equalTo(1);\n        assert(result[0].color).equalTo('red');\n      });\n\n      test.it('does not modify object literal parameters', function() {\n        var input = {color: 'red'};\n        return execute('return arguments[0];', input).then(verifyJson(input));\n      });\n    });\n\n    // See https://code.google.com/p/selenium/issues/detail?id=8223.\n    describe('issue 8223;', function() {\n      describe('using for..in loops;', function() {\n        test.it('can return array built from for-loop index', function() {\n          return execute(function() {\n            var ret = [];\n            for (var i = 0; i < 3; i++) {\n              ret.push(i);\n            }\n            return ret;\n          }).then(verifyJson[0, 1, 2]);\n        });\n\n        test.it('can copy input array contents', function() {\n          return execute(function(input) {\n            var ret = [];\n            for (var i in input) {\n              ret.push(input[i]);\n            }\n            return ret;\n          }, ['fa', 'fe', 'fi']).then(verifyJson(['fa', 'fe', 'fi']));\n        });\n\n        test.it('can iterate over input object keys', function() {\n          return execute(function(thing) {\n            var ret = [];\n            for (var w in thing.words) {\n              ret.push(thing.words[w].word);\n            }\n            return ret;\n          }, {words: [{word: 'fa'}, {word: 'fe'}, {word: 'fi'}]})\n          .then(verifyJson(['fa', 'fe', 'fi']));\n        });\n\n        describe('recursive functions;', function() {\n          test.it('can build array from input', function() {\n            var input = ['fa', 'fe', 'fi'];\n            return execute(function(thearray) {\n              var ret = [];\n              function build_response(thearray, ret) {\n                ret.push(thearray.shift());\n                return (!thearray.length && ret\n                    || build_response(thearray, ret));\n              }\n              return build_response(thearray, ret);\n            }, input).then(verifyJson(input));\n          });\n\n          test.it('can build array from elements in object', function() {\n            var input = {words: [{word: 'fa'}, {word: 'fe'}, {word: 'fi'}]};\n            return execute(function(thing) {\n              var ret = [];\n              function build_response(thing, ret) {\n                var item = thing.words.shift();\n                ret.push(item.word);\n                return (!thing.words.length && ret\n                    || build_response(thing, ret));\n              }\n              return build_response(thing, ret);\n            }, input).then(verifyJson(['fa', 'fe', 'fi']));\n          });\n        });\n      });\n    });\n\n    describe('async timeouts', function() {\n      var TIMEOUT_IN_MS = 200;\n      var ACCEPTABLE_WAIT = TIMEOUT_IN_MS / 10;\n      var TOO_LONG_WAIT = TIMEOUT_IN_MS * 10;\n\n      before(function() {\n        return driver.manage().timeouts().setScriptTimeout(TIMEOUT_IN_MS)\n      });\n\n      test.it('does not fail if script execute in time', function() {\n        return executeTimeOutScript(ACCEPTABLE_WAIT);\n      });\n\n      test.it('fails if script took too long', function() {\n        return executeTimeOutScript(TOO_LONG_WAIT)\n          .then(function() {\n            fail('it should have timed out');\n          }).catch(function(e) {\n            assert(e.name).equalTo('ScriptTimeoutError');\n          });\n      });\n\n      function executeTimeOutScript(sleepTime) {\n        return driver.executeAsyncScript(function(sleepTime) {\n          var callback = arguments[arguments.length - 1];\n          setTimeout(callback, sleepTime)\n        }, sleepTime);\n      }\n    })\n  });\n\n  function verifyJson(expected) {\n    return function(actual) {\n      return assert(JSON.stringify(actual)).equalTo(JSON.stringify(expected));\n    };\n  }\n\n  function execute() {\n    return driver.executeScript.apply(driver, arguments);\n  }\n});\n"]}