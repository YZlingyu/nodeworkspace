{"version":3,"sources":["promise_error_test.js"],"names":[],"mappings":"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","file":"promise_error_test-compiled.js","sourcesContent":["// Licensed to the Software Freedom Conservancy (SFC) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The SFC licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n/**\n * @fileoverview Contains tests against promise error handling. Many tests use\n * NativePromise to control test termination independent of promise\n * (and notably promise.ControlFlow).\n */\n\n'use strict';\n\nconst testutil = require('./testutil');\n\nconst assert = require('assert');\nconst promise = require('../../lib/promise');\nconst {enablePromiseManager} = require('../../lib/test/promise');\n\nconst NativePromise = Promise;\nconst StubError = testutil.StubError;\nconst throwStubError = testutil.throwStubError;\nconst assertIsStubError = testutil.assertIsStubError;\n\ndescribe('promise error handling', function() {\n  enablePromiseManager(() => {\n    var flow, uncaughtExceptions;\n\n    beforeEach(function setUp() {\n      if (promise.USE_PROMISE_MANAGER) {\n        flow = promise.controlFlow();\n        uncaughtExceptions = [];\n        flow.on('uncaughtException', onUncaughtException);\n      }\n    });\n\n    afterEach(function tearDown() {\n      if (promise.USE_PROMISE_MANAGER) {\n        return waitForIdle(flow).then(function() {\n          assert.deepEqual(\n              [], uncaughtExceptions, 'There were uncaught exceptions');\n          flow.reset();\n        });\n      }\n    });\n\n    function onUncaughtException(e) {\n      uncaughtExceptions.push(e);\n    }\n\n    function waitForAbort(opt_flow, opt_n) {\n      var n = opt_n || 1;\n      var theFlow = opt_flow || flow;\n      theFlow.removeAllListeners(\n          promise.ControlFlow.EventType.UNCAUGHT_EXCEPTION);\n      return new NativePromise(function(fulfill, reject) {\n        theFlow.once('idle', function() {\n          reject(Error('expected flow to report an unhandled error'));\n        });\n\n        var errors = [];\n        theFlow.on('uncaughtException', onError);\n        function onError(e) {\n          errors.push(e);\n          if (errors.length === n) {\n            theFlow.removeListener('uncaughtException', onError);\n            fulfill(n === 1 ? errors[0] : errors);\n          }\n        }\n      });\n    }\n\n    function waitForIdle(opt_flow) {\n      var theFlow = opt_flow || flow;\n      return new NativePromise(function(fulfill, reject) {\n        if (theFlow.isIdle()) {\n          fulfill();\n          return;\n        }\n        theFlow.once('idle', fulfill);\n        theFlow.once('uncaughtException', reject);\n      });\n    }\n\n    it('testRejectedPromiseTriggersErrorCallback', function() {\n      return promise.rejected(new StubError).\n          then(assert.fail, assertIsStubError);\n    });\n\n    describe('callback throws trigger subsequent error callback', function() {\n      it('fulfilled promise', function() {\n        return promise.fulfilled().\n            then(throwStubError).\n            then(assert.fail, assertIsStubError);\n      });\n\n      it('rejected promise', function() {\n        var e = Error('not the droids you are looking for');\n        return promise.rejected(e).\n            then(assert.fail, throwStubError).\n            then(assert.fail, assertIsStubError);\n      });\n    });\n\n    describe('callback returns rejected promise triggers subsequent errback', function() {\n      it('from fulfilled callback', function() {\n        return promise.fulfilled().then(function() {\n          return promise.rejected(new StubError);\n        }).then(assert.fail, assertIsStubError);\n      });\n\n      it('from rejected callback', function() {\n        var e = Error('not the droids you are looking for');\n        return promise.rejected(e).\n            then(assert.fail, function() {\n              return promise.rejected(new StubError);\n            }).\n            then(assert.fail, assertIsStubError);\n      });\n    });\n\n    it('testReportsUnhandledRejectionsThroughTheControlFlow', function() {\n      promise.rejected(new StubError);\n      return waitForAbort().then(assertIsStubError);\n    });\n\n    describe('multiple unhandled rejections outside a task', function() {\n      it('are reported in order they occurred', function() {\n        var e1 = Error('error 1');\n        var e2 = Error('error 2');\n\n        promise.rejected(e1);\n        promise.rejected(e2);\n\n        return waitForAbort(flow).then(function(error) {\n          assert.ok(\n              error instanceof promise.MultipleUnhandledRejectionError);\n          // TODO: switch to Array.from when we drop node 0.12.x\n          var errors = [];\n          for (var e of error.errors) {\n            errors.push(e);\n          }\n          assert.deepEqual([e1, e2], errors);\n        });\n      });\n    });\n\n    describe('does not report unhandled rejection when', function() {\n      it('handler added before next tick', function() {\n        promise.rejected(new StubError).then(assert.fail, assertIsStubError);\n        return waitForIdle();\n      });\n\n      it('added async but before next tick', function() {\n        var called = false;\n        return new NativePromise(function(fulfill, reject) {\n          var aPromise;\n          NativePromise.resolve().then(function() {\n            aPromise.then(assert.fail, function(e) {\n              called = true;\n              assertIsStubError(e);\n            });\n            waitForIdle().then(fulfill, reject);\n          });\n          aPromise = promise.rejected(new StubError);\n        }).then(function() {\n          assert.ok(called);\n        })\n      });\n    });\n\n    it('testTaskThrows', function() {\n      return flow.execute(throwStubError).then(assert.fail, assertIsStubError);\n    });\n\n    it('testTaskReturnsRejectedPromise', function() {\n      return flow.execute(function() {\n        return promise.rejected(new StubError)\n      }).then(assert.fail, assertIsStubError);\n    });\n\n    it('testTaskHasUnhandledRejection', function() {\n      return flow.execute(function() {\n        promise.rejected(new StubError)\n      }).then(assert.fail, assertIsStubError);\n    });\n\n    it('testTaskfails_returnedPromiseIsUnhandled', function() {\n      flow.execute(throwStubError);\n      return waitForAbort().then(assertIsStubError);\n    });\n\n    it('testTaskHasUnhandledRejection_cancelsRemainingSubTasks', function() {\n      var seen = [];\n      flow.execute(function() {\n        promise.rejected(new StubError);\n\n        flow.execute(() => seen.push('a'))\n            .then(() => seen.push('b'), (e) => seen.push(e));\n        flow.execute(() => seen.push('c'))\n            .then(() => seen.push('b'), (e) => seen.push(e));\n      });\n\n      return waitForAbort()\n          .then(assertIsStubError)\n          .then(() => assert.deepEqual([], seen));\n    });\n\n    describe('nested task failures', function() {\n      it('returns up to paren', function() {\n        return flow.execute(function() {\n          return flow.execute(function() {\n            return flow.execute(throwStubError);\n          });\n        }).then(assert.fail, assertIsStubError);\n      });\n\n      it('task throws; uncaught error bubbles up', function() {\n        flow.execute(function() {\n          flow.execute(function() {\n            flow.execute(throwStubError);\n          });\n        });\n        return waitForAbort().then(assertIsStubError);\n      });\n\n      it('task throws; uncaught error bubbles up; is caught at root', function() {\n        flow.execute(function() {\n          flow.execute(function() {\n            flow.execute(throwStubError);\n          });\n        }).then(assert.fail, assertIsStubError);\n        return waitForIdle();\n      });\n\n      it('unhandled rejection bubbles up', function() {\n        flow.execute(function() {\n          flow.execute(function() {\n            flow.execute(function() {\n              promise.rejected(new StubError);\n            });\n          });\n        });\n        return waitForAbort().then(assertIsStubError);\n      });\n\n      it('unhandled rejection bubbles up; caught at root', function() {\n        flow.execute(function() {\n          flow.execute(function() {\n            promise.rejected(new StubError);\n          });\n        }).then(assert.fail, assertIsStubError);\n        return waitForIdle();\n      });\n\n      it('mixtureof hanging and free subtasks', function() {\n        flow.execute(function() {\n          return flow.execute(function() {\n            flow.execute(throwStubError);\n          });\n        });\n        return waitForAbort().then(assertIsStubError);\n      });\n\n      it('cancels remaining tasks', function() {\n        var seen = [];\n        flow.execute(function() {\n          flow.execute(() => promise.rejected(new StubError));\n          flow.execute(() => seen.push('a'))\n              .then(() => seen.push('b'), (e) => seen.push(e));\n          flow.execute(() => seen.push('c'))\n              .then(() => seen.push('b'), (e) => seen.push(e));\n        });\n\n        return waitForAbort()\n            .then(assertIsStubError)\n            .then(() => assert.deepEqual([], seen));\n      });\n    });\n\n    it('testTaskReturnsPromiseLikeObjectThatInvokesErrback', function() {\n      return flow.execute(function() {\n        return {\n          'then': function(_, errback) {\n            errback('abc123');\n          }\n        };\n      }).then(assert.fail, function(value) {\n        assert.equal('abc123', value);\n      });\n    });\n\n    describe('ControlFlow#wait();', function() {\n      describe('condition throws;', function() {\n        it('failure is caught', function() {\n          return flow.wait(throwStubError, 50).then(assert.fail, assertIsStubError);\n        });\n\n        it('failure is not caught', function() {\n          flow.wait(throwStubError, 50);\n          return waitForAbort().then(assertIsStubError);\n        });\n      });\n\n      describe('condition returns promise', function() {\n        it('failure is caught', function() {\n          return flow.wait(function() {\n            return promise.rejected(new StubError);\n          }, 50).then(assert.fail, assertIsStubError);\n        });\n\n        it('failure is not caught', function() {\n          flow.wait(function() {\n            return promise.rejected(new StubError);\n          }, 50);\n          return waitForAbort().then(assertIsStubError);\n        });\n      });\n\n      describe('condition has unhandled promise rejection', function() {\n        it('failure is caught', function() {\n          return flow.wait(function() {\n            promise.rejected(new StubError);\n          }, 50).then(assert.fail, assertIsStubError);\n        });\n\n        it('failure is not caught', function() {\n          flow.wait(function() {\n            promise.rejected(new StubError);\n          }, 50);\n          return waitForAbort().then(assertIsStubError);\n        });\n      });\n\n      describe('condition has subtask failure', function() {\n        it('failure is caught', function() {\n          return flow.wait(function() {\n            flow.execute(function() {\n              flow.execute(throwStubError);\n            });\n          }, 50).then(assert.fail, assertIsStubError);\n        });\n\n        it('failure is not caught', function() {\n          flow.wait(function() {\n            flow.execute(function() {\n              flow.execute(throwStubError);\n            });\n          }, 50);\n          return waitForAbort().then(assertIsStubError);\n        });\n      });\n    });\n\n    describe('errback throws a new error', function() {\n      it('start with normal promise', function() {\n        var error = Error('an error');\n        return promise.rejected(error).\n            catch(function(e) {\n              assert.equal(e, error);\n              throw new StubError;\n            }).\n            catch(assertIsStubError);\n      });\n\n      it('start with task result', function() {\n        var error = Error('an error');\n        return flow.execute(function() {\n          throw error;\n        }).\n        catch(function(e) {\n          assert.equal(e, error);\n          throw new StubError;\n        }).\n        catch(assertIsStubError);\n      });\n\n      it('start with normal promise; uncaught error', function() {\n        var error = Error('an error');\n        promise.rejected(error).\n            catch(function(e) {\n              assert.equal(e, error);\n              throw new StubError;\n            });\n        return waitForAbort().then(assertIsStubError);\n      });\n\n      it('start with task result; uncaught error', function() {\n        var error = Error('an error');\n        flow.execute(function() {\n          throw error;\n        }).\n        catch(function(e) {\n          assert.equal(e, error);\n          throw new StubError;\n        });\n        return waitForAbort().then(assertIsStubError);\n      });\n    });\n\n    it('thrownPromiseCausesCallbackRejection', function() {\n      let p = promise.fulfilled(1234);\n      return promise.fulfilled().then(function() {\n        throw p;\n      }).then(assert.fail, function(value) {\n        assert.strictEqual(p, value);\n      });\n    });\n\n    describe('task throws promise', function() {\n      it('promise was fulfilled', function() {\n        var toThrow = promise.fulfilled(1234);\n        flow.execute(function() {\n          throw toThrow;\n        }).then(assert.fail, function(value) {\n          assert.equal(toThrow, value);\n          return toThrow;\n        }).then(function(value) {\n          assert.equal(1234, value);\n        });\n        return waitForIdle();\n      });\n\n      it('promise was rejected', function() {\n        var toThrow = promise.rejected(new StubError);\n        toThrow.catch(function() {});  // For tearDown.\n        flow.execute(function() {\n          throw toThrow;\n        }).then(assert.fail, function(e) {\n          assert.equal(toThrow, e);\n          return e;\n        }).then(assert.fail, assertIsStubError);\n        return waitForIdle();\n      });\n    });\n\n    it('testFailsTaskIfThereIsAnUnhandledErrorWhileWaitingOnTaskResult', function() {\n      var d = promise.defer();\n      flow.execute(function() {\n        promise.rejected(new StubError);\n        return d.promise;\n      }).then(assert.fail, assertIsStubError);\n\n      return waitForIdle().then(function() {\n        return d.promise;\n      }).then(assert.fail, function(e) {\n        assert.equal('CancellationError: StubError', e.toString());\n      });\n    });\n\n    it('testFailsParentTaskIfAsyncScheduledTaskFails', function() {\n      var d = promise.defer();\n      flow.execute(function() {\n        flow.execute(throwStubError);\n        return d.promise;\n      }).then(assert.fail, assertIsStubError);\n\n      return waitForIdle().then(function() {\n        return d.promise;\n      }).then(assert.fail, function(e) {\n        assert.equal('CancellationError: StubError', e.toString());\n      });\n    });\n\n    describe('long stack traces', function() {\n      afterEach(() => promise.LONG_STACK_TRACES = false);\n\n      it('always includes task stacks in failures', function() {\n        promise.LONG_STACK_TRACES = false;\n        flow.execute(function() {\n          flow.execute(function() {\n            flow.execute(throwStubError, 'throw error');\n          }, 'two');\n        }, 'three').\n        then(assert.fail, function(e) {\n          assertIsStubError(e);\n          if (typeof e.stack !== 'string') {\n            return;\n          }\n          var messages = e.stack.split(/\\n/).filter(function(line, index) {\n            return /^From: /.test(line);\n          });\n          assert.deepEqual([\n            'From: Task: throw error',\n            'From: Task: two',\n            'From: Task: three'\n          ], messages);\n        });\n        return waitForIdle();\n      });\n\n      it('does not include completed tasks', function () {\n        flow.execute(function() {}, 'succeeds');\n        flow.execute(throwStubError, 'kaboom').then(assert.fail, function(e) {\n          assertIsStubError(e);\n          if (typeof e.stack !== 'string') {\n            return;\n          }\n          var messages = e.stack.split(/\\n/).filter(function(line, index) {\n            return /^From: /.test(line);\n          });\n          assert.deepEqual(['From: Task: kaboom'], messages);\n        });\n        return waitForIdle();\n      });\n\n      it('does not include promise chain when disabled', function() {\n        promise.LONG_STACK_TRACES = false;\n        flow.execute(function() {\n          flow.execute(function() {\n            return promise.fulfilled().\n                then(function() {}).\n                then(function() {}).\n                then(throwStubError);\n          }, 'eventually assert.fails');\n        }, 'start').\n        then(assert.fail, function(e) {\n          assertIsStubError(e);\n          if (typeof e.stack !== 'string') {\n            return;\n          }\n          var messages = e.stack.split(/\\n/).filter(function(line, index) {\n            return /^From: /.test(line);\n          });\n          assert.deepEqual([\n            'From: Task: eventually assert.fails',\n            'From: Task: start'\n          ], messages);\n        });\n        return waitForIdle();\n      });\n\n      it('includes promise chain when enabled', function() {\n        promise.LONG_STACK_TRACES = true;\n        flow.execute(function() {\n          flow.execute(function() {\n            return promise.fulfilled().\n                then(function() {}).\n                then(function() {}).\n                then(throwStubError);\n          }, 'eventually assert.fails');\n        }, 'start').\n        then(assert.fail, function(e) {\n          assertIsStubError(e);\n          if (typeof e.stack !== 'string') {\n            return;\n          }\n          var messages = e.stack.split(/\\n/).filter(function(line, index) {\n            return /^From: /.test(line);\n          });\n          assert.deepEqual([\n            'From: Promise: then',\n            'From: Task: eventually assert.fails',\n            'From: Task: start'\n          ], messages);\n        });\n        return waitForIdle();\n      });\n    });\n\n    describe('frame cancels remaining tasks', function() {\n      it('on unhandled task failure', function() {\n        var run = false;\n        return flow.execute(function() {\n          flow.execute(throwStubError);\n          flow.execute(function() { run = true; });\n        }).then(assert.fail, function(e) {\n          assertIsStubError(e);\n          assert.ok(!run);\n        });\n      });\n\n      it('on unhandled promise rejection', function() {\n        var run = false;\n        return flow.execute(function() {\n          promise.rejected(new StubError);\n          flow.execute(function() { run = true; });\n        }).then(assert.fail, function(e) {\n          assertIsStubError(e);\n          assert.ok(!run);\n        });\n      });\n\n      it('if task throws', function() {\n        var run = false;\n        return flow.execute(function() {\n          flow.execute(function() { run = true; });\n          throw new StubError;\n        }).then(assert.fail, function(e) {\n          assertIsStubError(e);\n          assert.ok(!run);\n        });\n      });\n\n      describe('task callbacks scheduled in another frame', function() {\n        flow = promise.controlFlow();\n        function noop() {}\n\n        let subTask;\n\n        before(function() {\n          flow.execute(function() {\n            // This task will be discarded and never run because of the error below.\n            subTask = flow.execute(() => 'abc');\n            throw new StubError('stub');\n          }).catch(noop);\n        });\n\n        function assertCancellation(e) {\n          assert.ok(e instanceof promise.CancellationError);\n          assert.equal(\n            'Task was discarded due to a previous failure: stub', e.message);\n        }\n\n        it('are rejected with cancellation error', function() {\n          let result;\n          return Promise.resolve().then(function() {\n            return flow.execute(function() {\n              result = subTask.then(assert.fail);\n            });\n          })\n          .then(() => result)\n          .then(assert.fail, assertCancellation);\n        });\n\n        it('cancellation errors propagate through callbacks (1)', function() {\n          let result;\n          return Promise.resolve().then(function() {\n            return flow.execute(function() {\n              result = subTask\n                  .then(assert.fail, assertCancellation)\n                  .then(() => 'abc123');\n            });\n          })\n          .then(() => result)\n          .then(value => assert.equal('abc123', value));\n        });\n\n        it('cancellation errors propagate through callbacks (2)', function() {\n          let result;\n          return Promise.resolve().then(function() {\n            return flow.execute(function() {\n              result = subTask.then(assert.fail)\n                  .then(noop, assertCancellation)\n                  .then(() => 'fin');\n            });\n          })\n          // Verify result actually computed successfully all the way through.\n          .then(() => result)\n          .then(value => assert.equal('fin', value));\n        });\n      });\n    });\n\n    it('testRegisteredTaskCallbacksAreDroppedWhenTaskIsCancelled_return', function() {\n      var seen = [];\n      return flow.execute(function() {\n        flow.execute(throwStubError);\n\n        flow.execute(function() {\n          seen.push(1);\n        }).then(function() {\n          seen.push(2);\n        }, function() {\n          seen.push(3);\n        });\n      }).then(assert.fail, function(e) {\n        assertIsStubError(e);\n        assert.deepEqual([], seen);\n      });\n    });\n\n    it('testRegisteredTaskCallbacksAreDroppedWhenTaskIsCancelled_withReturn', function() {\n      var seen = [];\n      return flow.execute(function() {\n        flow.execute(throwStubError);\n\n        return flow.execute(function() {\n          seen.push(1);\n        }).then(function() {\n          seen.push(2);\n        }, function() {\n          seen.push(3);\n        });\n      }).then(assert.fail, function(e) {\n        assertIsStubError(e);\n        assert.deepEqual([], seen);\n      });\n    });\n\n    it('testTasksWithinACallbackAreDroppedIfContainingTaskIsAborted', function() {\n      var seen = [];\n      return flow.execute(function() {\n        flow.execute(throwStubError);\n\n        // None of the callbacks on this promise should execute because the\n        // task assert.failure above is never handled, causing the containing task to\n        // abort.\n        promise.fulfilled().then(function() {\n          seen.push(1);\n          return flow.execute(function() {\n            seen.push(2);\n          });\n        }).finally(function() {\n          seen.push(3);\n        });\n\n      }).then(assert.fail, function(e) {\n        assertIsStubError(e);\n        assert.deepEqual([], seen);\n      });\n    });\n\n    it('testTaskIsCancelledAfterWaitTimeout', function() {\n      var seen = [];\n      return flow.execute(function() {\n        flow.wait(function() {\n          return promise.delayed(50);\n        }, 5);\n\n        return flow.execute(function() {\n          seen.push(1);\n        }).then(function() {\n          seen.push(2);\n        }, function() {\n          seen.push(3);\n        });\n      }).then(assert.fail, function() {\n        assert.deepEqual([], seen);\n      });\n    });\n\n    describe('task callbacks get cancellation error if registered after task was cancelled', function() {\n      it('(a)', function() {\n        var task;\n        flow.execute(function() {\n          flow.execute(throwStubError);\n          task = flow.execute(function() {});\n        }).then(assert.fail, assertIsStubError);\n        return waitForIdle().then(function() {\n          return task.then(assert.fail, function(e) {\n            assert.ok(e instanceof promise.CancellationError);\n          });\n        });\n      });\n\n      it('(b)', function() {\n        var seen = [];\n\n        var task;\n        flow.execute(function() {\n          flow.execute(throwStubError);\n          task = flow.execute(function() {});\n\n          task.then(() => seen.push(1))\n              .then(() => seen.push(2));\n          task.then(() => seen.push(3))\n              .then(() => seen.push(4));\n\n        }).then(assert.fail, assertIsStubError);\n\n        return waitForIdle().then(function() {\n          return task.then(assert.fail, function(e) {\n            seen.push(5);\n            assert.ok(e instanceof promise.CancellationError);\n          });\n        }).then(() => assert.deepEqual([5], seen));\n      });\n    });\n\n    it('unhandledRejectionInParallelTaskQueue', function() {\n      var seen = [];\n      function schedule(name) {\n        return flow.execute(() => seen.push(name), name);\n      }\n\n      flow.async(function() {\n        schedule('a.1');\n        flow.execute(throwStubError, 'a.2 (throws)');\n      });\n\n      var b3;\n      flow.async(function() {\n        schedule('b.1');\n        schedule('b.2');\n        b3 = schedule('b.3');\n      });\n\n      var c3;\n      flow.async(function() {\n        schedule('c.1');\n        schedule('c.2');\n        c3 = schedule('c.3');\n      });\n\n      function assertWasCancelled(p) {\n        return p.then(assert.fail, function(e) {\n          assert.ok(e instanceof promise.CancellationError);\n        });\n      }\n\n      return waitForAbort()\n        .then(function() {\n          assert.deepEqual(['a.1', 'b.1', 'c.1', 'b.2', 'c.2'], seen);\n        })\n        .then(() => assertWasCancelled(b3))\n        .then(() => assertWasCancelled(c3));\n    });\n\n    it('errorsInAsyncFunctionsAreReportedAsUnhandledRejection', function() {\n      flow.removeAllListeners();  // For tearDown.\n\n      var task;\n      return new Promise(function(fulfill) {\n        flow.once('uncaughtException', fulfill);\n        flow.async(function() {\n          task = flow.execute(function() {});\n          throw Error('boom');\n        });\n      }).then(function(error) {\n        assert.ok(error instanceof promise.CancellationError);\n        return task.catch(function(error) {\n          assert.ok(error instanceof promise.CancellationError);\n        });\n      });\n    });\n\n    describe('does not wait for values thrown from callbacks to be resolved', function() {\n      it('(a)', function() {\n        var p1 = promise.fulfilled();\n        var reason = promise.fulfilled('should not see me');\n        return p1.then(function() {\n          throw reason;\n        }).then(assert.fail, function(e) {\n          assert.equal(reason, e);\n        });\n      });\n\n      it('(b)', function() {\n        var p1 = promise.fulfilled();\n        var reason = promise.rejected('should not see me');\n        reason.catch(function() {});  // For tearDown.\n        return p1.then(function() {\n          throw reason;\n        }).then(assert.fail, function(e) {\n          assert.equal(reason, e);\n        });\n      });\n\n      it('(c)', function() {\n        var p1 = promise.fulfilled();\n        var reason = promise.defer();\n        setTimeout(() => reason.fulfill('should not see me'), 100);\n        return p1.then(function() {\n          throw reason.promise;\n        }).then(assert.fail, function(e) {\n          assert.equal(reason.promise, e);\n        });\n      });\n\n      it('(d)', function() {\n        var p1 = promise.fulfilled();\n        var reason = {then: function() {}};  // A thenable like object.\n        return p1.then(function() {\n          throw reason;\n        }).then(assert.fail, function(e) {\n          assert.equal(reason, e);\n        });\n      });\n    });\n  });\n});\n"]}