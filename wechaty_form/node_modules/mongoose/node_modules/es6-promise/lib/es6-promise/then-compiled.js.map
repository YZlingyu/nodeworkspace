{"version":3,"sources":["then.js"],"names":[],"mappings":"AAAA,SACE,cADF,EAEE,SAFF,EAGE,SAHF,EAIE,QAJF,EAKE,IALF,EAME,WANF,EAOE,UAPF,QAQO,aARP;;AAUA,SAAS,IAAT,QAAqB,QAArB;;AAEA,eAAe,SAAS,IAAT,CAAc,aAAd,EAA6B,WAA7B,EAA0C;AACvD,MAAI,SAAS,IAAb;;AAEA,MAAI,QAAQ,IAAI,KAAK,WAAT,CAAqB,IAArB,CAAZ;;AAEA,MAAI,MAAM,UAAN,MAAsB,SAA1B,EAAqC;AACnC,gBAAY,KAAZ;AACD;;AAED,MAAI,QAAQ,OAAO,MAAnB;;AAEA,MAAI,KAAJ,EAAW;AACT,QAAI,WAAW,UAAU,QAAQ,CAAlB,CAAf;AACA,SAAK,YAAU;AACb,qBAAe,KAAf,EAAsB,KAAtB,EAA6B,QAA7B,EAAuC,OAAO,OAA9C;AACD,KAFD;AAGD,GALD,MAKO;AACL,cAAU,MAAV,EAAkB,KAAlB,EAAyB,aAAzB,EAAwC,WAAxC;AACD;;AAED,SAAO,KAAP;AACD","file":"then-compiled.js","sourcesContent":["import {\n  invokeCallback,\n  subscribe,\n  FULFILLED,\n  REJECTED,\n  noop,\n  makePromise,\n  PROMISE_ID\n} from './-internal';\n\nimport { asap } from './asap';\n\nexport default function then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var state = parent._state;\n\n  if (state) {\n    var callback = arguments[state - 1];\n    asap(function(){\n      invokeCallback(state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n"]}