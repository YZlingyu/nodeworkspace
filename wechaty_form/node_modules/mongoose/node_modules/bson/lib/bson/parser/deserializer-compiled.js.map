{"version":3,"sources":["deserializer.js"],"names":[],"mappings":"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","file":"deserializer-compiled.js","sourcesContent":["\"use strict\"\n\nvar readIEEE754 = require('../float_parser').readIEEE754,\n\tf = require('util').format,\n\tLong = require('../long').Long,\n  Double = require('../double').Double,\n  Timestamp = require('../timestamp').Timestamp,\n  ObjectID = require('../objectid').ObjectID,\n  Symbol = require('../symbol').Symbol,\n  Code = require('../code').Code,\n  MinKey = require('../min_key').MinKey,\n  MaxKey = require('../max_key').MaxKey,\n\tDecimal128 = require('../decimal128'),\n\tInt32 = require('../int_32'),\n  DBRef = require('../db_ref').DBRef,\n  BSONRegExp = require('../regexp').BSONRegExp,\n  Binary = require('../binary').Binary;\n\nvar deserialize = function(buffer, options, isArray) {\n\toptions = options == null ? {} : options;\n\tvar index = options && options.index ? options.index : 0;\n\t// Read the document size\n  var size = buffer[index] | buffer[index+1] << 8 | buffer[index+2] << 16 | buffer[index+3] << 24;\n\n\t// Ensure buffer is valid size\n  if(size < 5 || buffer.length < size || (size + index) > buffer.length) {\n\t\tthrow new Error(\"corrupt bson message\");\n\t}\n\n\t// Illegal end value\n\tif(buffer[index + size - 1] != 0) {\n\t\tthrow new Error(\"One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00\");\n\t}\n\n\t// Start deserializtion\n\treturn deserializeObject(buffer, index, options, isArray);\n}\n\nvar deserializeObject = function(buffer, index, options, isArray) {\n\tvar evalFunctions = options['evalFunctions'] == null ? false : options['evalFunctions'];\n  var cacheFunctions = options['cacheFunctions'] == null ? false : options['cacheFunctions'];\n  var cacheFunctionsCrc32 = options['cacheFunctionsCrc32'] == null ? false : options['cacheFunctionsCrc32'];\n\tvar fieldsAsRaw = options['fieldsAsRaw'] == null ? null : options['fieldsAsRaw'];\n\n\t// Return raw bson buffer instead of parsing it\n\tvar raw = options['raw'] == null ? false : options['raw'];\n\n\t// Return BSONRegExp objects instead of native regular expressions\n  var bsonRegExp = typeof options['bsonRegExp'] == 'boolean' ? options['bsonRegExp'] : false;\n\n\t// Controls the promotion of values vs wrapper classes\n\tvar promoteBuffers = options['promoteBuffers'] == null ? false : options['promoteBuffers'];\n\tvar promoteLongs = options['promoteLongs'] == null ? true : options['promoteLongs'];\n\tvar promoteValues = options['promoteValues'] == null ? true : options['promoteValues'];\n\n\t// Set the start index\n\tvar startIndex = index;\n\n  // Validate that we have at least 4 bytes of buffer\n  if(buffer.length < 5) throw new Error(\"corrupt bson message < 5 bytes long\");\n\n\t// Read the document size\n  var size = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\n\t// Ensure buffer is valid size\n  if(size < 5 || size > buffer.length) throw new Error(\"corrupt bson message\");\n\n  // Create holding object\n  var object = isArray ? [] : {};\n\t// Used for arrays to skip having to perform utf8 decoding\n\tvar arrayIndex = 0;\n\n  // While we have more left data left keep parsing\n  while(true) {\n    // Read the type\n    var elementType = buffer[index++];\n    // If we get a zero it's the last byte, exit\n    if(elementType == 0) {\n\t\t\tbreak;\n\t\t}\n\n\t\t// Get the start search index\n\t\tvar i = index;\n\t\t// Locate the end of the c string\n\t\twhile(buffer[i] !== 0x00 && i < buffer.length) {\n\t\t\ti++\n\t\t}\n\n\t\t// If are at the end of the buffer there is a problem with the document\n\t\tif(i >= buffer.length) throw new Error(\"Bad BSON Document: illegal CString\")\n\t\tvar name = isArray ? arrayIndex++ : buffer.toString('utf8', index, i);\n\n\t\tindex = i + 1;\n\n\t\tif(elementType == BSON.BSON_DATA_STRING) {\n      var stringSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\t\t\tif(stringSize <= 0 || stringSize > (buffer.length - index) || buffer[index + stringSize - 1] != 0) throw new Error(\"bad string length in bson\");\n      object[name] = buffer.toString('utf8', index, index + stringSize - 1);\n      index = index + stringSize;\n\t\t} else if(elementType == BSON.BSON_DATA_OID) {\n\t\t\tvar oid = new Buffer(12);\n\t\t\tbuffer.copy(oid, 0, index, index + 12);\n      object[name] = new ObjectID(oid);\n      index = index + 12;\n\t\t} else if(elementType == BSON.BSON_DATA_INT && promoteValues == false) {\n\t\t\tobject[name] = new Int32(buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24);\n\t\t} else if(elementType == BSON.BSON_DATA_INT) {\n      object[name] = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\t\t} else if(elementType == BSON.BSON_DATA_NUMBER && promoteValues == false) {\n\t\t\tobject[name] = new Double(buffer.readDoubleLE(index));\n\t\t\tindex = index + 8;\n\t\t} else if(elementType == BSON.BSON_DATA_NUMBER) {\n\t\t\tobject[name] = buffer.readDoubleLE(index);\n      index = index + 8;\n\t\t} else if(elementType == BSON.BSON_DATA_DATE) {\n      var lowBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      var highBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      object[name] = new Date(new Long(lowBits, highBits).toNumber());\n\t\t} else if(elementType == BSON.BSON_DATA_BOOLEAN) {\n\t\t\tif(buffer[index] != 0 && buffer[index] != 1) throw new Error('illegal boolean type value');\n      object[name] = buffer[index++] == 1;\n\t\t} else if(elementType == BSON.BSON_DATA_OBJECT) {\n\t\t\tvar _index = index;\n      var objectSize = buffer[index] | buffer[index + 1] << 8 | buffer[index + 2] << 16 | buffer[index + 3] << 24;\n\t\t\tif(objectSize <= 0 || objectSize > (buffer.length - index)) throw new Error(\"bad embedded document length in bson\");\n\n\t\t\t// We have a raw value\n\t\t\tif(raw) {\n\t      object[name] = buffer.slice(index, index + objectSize);\n\t\t\t} else {\n\t      object[name] = deserializeObject(buffer, _index, options, false);\n\t\t\t}\n\n      index = index + objectSize;\n\t\t} else if(elementType == BSON.BSON_DATA_ARRAY) {\n\t\t\tvar _index = index;\n      var objectSize = buffer[index] | buffer[index + 1] << 8 | buffer[index + 2] << 16 | buffer[index + 3] << 24;\n\t\t\tvar arrayOptions = options;\n\n\t\t\t// Stop index\n\t\t\tvar stopIndex = index + objectSize;\n\n\t\t\t// All elements of array to be returned as raw bson\n\t\t\tif(fieldsAsRaw && fieldsAsRaw[name]) {\n\t\t\t\tarrayOptions = {};\n\t\t\t\tfor(var n in options) arrayOptions[n] = options[n];\n\t\t\t\tarrayOptions['raw'] = true;\n\t\t\t}\n\n      object[name] = deserializeObject(buffer, _index, arrayOptions, true);\n      index = index + objectSize;\n\n\t\t\tif(buffer[index - 1] != 0) throw new Error('invalid array terminator byte');\n\t\t\tif(index != stopIndex) throw new Error('corrupted array bson');\n\t\t} else if(elementType == BSON.BSON_DATA_UNDEFINED) {\n      object[name] = undefined;\n\t\t} else if(elementType == BSON.BSON_DATA_NULL) {\n\t\t\tobject[name] = null;\n\t\t} else if(elementType == BSON.BSON_DATA_LONG) {\n      // Unpack the low and high bits\n      var lowBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      var highBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      var long = new Long(lowBits, highBits);\n      // Promote the long if possible\n      if(promoteLongs && promoteValues == true) {\n        object[name] = long.lessThanOrEqual(JS_INT_MAX_LONG) && long.greaterThanOrEqual(JS_INT_MIN_LONG) ? long.toNumber() : long;\n      } else {\n        object[name] = long;\n      }\n\t\t} else if(elementType == BSON.BSON_DATA_DECIMAL128) {\n\t\t\t// Buffer to contain the decimal bytes\n\t\t\tvar bytes = new Buffer(16);\n\t\t\t// Copy the next 16 bytes into the bytes buffer\n\t\t\tbuffer.copy(bytes, 0, index, index + 16);\n\t\t\t// Update index\n\t\t\tindex = index + 16;\n\t\t\t// Assign the new Decimal128 value\n\t\t\tvar decimal128 = new Decimal128(bytes);\n\t\t\t// If we have an alternative mapper use that\n\t\t\tobject[name] = decimal128.toObject ? decimal128.toObject() : decimal128;\n\t\t} else if(elementType == BSON.BSON_DATA_BINARY) {\n      var binarySize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\t\t\tvar totalBinarySize = binarySize;\n      var subType = buffer[index++];\n\n\t\t\t// Did we have a negative binary size, throw\n\t\t\tif(binarySize < 0) throw new Error('Negative binary type element size found');\n\n\t\t\t// Is the length longer than the document\n\t\t\tif(binarySize > buffer.length) throw new Error('Binary type size larger than document size');\n\n\t\t\t// Decode as raw Buffer object if options specifies it\n      if(buffer['slice'] != null) {\n        // If we have subtype 2 skip the 4 bytes for the size\n        if(subType == Binary.SUBTYPE_BYTE_ARRAY) {\n          binarySize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\t\t\t\t\tif(binarySize < 0) throw new Error('Negative binary type element size found for subtype 0x02');\n\t\t\t\t\tif(binarySize > (totalBinarySize - 4)) throw new Error('Binary type with subtype 0x02 contains to long binary size');\n\t\t\t\t\tif(binarySize < (totalBinarySize - 4)) throw new Error('Binary type with subtype 0x02 contains to short binary size');\n        }\n\n        if(promoteBuffers && promoteValues) {\n          object[name] = buffer.slice(index, index + binarySize);\n        } else {\n          object[name] = new Binary(buffer.slice(index, index + binarySize), subType);\n        }\n      } else {\n        var _buffer = typeof Uint8Array != 'undefined' ? new Uint8Array(new ArrayBuffer(binarySize)) : new Array(binarySize);\n        // If we have subtype 2 skip the 4 bytes for the size\n        if(subType == Binary.SUBTYPE_BYTE_ARRAY) {\n          binarySize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\t\t\t\t\tif(binarySize < 0) throw new Error('Negative binary type element size found for subtype 0x02');\n\t\t\t\t\tif(binarySize > (totalBinarySize - 4)) throw new Error('Binary type with subtype 0x02 contains to long binary size');\n\t\t\t\t\tif(binarySize < (totalBinarySize - 4)) throw new Error('Binary type with subtype 0x02 contains to short binary size');\n        }\n\n        // Copy the data\n        for(var i = 0; i < binarySize; i++) {\n          _buffer[i] = buffer[index + i];\n        }\n\n        if(promoteBuffers && promoteValues) {\n          object[name] = _buffer;\n        } else {\n          object[name] = new Binary(_buffer, subType);\n        }\n      }\n\n      // Update the index\n      index = index + binarySize;\n\t\t} else if(elementType == BSON.BSON_DATA_REGEXP && bsonRegExp == false) {\n\t\t\t// Get the start search index\n\t\t\tvar i = index;\n\t\t\t// Locate the end of the c string\n\t\t\twhile(buffer[i] !== 0x00 && i < buffer.length) {\n\t\t\t\ti++\n\t\t\t}\n\t\t\t// If are at the end of the buffer there is a problem with the document\n\t\t\tif(i >= buffer.length) throw new Error(\"Bad BSON Document: illegal CString\")\n\t\t\t// Return the C string\n\t\t\tvar source = buffer.toString('utf8', index, i);\n      // Create the regexp\n\t\t\tindex = i + 1;\n\n\t\t\t// Get the start search index\n\t\t\tvar i = index;\n\t\t\t// Locate the end of the c string\n\t\t\twhile(buffer[i] !== 0x00 && i < buffer.length) {\n\t\t\t\ti++\n\t\t\t}\n\t\t\t// If are at the end of the buffer there is a problem with the document\n\t\t\tif(i >= buffer.length) throw new Error(\"Bad BSON Document: illegal CString\")\n\t\t\t// Return the C string\n\t\t\tvar regExpOptions = buffer.toString('utf8', index, i);\n\t\t\tindex = i + 1;\n\n      // For each option add the corresponding one for javascript\n      var optionsArray = new Array(regExpOptions.length);\n\n      // Parse options\n      for(var i = 0; i < regExpOptions.length; i++) {\n        switch(regExpOptions[i]) {\n          case 'm':\n            optionsArray[i] = 'm';\n            break;\n          case 's':\n            optionsArray[i] = 'g';\n            break;\n          case 'i':\n            optionsArray[i] = 'i';\n            break;\n        }\n      }\n\n      object[name] = new RegExp(source, optionsArray.join(''));\n    } else if(elementType == BSON.BSON_DATA_REGEXP && bsonRegExp == true) {\n\t\t\t// Get the start search index\n\t\t\tvar i = index;\n\t\t\t// Locate the end of the c string\n\t\t\twhile(buffer[i] !== 0x00 && i < buffer.length) {\n\t\t\t\ti++\n\t\t\t}\n\t\t\t// If are at the end of the buffer there is a problem with the document\n\t\t\tif(i >= buffer.length) throw new Error(\"Bad BSON Document: illegal CString\")\n\t\t\t// Return the C string\n\t\t\tvar source = buffer.toString('utf8', index, i);\n      index = i + 1;\n\n\t\t\t// Get the start search index\n\t\t\tvar i = index;\n\t\t\t// Locate the end of the c string\n\t\t\twhile(buffer[i] !== 0x00 && i < buffer.length) {\n\t\t\t\ti++\n\t\t\t}\n\t\t\t// If are at the end of the buffer there is a problem with the document\n\t\t\tif(i >= buffer.length) throw new Error(\"Bad BSON Document: illegal CString\")\n\t\t\t// Return the C string\n\t\t\tvar regExpOptions = buffer.toString('utf8', index, i);\n      index = i + 1;\n\n      // Set the object\n      object[name] = new BSONRegExp(source, regExpOptions);\n\t\t} else if(elementType == BSON.BSON_DATA_SYMBOL) {\n      var stringSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\t\t\tif(stringSize <= 0 || stringSize > (buffer.length - index) || buffer[index + stringSize - 1] != 0) throw new Error(\"bad string length in bson\");\n      object[name] = new Symbol(buffer.toString('utf8', index, index + stringSize - 1));\n      index = index + stringSize;\n\t\t} else if(elementType == BSON.BSON_DATA_TIMESTAMP) {\n      var lowBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      var highBits = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n      object[name] = new Timestamp(lowBits, highBits);\n\t\t} else if(elementType == BSON.BSON_DATA_MIN_KEY) {\n      object[name] = new MinKey();\n\t\t} else if(elementType == BSON.BSON_DATA_MAX_KEY) {\n      object[name] = new MaxKey();\n\t\t} else if(elementType == BSON.BSON_DATA_CODE) {\n      var stringSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\t\t\tif(stringSize <= 0 || stringSize > (buffer.length - index) || buffer[index + stringSize - 1] != 0) throw new Error(\"bad string length in bson\");\n      var functionString = buffer.toString('utf8', index, index + stringSize - 1);\n\n      // If we are evaluating the functions\n      if(evalFunctions) {\n        var value = null;\n        // If we have cache enabled let's look for the md5 of the function in the cache\n        if(cacheFunctions) {\n          var hash = cacheFunctionsCrc32 ? crc32(functionString) : functionString;\n          // Got to do this to avoid V8 deoptimizing the call due to finding eval\n          object[name] = isolateEvalWithHash(functionCache, hash, functionString, object);\n        } else {\n          object[name] = isolateEval(functionString);\n        }\n      } else {\n        object[name]  = new Code(functionString);\n      }\n\n      // Update parse index position\n      index = index + stringSize;\n\t\t} else if(elementType == BSON.BSON_DATA_CODE_W_SCOPE) {\n      var totalSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\n\t\t\t// Element cannot be shorter than totalSize + stringSize + documentSize + terminator\n\t\t\tif(totalSize < (4 + 4 + 4 + 1)) {\n\t\t\t\tthrow new Error(\"code_w_scope total size shorter minimum expected length\");\n\t\t\t}\n\n\t\t\t// Get the code string size\n      var stringSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\t\t\t// Check if we have a valid string\n\t\t\tif(stringSize <= 0 || stringSize > (buffer.length - index) || buffer[index + stringSize - 1] != 0) throw new Error(\"bad string length in bson\");\n\n      // Javascript function\n      var functionString = buffer.toString('utf8', index, index + stringSize - 1);\n      // Update parse index position\n      index = index + stringSize;\n      // Parse the element\n\t\t\tvar _index = index;\n      // Decode the size of the object document\n      var objectSize = buffer[index] | buffer[index + 1] << 8 | buffer[index + 2] << 16 | buffer[index + 3] << 24;\n      // Decode the scope object\n      var scopeObject = deserializeObject(buffer, _index, options, false);\n      // Adjust the index\n      index = index + objectSize;\n\n\t\t\t// Check if field length is to short\n\t\t\tif(totalSize < (4 + 4 + objectSize + stringSize)) {\n\t\t\t\tthrow new Error('code_w_scope total size is to short, truncating scope');\n\t\t\t}\n\n\t\t\t// Check if totalSize field is to long\n\t\t\tif(totalSize > (4 + 4 + objectSize + stringSize)) {\n\t\t\t\tthrow new Error('code_w_scope total size is to long, clips outer document');\n\t\t\t}\n\n      // If we are evaluating the functions\n      if(evalFunctions) {\n        // Contains the value we are going to set\n        var value = null;\n        // If we have cache enabled let's look for the md5 of the function in the cache\n        if(cacheFunctions) {\n          var hash = cacheFunctionsCrc32 ? crc32(functionString) : functionString;\n          // Got to do this to avoid V8 deoptimizing the call due to finding eval\n          object[name] = isolateEvalWithHash(functionCache, hash, functionString, object);\n        } else {\n          object[name] = isolateEval(functionString);\n        }\n\n        object[name].scope = scopeObject;\n      } else {\n        object[name]  = new Code(functionString, scopeObject);\n      }\n\t\t} else if(elementType == BSON.BSON_DATA_DBPOINTER) {\n\t\t\t// Get the code string size\n      var stringSize = buffer[index++] | buffer[index++] << 8 | buffer[index++] << 16 | buffer[index++] << 24;\n\t\t\t// Check if we have a valid string\n\t\t\tif(stringSize <= 0 || stringSize > (buffer.length - index) || buffer[index + stringSize - 1] != 0) throw new Error(\"bad string length in bson\");\n\t\t\t// Namespace\n      var namespace = buffer.toString('utf8', index, index + stringSize - 1);\n\t\t\t// Update parse index position\n      index = index + stringSize;\n\n\t\t\t// Read the oid\n\t\t\tvar oidBuffer = new Buffer(12);\n\t\t\tbuffer.copy(oidBuffer, 0, index, index + 12);\n      var oid = new ObjectID(oidBuffer);\n\n\t\t\t// Update the index\n\t\t\tindex = index + 12;\n\n\t\t\t// Split the namespace\n\t\t\tvar parts = namespace.split('.');\n\t\t\tvar db = parts.shift();\n\t\t\tvar collection = parts.join('.');\n\t\t\t// Upgrade to DBRef type\n\t\t\tobject[name] = new DBRef(collection, oid, db);\n    } else {\n\t\t\tthrow new Error(\"Detected unknown BSON type \" + elementType.toString(16) + \" for fieldname \\\"\" + name + \"\\\", are you using the latest BSON parser\");\n\t\t}\n  }\n\n\t// Check if the deserialization was against a valid array/object\n\tif(size != (index - startIndex)) {\n\t\tif(isArray) throw new Error('corrupt array bson');\n\t\tthrow new Error('corrupt object bson');\n\t}\n\n  // Check if we have a db ref object\n  if(object['$id'] != null) object = new DBRef(object['$ref'], object['$id'], object['$db']);\n  return object;\n}\n\n/**\n * Ensure eval is isolated.\n *\n * @ignore\n * @api private\n */\nvar isolateEvalWithHash = function(functionCache, hash, functionString, object) {\n  // Contains the value we are going to set\n  var value = null;\n\n  // Check for cache hit, eval if missing and return cached function\n  if(functionCache[hash] == null) {\n    eval(\"value = \" + functionString);\n    functionCache[hash] = value;\n  }\n  // Set the object\n  return functionCache[hash].bind(object);\n}\n\n/**\n * Ensure eval is isolated.\n *\n * @ignore\n * @api private\n */\nvar isolateEval = function(functionString) {\n  // Contains the value we are going to set\n  var value = null;\n  // Eval the function\n  eval(\"value = \" + functionString);\n  return value;\n}\n\nvar BSON = {};\n\n/**\n * Contains the function cache if we have that enable to allow for avoiding the eval step on each deserialization, comparison is by md5\n *\n * @ignore\n * @api private\n */\nvar functionCache = BSON.functionCache = {};\n\n/**\n * Number BSON Type\n *\n * @classconstant BSON_DATA_NUMBER\n **/\nBSON.BSON_DATA_NUMBER = 1;\n/**\n * String BSON Type\n *\n * @classconstant BSON_DATA_STRING\n **/\nBSON.BSON_DATA_STRING = 2;\n/**\n * Object BSON Type\n *\n * @classconstant BSON_DATA_OBJECT\n **/\nBSON.BSON_DATA_OBJECT = 3;\n/**\n * Array BSON Type\n *\n * @classconstant BSON_DATA_ARRAY\n **/\nBSON.BSON_DATA_ARRAY = 4;\n/**\n * Binary BSON Type\n *\n * @classconstant BSON_DATA_BINARY\n **/\nBSON.BSON_DATA_BINARY = 5;\n/**\n * Binary BSON Type\n *\n * @classconstant BSON_DATA_UNDEFINED\n **/\nBSON.BSON_DATA_UNDEFINED = 6;\n/**\n * ObjectID BSON Type\n *\n * @classconstant BSON_DATA_OID\n **/\nBSON.BSON_DATA_OID = 7;\n/**\n * Boolean BSON Type\n *\n * @classconstant BSON_DATA_BOOLEAN\n **/\nBSON.BSON_DATA_BOOLEAN = 8;\n/**\n * Date BSON Type\n *\n * @classconstant BSON_DATA_DATE\n **/\nBSON.BSON_DATA_DATE = 9;\n/**\n * null BSON Type\n *\n * @classconstant BSON_DATA_NULL\n **/\nBSON.BSON_DATA_NULL = 10;\n/**\n * RegExp BSON Type\n *\n * @classconstant BSON_DATA_REGEXP\n **/\nBSON.BSON_DATA_REGEXP = 11;\n/**\n * Code BSON Type\n *\n * @classconstant BSON_DATA_DBPOINTER\n **/\nBSON.BSON_DATA_DBPOINTER = 12;\n/**\n * Code BSON Type\n *\n * @classconstant BSON_DATA_CODE\n **/\nBSON.BSON_DATA_CODE = 13;\n/**\n * Symbol BSON Type\n *\n * @classconstant BSON_DATA_SYMBOL\n **/\nBSON.BSON_DATA_SYMBOL = 14;\n/**\n * Code with Scope BSON Type\n *\n * @classconstant BSON_DATA_CODE_W_SCOPE\n **/\nBSON.BSON_DATA_CODE_W_SCOPE = 15;\n/**\n * 32 bit Integer BSON Type\n *\n * @classconstant BSON_DATA_INT\n **/\nBSON.BSON_DATA_INT = 16;\n/**\n * Timestamp BSON Type\n *\n * @classconstant BSON_DATA_TIMESTAMP\n **/\nBSON.BSON_DATA_TIMESTAMP = 17;\n/**\n * Long BSON Type\n *\n * @classconstant BSON_DATA_LONG\n **/\nBSON.BSON_DATA_LONG = 18;\n/**\n * Long BSON Type\n *\n * @classconstant BSON_DATA_DECIMAL128\n **/\nBSON.BSON_DATA_DECIMAL128 = 19;\n/**\n * MinKey BSON Type\n *\n * @classconstant BSON_DATA_MIN_KEY\n **/\nBSON.BSON_DATA_MIN_KEY = 0xff;\n/**\n * MaxKey BSON Type\n *\n * @classconstant BSON_DATA_MAX_KEY\n **/\nBSON.BSON_DATA_MAX_KEY = 0x7f;\n\n/**\n * Binary Default Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_DEFAULT\n **/\nBSON.BSON_BINARY_SUBTYPE_DEFAULT = 0;\n/**\n * Binary Function Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_FUNCTION\n **/\nBSON.BSON_BINARY_SUBTYPE_FUNCTION = 1;\n/**\n * Binary Byte Array Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_BYTE_ARRAY\n **/\nBSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY = 2;\n/**\n * Binary UUID Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_UUID\n **/\nBSON.BSON_BINARY_SUBTYPE_UUID = 3;\n/**\n * Binary MD5 Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_MD5\n **/\nBSON.BSON_BINARY_SUBTYPE_MD5 = 4;\n/**\n * Binary User Defined Type\n *\n * @classconstant BSON_BINARY_SUBTYPE_USER_DEFINED\n **/\nBSON.BSON_BINARY_SUBTYPE_USER_DEFINED = 128;\n\n// BSON MAX VALUES\nBSON.BSON_INT32_MAX = 0x7FFFFFFF;\nBSON.BSON_INT32_MIN = -0x80000000;\n\nBSON.BSON_INT64_MAX = Math.pow(2, 63) - 1;\nBSON.BSON_INT64_MIN = -Math.pow(2, 63);\n\n// JS MAX PRECISE VALUES\nBSON.JS_INT_MAX = 0x20000000000000;  // Any integer up to 2^53 can be precisely represented by a double.\nBSON.JS_INT_MIN = -0x20000000000000;  // Any integer down to -2^53 can be precisely represented by a double.\n\n// Internal long versions\nvar JS_INT_MAX_LONG = Long.fromNumber(0x20000000000000);  // Any integer up to 2^53 can be precisely represented by a double.\nvar JS_INT_MIN_LONG = Long.fromNumber(-0x20000000000000);  // Any integer down to -2^53 can be precisely represented by a double.\n\nmodule.exports = deserialize\n"]}