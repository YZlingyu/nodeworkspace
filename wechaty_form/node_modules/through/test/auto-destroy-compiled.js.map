{"version":3,"sources":["auto-destroy.js"],"names":[],"mappings":"AAAA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,IAAI,UAAU,QAAQ,KAAR,CAAd;;AAEA;;AAEA,KAAK,kBAAL,EAAyB,UAAU,MAAV,EAAkB;AACzC,MAAI,KAAK,SAAT;AACA,KAAG,WAAH,GAAiB,KAAjB;AACA,MAAI,QAAQ,KAAZ;AAAA,MAAmB,SAAS,KAA5B;;AAEA,KAAG,EAAH,CAAM,KAAN,EAAa,YAAY;AACvB,WAAO,EAAP,CAAU,CAAC,MAAX;AACA,YAAQ,IAAR;AACD,GAHD;AAIA,KAAG,EAAH,CAAM,OAAN,EAAe,YAAY;AACzB,WAAO,EAAP,CAAU,KAAV;AACA,aAAS,IAAT;AACD,GAHD;;AAKA,KAAG,KAAH,CAAS,CAAT;AACA,KAAG,KAAH,CAAS,CAAT;AACA,KAAG,KAAH,CAAS,CAAT;AACA,KAAG,GAAH;AACA,SAAO,EAAP,CAAU,KAAV;AACA,SAAO,KAAP,CAAa,MAAb;AACA,KAAG,OAAH;AACA,SAAO,EAAP,CAAU,MAAV;AACA,SAAO,GAAP;AACD,CAvBD","file":"auto-destroy-compiled.js","sourcesContent":["var test = require('tape')\nvar through = require('../')\n\n// must emit end before close.\n\ntest('end before close', function (assert) {\n  var ts = through()\n  ts.autoDestroy = false\n  var ended = false, closed = false\n\n  ts.on('end', function () {\n    assert.ok(!closed)\n    ended = true\n  })\n  ts.on('close', function () {\n    assert.ok(ended)\n    closed = true\n  })\n\n  ts.write(1)\n  ts.write(2)\n  ts.write(3)\n  ts.end()\n  assert.ok(ended)\n  assert.notOk(closed)\n  ts.destroy()\n  assert.ok(closed)\n  assert.end()\n})\n\n"]}