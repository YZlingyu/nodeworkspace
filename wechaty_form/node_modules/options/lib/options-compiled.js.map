{"version":3,"sources":["options.js"],"names":[],"mappings":"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","file":"options-compiled.js","sourcesContent":["/*!\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\nvar fs = require('fs');\n\nfunction Options(defaults) {\n  var internalValues = {};\n  var values = this.value = {};\n  Object.keys(defaults).forEach(function(key) {\n    internalValues[key] = defaults[key];\n    Object.defineProperty(values, key, {\n      get: function() { return internalValues[key]; },\n      configurable: false,\n      enumerable: true\n    });\n  });\n  this.reset = function() {\n    Object.keys(defaults).forEach(function(key) {\n      internalValues[key] = defaults[key];\n    });\n    return this;\n  };\n  this.merge = function(options, required) {\n    options = options || {};\n    if (Object.prototype.toString.call(required) === '[object Array]') {\n      var missing = [];\n      for (var i = 0, l = required.length; i < l; ++i) {\n        var key = required[i];\n        if (!(key in options)) {\n          missing.push(key);\n        }\n      }\n      if (missing.length > 0) {\n        if (missing.length > 1) {\n          throw new Error('options ' +\n            missing.slice(0, missing.length - 1).join(', ') + ' and ' +\n            missing[missing.length - 1] + ' must be defined');\n        }\n        else throw new Error('option ' + missing[0] + ' must be defined');\n      }\n    }\n    Object.keys(options).forEach(function(key) {\n      if (key in internalValues) {\n        internalValues[key] = options[key];\n      }\n    });\n    return this;\n  };\n  this.copy = function(keys) {\n    var obj = {};\n    Object.keys(defaults).forEach(function(key) {\n      if (keys.indexOf(key) !== -1) {\n        obj[key] = values[key];\n      }\n    });\n    return obj;\n  };\n  this.read = function(filename, cb) {\n    if (typeof cb == 'function') {\n      var self = this;\n      fs.readFile(filename, function(error, data) {\n        if (error) return cb(error);\n        var conf = JSON.parse(data);\n        self.merge(conf);\n        cb();\n      });\n    }\n    else {\n      var conf = JSON.parse(fs.readFileSync(filename));\n      this.merge(conf);\n    }\n    return this;\n  };\n  this.isDefined = function(key) {\n    return typeof values[key] != 'undefined';\n  };\n  this.isDefinedAndNonNull = function(key) {\n    return typeof values[key] != 'undefined' && values[key] !== null;\n  };\n  Object.freeze(values);\n  Object.freeze(this);\n}\n\nmodule.exports = Options;\n"]}