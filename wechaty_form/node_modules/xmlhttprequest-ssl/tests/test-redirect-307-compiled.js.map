{"version":3,"sources":["test-redirect-307.js"],"names":[],"mappings":"AAAA,IAAI,MAAM,QAAQ,MAAR,CAAV;AAAA,IACI,SAAS,QAAQ,QAAR,CADb;AAAA,IAEI,iBAAiB,QAAQ,uBAAR,EAAiC,cAFtD;AAAA,IAGI,MAAM,IAAI,cAAJ,EAHV;AAAA,IAII,OAAO,QAAQ,MAAR,CAJX;;AAMA;AACA,IAAI,SAAS,KAAK,YAAL,CAAkB,UAAU,GAAV,EAAe,GAAf,EAAoB;AACjD,MAAI,IAAI,GAAJ,KAAY,sBAAhB,EAAwC;AACtC,QAAI,SAAJ,CAAc,GAAd,EAAmB,EAAC,YAAY,wBAAb,EAAnB;AACA,QAAI,GAAJ;AACA;AACD;;AAED,SAAO,KAAP,CAAa,IAAI,MAAjB,EAAyB,MAAzB;;AAEA,MAAI,OAAO,aAAX;AACA,MAAI,SAAJ,CAAc,GAAd,EAAmB;AACjB,oBAAgB,YADC;AAEjB,sBAAkB,OAAO,UAAP,CAAkB,IAAlB,CAFD;AAGjB,YAAQ,+BAHS;AAIjB,kBAAc;AAJG,GAAnB;AAMA,MAAI,KAAJ,CAAU,aAAV;AACA,MAAI,GAAJ;;AAEA,OAAK,KAAL;AACD,CApBY,EAoBV,MApBU,CAoBH,IApBG,CAAb;;AAsBA,IAAI,kBAAJ,GAAyB,YAAW;AAClC,MAAI,KAAK,UAAL,IAAmB,CAAvB,EAA0B;AACxB,WAAO,KAAP,CAAa,IAAI,gBAAJ,CAAqB,UAArB,CAAb,EAA+C,EAA/C;AACA,WAAO,KAAP,CAAa,IAAI,YAAjB,EAA+B,aAA/B;AACA,QAAI,IAAJ,CAAS,MAAT;AACD;AACF,CAND;;AAQA,IAAI;AACF,MAAI,IAAJ,CAAS,MAAT,EAAiB,2CAAjB;AACA,MAAI,IAAJ;AACD,CAHD,CAGE,OAAM,CAAN,EAAS;AACT,UAAQ,GAAR,CAAY,yBAAZ,EAAuC,CAAvC;AACD","file":"test-redirect-307-compiled.js","sourcesContent":["var sys = require(\"util\")\n  , assert = require(\"assert\")\n  , XMLHttpRequest = require(\"../lib/XMLHttpRequest\").XMLHttpRequest\n  , xhr = new XMLHttpRequest()\n  , http = require(\"http\");\n\n// Test server\nvar server = http.createServer(function (req, res) {\n  if (req.url === '/redirectingResource') {\n    res.writeHead(307, {'Location': 'http://localhost:8000/'});\n    res.end();\n    return;\n  }\n\n  assert.equal(req.method, 'POST');\n\n  var body = \"Hello World\";\n  res.writeHead(200, {\n    \"Content-Type\": \"text/plain\",\n    \"Content-Length\": Buffer.byteLength(body),\n    \"Date\": \"Thu, 30 Aug 2012 18:17:53 GMT\",\n    \"Connection\": \"close\"\n  });\n  res.write(\"Hello World\");\n  res.end();\n\n  this.close();\n}).listen(8000);\n\nxhr.onreadystatechange = function() {\n  if (this.readyState == 4) {\n    assert.equal(xhr.getRequestHeader('Location'), '');\n    assert.equal(xhr.responseText, \"Hello World\");\n    sys.puts(\"done\");\n  }\n};\n\ntry {\n  xhr.open(\"POST\", \"http://localhost:8000/redirectingResource\");\n  xhr.send();\n} catch(e) {\n  console.log(\"ERROR: Exception raised\", e);\n}\n"]}