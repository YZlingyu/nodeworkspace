{"version":3,"sources":["test-events.js"],"names":[],"mappings":"AAAA,IAAI,MAAM,QAAQ,MAAR,CAAV;AAAA,IACI,SAAS,QAAQ,QAAR,CADb;AAAA,IAEI,OAAO,QAAQ,MAAR,CAFX;AAAA,IAGI,iBAAiB,QAAQ,uBAAR,EAAiC,cAHtD;AAAA,IAII,GAJJ;;AAMA;AACA,IAAI,SAAS,KAAK,YAAL,CAAkB,UAAU,GAAV,EAAe,GAAf,EAAoB;AACjD,MAAI,OAAQ,IAAI,MAAJ,IAAc,MAAd,GAAuB,aAAvB,GAAuC,EAAnD;;AAEA,MAAI,SAAJ,CAAc,GAAd,EAAmB;AACjB,oBAAgB,YADC;AAEjB,sBAAkB,OAAO,UAAP,CAAkB,IAAlB;AAFD,GAAnB;AAIA;AACA,MAAI,IAAI,MAAJ,IAAc,MAAlB,EAA0B;AACxB,QAAI,KAAJ,CAAU,IAAV;AACD;AACD,MAAI,GAAJ;AACA,SAAO,KAAP,CAAa,kBAAb,EAAiC,IAAjC;AACA,SAAO,KAAP,CAAa,gBAAb,EAA+B,IAA/B;AACA,SAAO,KAAP,CAAa,OAAb,EAAsB,IAAtB;AACA,MAAI,IAAJ,CAAS,MAAT;AACA,OAAK,KAAL;AACD,CAjBY,EAiBV,MAjBU,CAiBH,IAjBG,CAAb;;AAmBA,MAAM,IAAI,cAAJ,EAAN;;AAEA;AACA,IAAI,qBAAqB,KAAzB;AACA,IAAI,mBAAmB,KAAvB;AACA,IAAI,UAAU,IAAd;AACA,IAAI,eAAe,YAAW;AAC5B,YAAU,KAAV;AACD,CAFD;;AAIA,IAAI,kBAAJ,GAAyB,YAAW;AAClC,uBAAqB,IAArB;AACD,CAFD;;AAIA,IAAI,gBAAJ,CAAqB,kBAArB,EAAyC,YAAW;AAClD,qBAAmB,IAAnB;AACD,CAFD;;AAIA;AACA,IAAI,gBAAJ,CAAqB,kBAArB,EAAyC,YAAzC;AACA,IAAI,mBAAJ,CAAwB,kBAAxB,EAA4C,YAA5C;;AAEA,IAAI,IAAJ,CAAS,KAAT,EAAgB,uBAAhB;AACA,IAAI,IAAJ","file":"test-events-compiled.js","sourcesContent":["var sys = require(\"util\")\n  , assert = require(\"assert\")\n  , http = require(\"http\")\n  , XMLHttpRequest = require(\"../lib/XMLHttpRequest\").XMLHttpRequest\n  , xhr;\n\n// Test server\nvar server = http.createServer(function (req, res) {\n  var body = (req.method != \"HEAD\" ? \"Hello World\" : \"\");\n\n  res.writeHead(200, {\n    \"Content-Type\": \"text/plain\",\n    \"Content-Length\": Buffer.byteLength(body)\n  });\n  // HEAD has no body\n  if (req.method != \"HEAD\") {\n    res.write(body);\n  }\n  res.end();\n  assert.equal(onreadystatechange, true);\n  assert.equal(readystatechange, true);\n  assert.equal(removed, true);\n  sys.puts(\"done\");\n  this.close();\n}).listen(8000);\n\nxhr = new XMLHttpRequest();\n\n// Track event calls\nvar onreadystatechange = false;\nvar readystatechange = false;\nvar removed = true;\nvar removedEvent = function() {\n  removed = false;\n};\n\nxhr.onreadystatechange = function() {\n  onreadystatechange = true;\n};\n\nxhr.addEventListener(\"readystatechange\", function() {\n  readystatechange = true;\n});\n\n// This isn't perfect, won't guarantee it was added in the first place\nxhr.addEventListener(\"readystatechange\", removedEvent);\nxhr.removeEventListener(\"readystatechange\", removedEvent);\n\nxhr.open(\"GET\", \"http://localhost:8000\");\nxhr.send();\n"]}