{"version":3,"sources":["index.js"],"names":[],"mappings":";AACA;;;;AAIA,IAAI,MAAM,QAAQ,OAAR,CAAV;AACA,IAAI,SAAS,QAAQ,kBAAR,CAAb;AACA,IAAI,UAAU,QAAQ,WAAR,CAAd;AACA,IAAI,QAAQ,QAAQ,OAAR,EAAiB,kBAAjB,CAAZ;;AAEA;;;;AAIA,OAAO,OAAP,GAAiB,UAAU,MAA3B;;AAEA;;;;AAIA,IAAI,QAAQ,QAAQ,QAAR,GAAmB,EAA/B;;AAEA;;;;;;;;;;;;;AAaA,SAAS,MAAT,CAAiB,GAAjB,EAAsB,IAAtB,EAA4B;AAC1B,MAAI,OAAO,GAAP,KAAe,QAAnB,EAA6B;AAC3B,WAAO,GAAP;AACA,UAAM,SAAN;AACD;;AAED,SAAO,QAAQ,EAAf;;AAEA,MAAI,SAAS,IAAI,GAAJ,CAAb;AACA,MAAI,SAAS,OAAO,MAApB;AACA,MAAI,KAAK,OAAO,EAAhB;AACA,MAAI,OAAO,OAAO,IAAlB;AACA,MAAI,gBAAgB,MAAM,EAAN,KAAa,QAAQ,MAAM,EAAN,EAAU,IAAnD;AACA,MAAI,gBAAgB,KAAK,QAAL,IAAiB,KAAK,sBAAL,CAAjB,IACA,UAAU,KAAK,SADf,IAC4B,aADhD;;AAGA,MAAI,EAAJ;;AAEA,MAAI,aAAJ,EAAmB;AACjB,UAAM,8BAAN,EAAsC,MAAtC;AACA,SAAK,QAAQ,MAAR,EAAgB,IAAhB,CAAL;AACD,GAHD,MAGO;AACL,QAAI,CAAC,MAAM,EAAN,CAAL,EAAgB;AACd,YAAM,wBAAN,EAAgC,MAAhC;AACA,YAAM,EAAN,IAAY,QAAQ,MAAR,EAAgB,IAAhB,CAAZ;AACD;AACD,SAAK,MAAM,EAAN,CAAL;AACD;AACD,MAAI,OAAO,KAAP,IAAgB,CAAC,KAAK,KAA1B,EAAiC;AAC/B,SAAK,KAAL,GAAa,OAAO,KAApB;AACD,GAFD,MAEO,IAAI,QAAQ,aAAa,OAAO,KAAK,KAArC,EAA4C;AACjD,SAAK,KAAL,GAAa,kBAAkB,KAAK,KAAvB,CAAb;AACD;AACD,SAAO,GAAG,MAAH,CAAU,OAAO,IAAjB,EAAuB,IAAvB,CAAP;AACD;AACD;;;;;AAKA,SAAS,iBAAT,CAA4B,GAA5B,EAAiC;AAC/B,MAAI,MAAM,EAAV;AACA,OAAK,IAAI,CAAT,IAAc,GAAd,EAAmB;AACjB,QAAI,IAAI,cAAJ,CAAmB,CAAnB,CAAJ,EAA2B;AACzB,UAAI,IAAJ,CAAS,mBAAmB,CAAnB,IAAwB,GAAxB,GAA8B,mBAAmB,IAAI,CAAJ,CAAnB,CAAvC;AACD;AACF;AACD,SAAO,IAAI,IAAJ,CAAS,GAAT,CAAP;AACD;AACD;;;;;;AAMA,QAAQ,QAAR,GAAmB,OAAO,QAA1B;;AAEA;;;;;;;AAOA,QAAQ,OAAR,GAAkB,MAAlB;;AAEA;;;;;;AAMA,QAAQ,OAAR,GAAkB,QAAQ,WAAR,CAAlB;AACA,QAAQ,MAAR,GAAiB,QAAQ,UAAR,CAAjB","file":"index-compiled.js","sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  } else if (opts && 'object' === typeof opts.query) {\n    opts.query = encodeQueryString(opts.query);\n  }\n  return io.socket(parsed.path, opts);\n}\n/**\n *  Helper method to parse query objects to string.\n * @param {object} query\n * @returns {string}\n */\nfunction encodeQueryString (obj) {\n  var str = [];\n  for (var p in obj) {\n    if (obj.hasOwnProperty(p)) {\n      str.push(encodeURIComponent(p) + '=' + encodeURIComponent(obj[p]));\n    }\n  }\n  return str.join('&');\n}\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n"]}