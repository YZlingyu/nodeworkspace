{"version":3,"sources":["brolog.js"],"names":[],"mappings":"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","file":"brolog-compiled.js","sourcesContent":["/*!\n * Brolog JavaScript Library v1.1.0\n * https://github.com/zixia/brolog\n *\n * Copyright Huan LI <zixia@zixia.net>\n * Released under the ISC license\n * https://github.com/zixia/brolog/blob/master/LICENSE\n *\n * Date: 2016-07\n */\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"silent\"] = 0] = \"silent\";\n    LogLevel[LogLevel[\"error\"] = 1] = \"error\";\n    LogLevel[LogLevel[\"warn\"] = 2] = \"warn\";\n    LogLevel[LogLevel[\"info\"] = 3] = \"info\";\n    LogLevel[LogLevel[\"verbose\"] = 4] = \"verbose\";\n    LogLevel[LogLevel[\"silly\"] = 5] = \"silly\";\n})(LogLevel || (LogLevel = {}));\nexport const nullLogger = {\n    error() { },\n    warn() { },\n    info() { },\n    verbose() { },\n    silly() { },\n};\nexport class Brolog {\n    constructor() {\n        this.logLevel = LogLevel.info;\n        this.prefixFilter = /.*/; // Match all by default\n        const instance = Brolog.instance();\n        if (instance) {\n            // set level/prefix of this instance\n            // default to the global instance\n            this.level(instance.level());\n            this.prefix(instance.prefix());\n        }\n    }\n    /**\n     * Create a global Brolog Instance for sharing between modules\n     */\n    static instance(levelName, prefix) {\n        if (levelName) {\n            Brolog.level(levelName);\n        }\n        if (prefix) {\n            Brolog.prefix(prefix);\n        }\n        return globalBrolog;\n    }\n    static enableLogging(log) {\n        Brolog.instance().verbose('Brolog', 'enableLogging(%s)', log);\n        if (log === false) {\n            Brolog.instance().silly('Brolog', 'enableLogging() disabled');\n            return nullLogger;\n        }\n        else if (log === true) {\n            Brolog.instance().silly('Brolog', 'enableLogging() enabled: using blobal Brolog instance');\n            return Brolog.instance();\n        }\n        else if (typeof log.verbose === 'function') {\n            Brolog.instance().silly('Brolog', 'enableLogging() enabled: using provided logger');\n            return log;\n        }\n        throw new Error('got invalid logger');\n    }\n    static prefix(filter) {\n        return Brolog.instance().prefix(filter);\n    }\n    prefix(filter) {\n        if (filter) {\n            if (typeof filter === 'string') {\n                this.prefixFilter = new RegExp(filter, 'i');\n            }\n            else if (filter instanceof RegExp) {\n                this.prefixFilter = filter;\n            }\n            else {\n                throw new Error('unsupported prefix filter');\n            }\n        }\n        return this.prefixFilter;\n    }\n    static level(levelName) {\n        return Brolog.instance().level(levelName);\n    }\n    level(levelName) {\n        if (levelName) {\n            // console.log('levelName: ' + levelName)\n            // http://stackoverflow.com/a/21294925/1123955\n            // XXX: fix the any here?\n            const logLevel = LogLevel[levelName.toLowerCase()];\n            if (logLevel === undefined) {\n                // console.log(logLevel)\n                // console.log(LogLevel)\n                throw new Error('level name error');\n            }\n            this.logLevel = logLevel;\n        }\n        return LogLevel[this.logLevel];\n    }\n    // private log(levelTitle: LevelTitle, prefix: string, message: string) { return Brolog.log(levelTitle, prefix, message) }\n    log(levelTitle, prefix, message) {\n        if (!this.prefixFilter.test(prefix)) {\n            return; // skip message not match prefix filter\n        }\n        const args = Array.prototype.slice.call(arguments, 3) || [];\n        args.unshift(Brolog.timestamp() + ' ' + levelTitle + ' ' + prefix + ' ' + (message || ''));\n        switch (levelTitle) {\n            case 'ERR':\n                console.error.apply(console, args);\n                break;\n            case 'WARN':\n                console.warn.apply(console, args);\n                break;\n            case 'INFO':\n                console.info.apply(console, args);\n                break;\n            default:\n            case 'VERB':\n            case 'SILL':\n                console.log.apply(console, args);\n        }\n    }\n    static error(prefix, ...args) {\n        const instance = Brolog.instance();\n        return instance.error.apply(instance, arguments);\n    }\n    error(prefix, ...args) {\n        if (this.logLevel < LogLevel.error) {\n            return;\n        }\n        const argList = Array.prototype.slice.call(arguments);\n        argList.unshift('ERR');\n        this.log.apply(this, argList);\n    }\n    static warn(prefix, ...args) {\n        const instance = Brolog.instance();\n        return instance.warn.apply(instance, arguments);\n    }\n    warn(prefix, ...args) {\n        if (this.logLevel < LogLevel.warn) {\n            return;\n        }\n        const argList = Array.prototype.slice.call(arguments);\n        argList.unshift('WARN');\n        this.log.apply(this, argList);\n    }\n    static info(prefix, ...args) {\n        const instance = Brolog.instance();\n        return instance.info.apply(instance, arguments);\n    }\n    info(prefix, ...args) {\n        if (this.logLevel < LogLevel.info) {\n            return;\n        }\n        const argList = Array.prototype.slice.call(arguments);\n        argList.unshift('INFO');\n        this.log.apply(this, argList);\n    }\n    static verbose(prefix, ...args) {\n        const instance = Brolog.instance();\n        return instance.verbose.apply(instance, arguments);\n    }\n    verbose(prefix, ...args) {\n        if (this.logLevel < LogLevel.verbose) {\n            return;\n        }\n        const argList = Array.prototype.slice.call(arguments);\n        argList.unshift('VERB');\n        this.log.apply(this, argList);\n    }\n    static silly(prefix, ...args) {\n        const instance = Brolog.instance();\n        return instance.silly.apply(instance, arguments);\n    }\n    silly(prefix, ...args) {\n        if (this.logLevel < LogLevel.silly) {\n            return;\n        }\n        const argList = Array.prototype.slice.call(arguments);\n        argList.unshift('SILL');\n        this.log.apply(this, argList);\n    }\n    static timestamp() {\n        const date = new Date();\n        const hour = date.getHours();\n        const min = date.getMinutes();\n        const sec = date.getSeconds();\n        let stampStr = '';\n        stampStr += (hour < 10) ? ('0' + hour) : hour;\n        stampStr += ':';\n        stampStr += (min < 10) ? ('0' + min) : min;\n        stampStr += ':';\n        stampStr += (sec < 10) ? ('0' + sec) : sec;\n        return stampStr;\n    }\n}\nexport const globalBrolog = new Brolog();\nexport { globalBrolog as log };\nexport default globalBrolog;\n//# sourceMappingURL=brolog.js.map"]}