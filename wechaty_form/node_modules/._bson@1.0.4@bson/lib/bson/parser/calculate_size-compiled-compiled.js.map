{"version":3,"sources":["calculate_size-compiled.js"],"names":[],"mappings":"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","file":"calculate_size-compiled-compiled.js","sourcesContent":["\"use strict\";\n\nvar writeIEEE754 = require('../float_parser').writeIEEE754,\n    readIEEE754 = require('../float_parser').readIEEE754,\n    Long = require('../long').Long,\n    Double = require('../double').Double,\n    Timestamp = require('../timestamp').Timestamp,\n    ObjectID = require('../objectid').ObjectID,\n    Symbol = require('../symbol').Symbol,\n    BSONRegExp = require('../regexp').BSONRegExp,\n    Code = require('../code').Code,\n    Decimal128 = require('../decimal128'),\n    MinKey = require('../min_key').MinKey,\n    MaxKey = require('../max_key').MaxKey,\n    DBRef = require('../db_ref').DBRef,\n    Binary = require('../binary').Binary;\n\n// To ensure that 0.4 of node works correctly\nvar isDate = function isDate(d) {\n  return typeof d === 'object' && Object.prototype.toString.call(d) === '[object Date]';\n};\n\nvar calculateObjectSize = function calculateObjectSize(object, serializeFunctions, ignoreUndefined) {\n  var totalLength = 4 + 1;\n\n  if (Array.isArray(object)) {\n    for (var i = 0; i < object.length; i++) {\n      totalLength += calculateElement(i.toString(), object[i], serializeFunctions, true, ignoreUndefined);\n    }\n  } else {\n    // If we have toBSON defined, override the current object\n    if (object.toBSON) {\n      object = object.toBSON();\n    }\n\n    // Calculate size\n    for (var key in object) {\n      totalLength += calculateElement(key, object[key], serializeFunctions, false, ignoreUndefined);\n    }\n  }\n\n  return totalLength;\n};\n\n/**\n * @ignore\n * @api private\n */\nfunction calculateElement(name, value, serializeFunctions, isArray, ignoreUndefined) {\n  // If we have toBSON defined, override the current object\n  if (value && value.toBSON) {\n    value = value.toBSON();\n  }\n\n  switch (typeof value) {\n    case 'string':\n      return 1 + Buffer.byteLength(name, 'utf8') + 1 + 4 + Buffer.byteLength(value, 'utf8') + 1;\n    case 'number':\n      if (Math.floor(value) === value && value >= BSON.JS_INT_MIN && value <= BSON.JS_INT_MAX) {\n        if (value >= BSON.BSON_INT32_MIN && value <= BSON.BSON_INT32_MAX) {\n          // 32 bit\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (4 + 1);\n        } else {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n        }\n      } else {\n        // 64 bit\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n      }\n    case 'undefined':\n      if (isArray || !ignoreUndefined) return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1;\n      return 0;\n    case 'boolean':\n      return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (1 + 1);\n    case 'object':\n      if (value == null || value instanceof MinKey || value instanceof MaxKey || value['_bsontype'] == 'MinKey' || value['_bsontype'] == 'MaxKey') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1;\n      } else if (value instanceof ObjectID || value['_bsontype'] == 'ObjectID') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (12 + 1);\n      } else if (value instanceof Date || isDate(value)) {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n      } else if (typeof Buffer !== 'undefined' && Buffer.isBuffer(value)) {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (1 + 4 + 1) + value.length;\n      } else if (value instanceof Long || value instanceof Double || value instanceof Timestamp || value['_bsontype'] == 'Long' || value['_bsontype'] == 'Double' || value['_bsontype'] == 'Timestamp') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (8 + 1);\n      } else if (value instanceof Decimal128 || value['_bsontype'] == 'Decimal128') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (16 + 1);\n      } else if (value instanceof Code || value['_bsontype'] == 'Code') {\n        // Calculate size depending on the availability of a scope\n        if (value.scope != null && Object.keys(value.scope).length > 0) {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + 4 + 4 + Buffer.byteLength(value.code.toString(), 'utf8') + 1 + calculateObjectSize(value.scope, serializeFunctions, ignoreUndefined);\n        } else {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + 4 + Buffer.byteLength(value.code.toString(), 'utf8') + 1;\n        }\n      } else if (value instanceof Binary || value['_bsontype'] == 'Binary') {\n        // Check what kind of subtype we have\n        if (value.sub_type == Binary.SUBTYPE_BYTE_ARRAY) {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (value.position + 1 + 4 + 1 + 4);\n        } else {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + (value.position + 1 + 4 + 1);\n        }\n      } else if (value instanceof Symbol || value['_bsontype'] == 'Symbol') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + Buffer.byteLength(value.value, 'utf8') + 4 + 1 + 1;\n      } else if (value instanceof DBRef || value['_bsontype'] == 'DBRef') {\n        // Set up correct object for serialization\n        var ordered_values = {\n          '$ref': value.namespace,\n          '$id': value.oid\n        };\n\n        // Add db reference if it exists\n        if (null != value.db) {\n          ordered_values['$db'] = value.db;\n        }\n\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + calculateObjectSize(ordered_values, serializeFunctions, ignoreUndefined);\n      } else if (value instanceof RegExp || Object.prototype.toString.call(value) === '[object RegExp]') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + Buffer.byteLength(value.source, 'utf8') + 1 + (value.global ? 1 : 0) + (value.ignoreCase ? 1 : 0) + (value.multiline ? 1 : 0) + 1;\n      } else if (value instanceof BSONRegExp || value['_bsontype'] == 'BSONRegExp') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + Buffer.byteLength(value.pattern, 'utf8') + 1 + Buffer.byteLength(value.options, 'utf8') + 1;\n      } else {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + calculateObjectSize(value, serializeFunctions, ignoreUndefined) + 1;\n      }\n    case 'function':\n      // WTF for 0.4.X where typeof /someregexp/ === 'function'\n      if (value instanceof RegExp || Object.prototype.toString.call(value) === '[object RegExp]' || String.call(value) == '[object RegExp]') {\n        return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + Buffer.byteLength(value.source, 'utf8') + 1 + (value.global ? 1 : 0) + (value.ignoreCase ? 1 : 0) + (value.multiline ? 1 : 0) + 1;\n      } else {\n        if (serializeFunctions && value.scope != null && Object.keys(value.scope).length > 0) {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + 4 + 4 + Buffer.byteLength(value.toString(), 'utf8') + 1 + calculateObjectSize(value.scope, serializeFunctions, ignoreUndefined);\n        } else if (serializeFunctions) {\n          return (name != null ? Buffer.byteLength(name, 'utf8') + 1 : 0) + 1 + 4 + Buffer.byteLength(value.toString(), 'utf8') + 1;\n        }\n      }\n  }\n\n  return 0;\n}\n\nvar BSON = {};\n\n// BSON MAX VALUES\nBSON.BSON_INT32_MAX = 0x7FFFFFFF;\nBSON.BSON_INT32_MIN = -0x80000000;\n\n// JS MAX PRECISE VALUES\nBSON.JS_INT_MAX = 0x20000000000000; // Any integer up to 2^53 can be precisely represented by a double.\nBSON.JS_INT_MIN = -0x20000000000000; // Any integer down to -2^53 can be precisely represented by a double.\n\nmodule.exports = calculateObjectSize;\n\n//# sourceMappingURL=calculate_size-compiled.js.map"]}